<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 Guess the Number: AI takes a turn | Writing games with Python and PsychoPy</title>
<meta name="author" content="Alexander (Sasha) Pastukhov">
<meta name="description" content="Let us program Guess the Number game again18 but reverse the roles. Now you will pick a number and the computer will guess. Think about the algorithm that a computer could use for this before...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 7 Guess the Number: AI takes a turn | Writing games with Python and PsychoPy">
<meta property="og:type" content="book">
<meta property="og:url" content="https://alexander-pastukhov.github.io/writing-games-with-python-and-psychopy/guess-the-number-ai.html">
<meta property="og:description" content="Let us program Guess the Number game again18 but reverse the roles. Now you will pick a number and the computer will guess. Think about the algorithm that a computer could use for this before...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 Guess the Number: AI takes a turn | Writing games with Python and PsychoPy">
<meta name="twitter:description" content="Let us program Guess the Number game again18 but reverse the roles. Now you will pick a number and the computer will guess. Think about the algorithm that a computer could use for this before...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Writing games with Python and PsychoPy</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="software.html"><span class="header-section-number">2</span> Software</a></li>
<li><a class="" href="programming-tips.html"><span class="header-section-number">3</span> Programming tips and tricks</a></li>
<li><a class="" href="python-basics.html"><span class="header-section-number">4</span> Python basics</a></li>
<li><a class="" href="guess-the-number-single-round.html"><span class="header-section-number">5</span> Guess the Number: a single round edition</a></li>
<li><a class="" href="guess-the-number-multi-round.html"><span class="header-section-number">6</span> Guess the Number: a multi round edition</a></li>
<li><a class="active" href="guess-the-number-ai.html"><span class="header-section-number">7</span> Guess the Number: AI takes a turn</a></li>
<li><a class="" href="psychopy-basics.html"><span class="header-section-number">8</span> Gettings started with PsychoPy</a></li>
<li><a class="" href="whack-a-mole.html"><span class="header-section-number">9</span> Whack-a-Mole</a></li>
<li><a class="" href="memory-game.html"><span class="header-section-number">10</span> Memory game</a></li>
<li><a class="" href="christmas-special.html"><span class="header-section-number">11</span> Christmas special</a></li>
<li><a class="" href="flappy-bird.html"><span class="header-section-number">12</span> Flappy Bird</a></li>
<li><a class="" href="seminar-02-06.html"><span class="header-section-number">13</span> Guitar Hero: staircase and iterator functions</a></li>
<li><a class="" href="the-snake.html"><span class="header-section-number">14</span> The Snake</a></li>
<li><a class="" href="moon-lander.html"><span class="header-section-number">15</span> Moon lander</a></li>
<li><a class="" href="space-invaders.html"><span class="header-section-number">16</span> Space invaders: mixins and duck typing</a></li>
<li><a class="" href="game-of-life-numpy.html"><span class="header-section-number">17</span> Game of life (NumPy)</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="guess-the-number-ai" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> Guess the Number: AI takes a turn<a class="anchor" aria-label="anchor" href="#guess-the-number-ai"><i class="fas fa-link"></i></a>
</h1>
<p>Let us program Guess the Number game again<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;This is the last time, I promise!&lt;/p&gt;"><sup>18</sup></a> but <em>reverse</em> the roles. Now <em>you</em> will pick a number and the computer will guess. Think about the algorithm that a computer could use for this before reading the next paragraph<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;You should imagine Dora the Explorer staring at you while you think.&lt;/p&gt;"><sup>19</sup></a>.</p>
<p>The optimal way to do this is to use the middle of the interval for a guess. This way you rule out <em>half</em> the numbers that are either greater or smaller than your guess (or you guess the number correctly, of course). So, if you know that the number is between 1 and 10, you should split things in the middle, that is picking 5 or 6, as you cannot pick 5.5 (we assume that you can use only integers). If your opponent tells that their number is greater than your pick, you know that it must be somewhere between your guess and the original upper limit, e.g., between 5 and 10. Conversely, if the opponent responds “lower”, the number is the lower limit and you guess, e.g., between 1 and 5. On your next attempt, you pick split the interval again until you either guess the number correctly or end up with an interval that contains just one number. Then you do not need to guess anymore.</p>
<p>To implement this program, you will need to learn about functions, how to document them like a pro, and how to use your own libraries. Grab the <a href="notebooks/Guess%20the%20number%20-%20AI.ipynb">exercise notebook</a> before we start!</p>
<div id="chapter-concepts." class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Chapter concepts.<a class="anchor" aria-label="anchor" href="#chapter-concepts."><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Writing you own <a href="guess-the-number-ai.html#function">functions</a>.</li>
<li>Understanding variable <a href="guess-the-number-ai.html#scopes-for-immutable-values">scopes</a>.</li>
<li>Adopting <a href="guess-the-number-ai.html#numpy-docstring">standard ways</a> to document your code.</li>
<li>Using your <a href="guess-the-number-ai.html#using-you-own-libraries">own libraries</a>.</li>
</ul>
</div>
<div id="guess-the-number-players-response" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Player’s response<a class="anchor" aria-label="anchor" href="#guess-the-number-players-response"><i class="fas fa-link"></i></a>
</h2>
<p>Let us warm up by writing a code that will allow a player to respond to computer’s guess. Recall that there are just three options: your number is greater, smaller, or equal to a computer’s guess. I would suggest using, respectively, <code>&gt;</code>, <code>&lt;</code>, and <code>=</code> symbols to communicate this. You need to write the code that will prompt a player for their response until they enter one of these symbols. I.e., the prompt should be repeatedly repeated if they enter anything else. Thus, you definitely need to use the <a href="https://docs.python.org/3/library/functions.html#input">input([prompt])</a> and a <a href="guess-the-number-multi-round.html#while-loop">while</a> loop. Think of a useful and informative prompt message for this. Test that it works. Using breakpoints might be very useful here.</p>
<div class="rmdnote program">
<p>Put your code into <code>code01.py</code>.</p>
</div>
</div>
<div id="function" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> Functions<a class="anchor" aria-label="anchor" href="#function"><i class="fas fa-link"></i></a>
</h2>
<p>You already now how to use function, now it is turn for you to learn more about why you should care. The purpose of a function is to isolate certain code that performs a single computation making it testable and reusable. Let us go through the first sentence bit by bit using examples.</p>
<div id="function-performs-a-single-computation" class="section level3" number="7.3.1">
<h3>
<span class="header-section-number">7.3.1</span> Function performs a single computation<a class="anchor" aria-label="anchor" href="#function-performs-a-single-computation"><i class="fas fa-link"></i></a>
</h3>
<p>I already <a href="programming-tips.html#programming-tips">told you</a> that reading code is easy because every action has to be spelled-out for computers in a simple and clear way. However, <em>a lot</em> of simple things can be very overwhelming and confusing. Think about the final code for the previous seminar: we had two loops with conditional statements nested inside. Add a few more of those and you have so many branches to trace, you never be quite sure what will happen. This is because our cognition and working memory, which you use to trace all branches, are limited to just about four items<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;The official magic number is &lt;a href="https://en.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two"&gt;7±2&lt;/a&gt; but reading the original paper tells you that this is more like four for most of us&lt;/p&gt;'><sup>20</sup></a>.</p>
<p>Thus, a function should perform <em>one</em> computation / action that is conceptually clear and those purpose should be understood directly from its name or, at most, from a single sentence that describes it<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;This is similar to scientific writing, where a single paragraph conveys a single idea. For me, it helps to first write the idea of the paragraph in a single sentence before writing the paragraph itself. If one sentence is not enough, I need to split the text into more paragraphs.&lt;/p&gt;"><sup>21</sup></a>. The name of a function should typically be a <em>verb</em> because function is about doing an action. If you need more than once sentence to explain what function does, you should consider splitting the code further. This does not mean that entire description / documentation must fit into a single sentence. The full description can be lengthy, particularly if underlying computation is complex and there are many parameters to consider. However, these are optional details that tell the reader <em>how</em> the function is doing its job or how the its behavior can be modified. Still, they should be able to understand <em>what</em> the job is just from the name or from a single sentence. I am repeating myself and stressing this so much because conceptually simple single-job functions are a foundation of a clear robust reusable code. And future-you will be very grateful that it has to work with easy-to-understand isolated reliable code you wrote.</p>
</div>
<div id="function-isolates-code-from-the-rest-of-the-program" class="section level3" number="7.3.2">
<h3>
<span class="header-section-number">7.3.2</span> Function isolates code from the rest of the program<a class="anchor" aria-label="anchor" href="#function-isolates-code-from-the-rest-of-the-program"><i class="fas fa-link"></i></a>
</h3>
<p>Isolation means that your code runs in a separate scope where the only things that exist are function arguments (limited number of values you pass to it from outside with fixed meaning) and local variables that you define inside the function. You have no access to variables defined in the outside script<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;This is not strictly true but that will concern us only once we get to so-called “mutable” objects like lists or dictionaries.&lt;/p&gt;"><sup>22</sup></a> or to variables defined inside of other functions. Conversely, neither global script nor other functions have access to variables and values that you use inside. This means that you only need to study the code <em>inside</em> the function to understand how it works. Accordingly, when you write the code it should be <em>independent</em> of any global context the function can be used in. The isolation is both practical (no run-time access to variables from outside means fewer chance that things go terribly wrong) and conceptual (no further context is required to understand the code).</p>
</div>
<div id="function-makes-code-easier-to-test" class="section level3" number="7.3.3">
<h3>
<span class="header-section-number">7.3.3</span> Function makes code easier to test<a class="anchor" aria-label="anchor" href="#function-makes-code-easier-to-test"><i class="fas fa-link"></i></a>
</h3>
<p>You can build even moderately complex programs only if you can be certain what individual chunks of code are doing under every possible condition. Do they produce the correct results? Do the fail clearly and raise a correct error, if the inputs are wrong? Do they use defaults when required? However, testing all chunks together means running extreme number of runs as you need to test all possible combinations of conditions for one chunk given all possible conditions for other chunk, etc. Functions make your life much easier. Because they have a single point of entry, fixed number of parameters, a single return value, and are isolated (see above), you can test them one at a time independent of other functions of the rest of the code. This is called <em>unit testing</em> and it is heavy use of <a href="https://docs.python.org/3/library/unittest.html">automatic unit testing</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;it is normal to have more code devoted to testing than to the actual program&lt;/p&gt;"><sup>23</sup></a> that ensures reliable code for absolute majority of programs and apps that you use<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;You still need tests for the integrated system but testing individual functions is a clear prerequisite.&lt;/p&gt;"><sup>24</sup></a>.</p>
</div>
<div id="function-makes-code-reusable" class="section level3" number="7.3.4">
<h3>
<span class="header-section-number">7.3.4</span> Function makes code reusable<a class="anchor" aria-label="anchor" href="#function-makes-code-reusable"><i class="fas fa-link"></i></a>
</h3>
<p>Sometimes, this is given as a primary reason to use functions. Turning code into a function means that you can call the function instead of copy-pasting the code. The latter approach is a terrible idea as it means that you have to maintain the same code at many places and you might not be even sure in just how many. This is a problem even if a code is extremely simple. Here, we define a <em>standard</em> way to compute an initial by taking the first symbol from a string (you will learn about indexing and slicing in details later). The code is as simple as it gets.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="guess-the-number-ai.html#cb43-1" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb43-2"><a href="guess-the-number-ai.html#cb43-2" aria-hidden="true" tabindex="-1"></a>initial <span class="op">=</span> <span class="st">"test"</span>[<span class="dv">0</span>]</span>
<span id="cb43-3"><a href="guess-the-number-ai.html#cb43-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb43-4"><a href="guess-the-number-ai.html#cb43-4" aria-hidden="true" tabindex="-1"></a>initial_for_file <span class="op">=</span> filename[<span class="dv">0</span>]</span>
<span id="cb43-5"><a href="guess-the-number-ai.html#cb43-5" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb43-6"><a href="guess-the-number-ai.html#cb43-6" aria-hidden="true" tabindex="-1"></a>initial_for_website <span class="op">=</span> first_name[<span class="dv">0</span>]</span>
<span id="cb43-7"><a href="guess-the-number-ai.html#cb43-7" aria-hidden="true" tabindex="-1"></a>...</span></code></pre></div>
<p>Imagine that you decided to change it and use first <em>two</em> symbols. Again, the computation is not complicated, use just replace <code>[0]</code> with <code>[:2]</code>. But you have to do it for <em>all</em> the code that does this computation. And you cannot use <em>Replace All</em> option because sometimes you might use the first element for some other purposes. And when you edit the code, you are bound to forget about some locations (I do it all the time) making things even less consistent and more confusing. Turning code into a function means you need to modify and test at just <em>one</em> location. Here is the original code implemented via a function.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="guess-the-number-ai.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_initial(full_string):</span>
<span id="cb44-2"><a href="guess-the-number-ai.html#cb44-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Generates an initial using first symbol.</span></span>
<span id="cb44-3"><a href="guess-the-number-ai.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb44-4"><a href="guess-the-number-ai.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb44-5"><a href="guess-the-number-ai.html#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb44-6"><a href="guess-the-number-ai.html#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co">    full_string : str</span></span>
<span id="cb44-7"><a href="guess-the-number-ai.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb44-8"><a href="guess-the-number-ai.html#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb44-9"><a href="guess-the-number-ai.html#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb44-10"><a href="guess-the-number-ai.html#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co">    str : single symbol</span></span>
<span id="cb44-11"><a href="guess-the-number-ai.html#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb44-12"><a href="guess-the-number-ai.html#cb44-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> full_string[<span class="dv">0</span>]</span>
<span id="cb44-13"><a href="guess-the-number-ai.html#cb44-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-14"><a href="guess-the-number-ai.html#cb44-14" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb44-15"><a href="guess-the-number-ai.html#cb44-15" aria-hidden="true" tabindex="-1"></a>initial <span class="op">=</span> generate_initial(<span class="st">"test"</span>)</span>
<span id="cb44-16"><a href="guess-the-number-ai.html#cb44-16" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb44-17"><a href="guess-the-number-ai.html#cb44-17" aria-hidden="true" tabindex="-1"></a>initial_for_file <span class="op">=</span> generate_initial(filename)</span>
<span id="cb44-18"><a href="guess-the-number-ai.html#cb44-18" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb44-19"><a href="guess-the-number-ai.html#cb44-19" aria-hidden="true" tabindex="-1"></a>initial_for_website <span class="op">=</span> generate_initial(first_name)</span>
<span id="cb44-20"><a href="guess-the-number-ai.html#cb44-20" aria-hidden="true" tabindex="-1"></a>...</span></code></pre></div>
<p>and here is the “alternative” initial computation. Note that the code that uses the function <em>stays the same</em></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="guess-the-number-ai.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_initial(full_string):</span>
<span id="cb45-2"><a href="guess-the-number-ai.html#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Generates an initial using first TWO symbols.</span></span>
<span id="cb45-3"><a href="guess-the-number-ai.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb45-4"><a href="guess-the-number-ai.html#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb45-5"><a href="guess-the-number-ai.html#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb45-6"><a href="guess-the-number-ai.html#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co">    full_string : str</span></span>
<span id="cb45-7"><a href="guess-the-number-ai.html#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb45-8"><a href="guess-the-number-ai.html#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb45-9"><a href="guess-the-number-ai.html#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb45-10"><a href="guess-the-number-ai.html#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="co">    str : two symbols long</span></span>
<span id="cb45-11"><a href="guess-the-number-ai.html#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb45-12"><a href="guess-the-number-ai.html#cb45-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> full_string[:<span class="dv">2</span>]</span>
<span id="cb45-13"><a href="guess-the-number-ai.html#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="guess-the-number-ai.html#cb45-14" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb45-15"><a href="guess-the-number-ai.html#cb45-15" aria-hidden="true" tabindex="-1"></a>initial <span class="op">=</span> generate_initial(<span class="st">"test"</span>)</span>
<span id="cb45-16"><a href="guess-the-number-ai.html#cb45-16" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb45-17"><a href="guess-the-number-ai.html#cb45-17" aria-hidden="true" tabindex="-1"></a>initial_for_file <span class="op">=</span> generate_initial(filename)</span>
<span id="cb45-18"><a href="guess-the-number-ai.html#cb45-18" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb45-19"><a href="guess-the-number-ai.html#cb45-19" aria-hidden="true" tabindex="-1"></a>initial_for_website <span class="op">=</span> generate_initial(first_name)</span>
<span id="cb45-20"><a href="guess-the-number-ai.html#cb45-20" aria-hidden="true" tabindex="-1"></a>...</span></code></pre></div>
<p>Thus, turning the code into function is particularly useful when the reused code is complex but it pays off even if computation is as simple and trivial as in example above. With a function you have a single code chunk to worry about and you can be sure that the same computation is performed whenever you call the function (and that these are not several copies of the code that might or might not be identical).</p>
<p>Note that I put reusable code as the last and the least reason to use functions. This is because the other three reasons are far more important. Having a conceptually clear isolated and testable code is advantageous even if you call this function only once. It still makes code easier to understand and to test and helps you to reduce its complexity by replacing chunks of code with its meaning. Take a look at the example below. The first code takes the first symbol but this action (taking the first symbol) does not <em>mean</em> anything by itself, it is just a mechanical computation. It is only the original context <code>initial_for_file = filename[0]</code> or additional comments that give it its meaning. In contrast, calling a function called <em>compute_initial</em> tells you what is happening, as it disambiguates the purpose. I suspect that future-you is very pro-disambiguation and anti-confusion.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="guess-the-number-ai.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> filename[<span class="dv">0</span>] <span class="op">==</span> <span class="st">"A"</span>:</span>
<span id="cb46-2"><a href="guess-the-number-ai.html#cb46-2" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb46-3"><a href="guess-the-number-ai.html#cb46-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb46-4"><a href="guess-the-number-ai.html#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> compute_initial(filename) <span class="op">==</span> <span class="st">"A"</span>:</span>
<span id="cb46-5"><a href="guess-the-number-ai.html#cb46-5" aria-hidden="true" tabindex="-1"></a>    ...</span></code></pre></div>
</div>
</div>
<div id="functions-in-python" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> Functions in Python<a class="anchor" aria-label="anchor" href="#functions-in-python"><i class="fas fa-link"></i></a>
</h2>
<div id="defining-a-function-in-python" class="section level3" number="7.4.1">
<h3>
<span class="header-section-number">7.4.1</span> Defining a function in Python<a class="anchor" aria-label="anchor" href="#defining-a-function-in-python"><i class="fas fa-link"></i></a>
</h3>
<p>A function in Python looks like this (note the indentation and <code>:</code> at the end of the first line)</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="guess-the-number-ai.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="op">&lt;</span>function name<span class="op">&gt;</span>(param1, param2, ...):</span>
<span id="cb47-2"><a href="guess-the-number-ai.html#cb47-2" aria-hidden="true" tabindex="-1"></a>    some internal computation</span>
<span id="cb47-3"><a href="guess-the-number-ai.html#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> somecondition:</span>
<span id="cb47-4"><a href="guess-the-number-ai.html#cb47-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> some value</span>
<span id="cb47-5"><a href="guess-the-number-ai.html#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> some other value</span></code></pre></div>
<p>The parameters are optional, so is the return value. Thus the minimal function would be</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="guess-the-number-ai.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> minimal_function():</span>
<span id="cb48-2"><a href="guess-the-number-ai.html#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span> <span class="co"># pass means "do nothing"</span></span></code></pre></div>
<p>You must define your function (once!) before calling it (one or more times). Thus, you should create functions <em>before</em> the code that uses it.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="guess-the-number-ai.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> do_something():</span>
<span id="cb49-2"><a href="guess-the-number-ai.html#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb49-3"><a href="guess-the-number-ai.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">    This is a function called "do_something". It actually does nothing.</span></span>
<span id="cb49-4"><a href="guess-the-number-ai.html#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co">    It requires no input and returns no value.</span></span>
<span id="cb49-5"><a href="guess-the-number-ai.html#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb49-6"><a href="guess-the-number-ai.html#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span></span>
<span id="cb49-7"><a href="guess-the-number-ai.html#cb49-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb49-8"><a href="guess-the-number-ai.html#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> another_function():</span>
<span id="cb49-9"><a href="guess-the-number-ai.html#cb49-9" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb49-10"><a href="guess-the-number-ai.html#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># We call it in another function.</span></span>
<span id="cb49-11"><a href="guess-the-number-ai.html#cb49-11" aria-hidden="true" tabindex="-1"></a>    do_something()</span>
<span id="cb49-12"><a href="guess-the-number-ai.html#cb49-12" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb49-13"><a href="guess-the-number-ai.html#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="guess-the-number-ai.html#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a function call (we use this function)</span></span>
<span id="cb49-15"><a href="guess-the-number-ai.html#cb49-15" aria-hidden="true" tabindex="-1"></a>do_something()</span>
<span id="cb49-16"><a href="guess-the-number-ai.html#cb49-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-17"><a href="guess-the-number-ai.html#cb49-17" aria-hidden="true" tabindex="-1"></a><span class="co"># And we use it again!</span></span>
<span id="cb49-18"><a href="guess-the-number-ai.html#cb49-18" aria-hidden="true" tabindex="-1"></a>do_something()</span>
<span id="cb49-19"><a href="guess-the-number-ai.html#cb49-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-20"><a href="guess-the-number-ai.html#cb49-20" aria-hidden="true" tabindex="-1"></a><span class="co"># And again but via another_function call</span></span>
<span id="cb49-21"><a href="guess-the-number-ai.html#cb49-21" aria-hidden="true" tabindex="-1"></a>another_function()</span></code></pre></div>
<div class="rmdnote practice">
<p>Do exercise #1.</p>
</div>
<p>You must also keep in mind that redefining a function (or defining a technically different function that has the same name) overwrites the original definition, so that only the <em>latest</em> version of it is retained and can be used.</p>
<div class="rmdnote practice">
<p>Do exercise #2.</p>
</div>
<p>Although example in the exercise makes the problem easy to spot, in a large code that spans multiple files and uses various libraries, solving the same problem may not be so straightforward!</p>
</div>
<div id="function-arguments" class="section level3" number="7.4.2">
<h3>
<span class="header-section-number">7.4.2</span> Function arguments<a class="anchor" aria-label="anchor" href="#function-arguments"><i class="fas fa-link"></i></a>
</h3>
<p>Some function may not need arguments (also called parameters), as they perform a fixed action:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="guess-the-number-ai.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ping():</span>
<span id="cb50-2"><a href="guess-the-number-ai.html#cb50-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb50-3"><a href="guess-the-number-ai.html#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Machine that goes "ping!"</span></span>
<span id="cb50-4"><a href="guess-the-number-ai.html#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb50-5"><a href="guess-the-number-ai.html#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"ping!"</span>)</span></code></pre></div>
<p>However, you may need to pass information to the function via arguments in order to influence how the function performs its action. In Python, you simply list arguments within the round brackets after the function name (there are more bells and whistles but we will keep it simple for now). For example, we could write a function that computes and prints person’s age given two parameters 1) their birth year, 2) current year:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="guess-the-number-ai.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> print_age(birth_year, current_year):</span>
<span id="cb51-2"><a href="guess-the-number-ai.html#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb51-3"><a href="guess-the-number-ai.html#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Prints age given birth year and current year.</span></span>
<span id="cb51-4"><a href="guess-the-number-ai.html#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb51-5"><a href="guess-the-number-ai.html#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb51-6"><a href="guess-the-number-ai.html#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb51-7"><a href="guess-the-number-ai.html#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co">    birth_year : int</span></span>
<span id="cb51-8"><a href="guess-the-number-ai.html#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co">    current_year : int</span></span>
<span id="cb51-9"><a href="guess-the-number-ai.html#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb51-10"><a href="guess-the-number-ai.html#cb51-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(current_year <span class="op">-</span> birth_year)</span></code></pre></div>
<p>It is a <strong>very good idea</strong> to give meaningful names to functions, parameters, and variables. The following code will produce exactly the same result but understanding <em>why</em> and <em>what for</em> it is doing what it is doing would be much harder (so <strong>always</strong> use meaningful names!):</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="guess-the-number-ai.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> x(a, b):</span>
<span id="cb52-2"><a href="guess-the-number-ai.html#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(b <span class="op">-</span> a)</span></code></pre></div>
<p>When calling a function, you must pass the correct number of parameters and pass them in a <em>correct order</em>, another reason for a function arguments to have meaningful names<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Again, this not strictly true but you will have to wait until you learn about named parameters and default values&lt;/p&gt;"><sup>25</sup></a>.</p>
<div class="rmdnote practice">
<p>Do exercise #3.</p>
</div>
<p>When you call a function, values you <em>pass</em> to the function are assigned to the parameters and they are used as <em>local</em> variables (more on <em>local</em> bit later). However, it does not matter <em>how</em> you came up with this values, whether they were in a variable, hard-coded, or returned by another function. If you are using numeric, logical, or string values (<em>immutable</em> types), you can assume that any link to the original variable or function that produced it is gone (we’ll deal with <em>mutable</em> types, like lists, later). Thus, when writing a function or reading its code, you just assume that it has been set to some value during the call and you can ignore the context in which this call was made</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="guess-the-number-ai.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># hardcoded</span></span>
<span id="cb53-2"><a href="guess-the-number-ai.html#cb53-2" aria-hidden="true" tabindex="-1"></a>print_age(<span class="dv">1976</span>, <span class="dv">2020</span>)</span>
<span id="cb53-3"><a href="guess-the-number-ai.html#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="guess-the-number-ai.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># using values from variables</span></span>
<span id="cb53-5"><a href="guess-the-number-ai.html#cb53-5" aria-hidden="true" tabindex="-1"></a>i_was_born <span class="op">=</span> <span class="dv">1976</span></span>
<span id="cb53-6"><a href="guess-the-number-ai.html#cb53-6" aria-hidden="true" tabindex="-1"></a>today_is <span class="op">=</span> <span class="dv">2020</span></span>
<span id="cb53-7"><a href="guess-the-number-ai.html#cb53-7" aria-hidden="true" tabindex="-1"></a>print_age(i_was_born, today_is)</span>
<span id="cb53-8"><a href="guess-the-number-ai.html#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="guess-the-number-ai.html#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="co"># using value from a function</span></span>
<span id="cb53-10"><a href="guess-the-number-ai.html#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_current_year():</span>
<span id="cb53-11"><a href="guess-the-number-ai.html#cb53-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">2020</span></span>
<span id="cb53-12"><a href="guess-the-number-ai.html#cb53-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-13"><a href="guess-the-number-ai.html#cb53-13" aria-hidden="true" tabindex="-1"></a>print_age(<span class="dv">1976</span>, get_current_year())</span></code></pre></div>
</div>
<div id="functions-returned-value-output" class="section level3" number="7.4.3">
<h3>
<span class="header-section-number">7.4.3</span> Functions’ returned value (output)<a class="anchor" aria-label="anchor" href="#functions-returned-value-output"><i class="fas fa-link"></i></a>
</h3>
<p>Your function may perform an action without returning any value to the caller (this is what out <code>print_age</code> function was doing). However, you may need to return the value instead. For example, to make things more general, we might want write a new function called <code>compute_age</code> that returns the age instead of printing it (we can always print it ourselves).</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="guess-the-number-ai.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> compute_age(birth_year, current_year):</span>
<span id="cb54-2"><a href="guess-the-number-ai.html#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb54-3"><a href="guess-the-number-ai.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Computes age given birth year and current year.</span></span>
<span id="cb54-4"><a href="guess-the-number-ai.html#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="guess-the-number-ai.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb54-6"><a href="guess-the-number-ai.html#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb54-7"><a href="guess-the-number-ai.html#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co">    birth_year : int</span></span>
<span id="cb54-8"><a href="guess-the-number-ai.html#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="co">    current_year : int</span></span>
<span id="cb54-9"><a href="guess-the-number-ai.html#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb54-10"><a href="guess-the-number-ai.html#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb54-11"><a href="guess-the-number-ai.html#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb54-12"><a href="guess-the-number-ai.html#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="co">    int : age</span></span>
<span id="cb54-13"><a href="guess-the-number-ai.html#cb54-13" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb54-14"><a href="guess-the-number-ai.html#cb54-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> current_year <span class="op">-</span> birth_year</span></code></pre></div>
<p>Note that even if a function returns the value, it is retained only if it is actually used (stored in a variable, used as a value, etc.). Thus, just calling it will not by itself store the returned value anywhere!</p>
<div class="rmdnote practice">
<p>Do exercise #4.</p>
</div>
</div>
<div id="scopes-for-immutable-values" class="section level3" number="7.4.4">
<h3>
<span class="header-section-number">7.4.4</span> Scopes (for immutable values)<a class="anchor" aria-label="anchor" href="#scopes-for-immutable-values"><i class="fas fa-link"></i></a>
</h3>
<p>As we have discussed above, turning code into a function <em>isolates</em> it, so makes it run in it own <em>scope</em>. In Python, each variable exists in the <em>scope</em> it has been defined in. If it was defined in the <em>global</em> script, it exists in that <em>global</em> scope as a <em>global</em> variable. However, it is not accessible (at least not without special effort via a <code>global</code> operator) from within a function. Conversely, function’s parameters and any variables defined <em>inside a function</em>, exists and are accessible only <strong>inside that function</strong>. It is fully invisible for the outside world and cannot be accessed from a global script or from another function. Conversely, any changes you make to the function parameter or local variable have no effect on the outside world<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Again, almost, as &lt;em&gt;mutable&lt;/em&gt; objects like lists are more complicated, more on that later&lt;/p&gt;"><sup>26</sup></a>.</p>
<p>The purpose of scopes is to isolate individual code segments from each other, so that modifying variables within one scope has no effect on all other scopes. This means that when writing or debugging the code, you do not need to worry about code in other scopes and concentrate only on the code you working on. Because scopes are isolated, they may have <em>identically named variables</em> that, however, have no relationship to each other as they exists in their own parallel universes. Thus, if you want to know which value a variable has, you must look only within the scope and ignore all other scopes (even if the names match!).</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="guess-the-number-ai.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this is variable `x` in the global scope</span></span>
<span id="cb55-2"><a href="guess-the-number-ai.html#cb55-2" aria-hidden="true" tabindex="-1"></a>x  <span class="op">=</span> <span class="dv">5</span> </span>
<span id="cb55-3"><a href="guess-the-number-ai.html#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="guess-the-number-ai.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f1():</span>
<span id="cb55-5"><a href="guess-the-number-ai.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is variable `x` in the scope of function f1</span></span>
<span id="cb55-6"><a href="guess-the-number-ai.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># It has the same name as the global variable but</span></span>
<span id="cb55-7"><a href="guess-the-number-ai.html#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># has no relation to it: many people are called Sasha </span></span>
<span id="cb55-8"><a href="guess-the-number-ai.html#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># but they are still different people. Whatever you</span></span>
<span id="cb55-9"><a href="guess-the-number-ai.html#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># happens to `x` in f1, stays in f1's scope.</span></span>
<span id="cb55-10"><a href="guess-the-number-ai.html#cb55-10" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb55-11"><a href="guess-the-number-ai.html#cb55-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-12"><a href="guess-the-number-ai.html#cb55-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-13"><a href="guess-the-number-ai.html#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f2(x):</span>
<span id="cb55-14"><a href="guess-the-number-ai.html#cb55-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is parameter `x` in the scope of function f2.</span></span>
<span id="cb55-15"><a href="guess-the-number-ai.html#cb55-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Again, no relation to other global or local variables.</span></span>
<span id="cb55-16"><a href="guess-the-number-ai.html#cb55-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># It is a completely separate object, it just happens to </span></span>
<span id="cb55-17"><a href="guess-the-number-ai.html#cb55-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># have the same name (again, just namesakes)</span></span>
<span id="cb55-18"><a href="guess-the-number-ai.html#cb55-18" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(x)</span></code></pre></div>
<div class="rmdnote practice">
<p>Do exercise #5.</p>
</div>
</div>
</div>
<div id="players-response-as-a-function" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> Player’s response as a function<a class="anchor" aria-label="anchor" href="#players-response-as-a-function"><i class="fas fa-link"></i></a>
</h2>
<p>Let us put all that theory about functions into practice. Use the code that you created to acquire <a href="guess-the-number-ai.html#guess-the-number-players-response">player’s response</a> and turn it into function. I suggest that you call it <code>input_response</code> (or something along these lines). Test that the code works by calling this function for the main script.</p>
<div class="rmdnote program">
<p>Put your code into <code>code02.py</code>.</p>
</div>
</div>
<div id="debugging-a-function" class="section level2" number="7.6">
<h2>
<span class="header-section-number">7.6</span> Debugging a function<a class="anchor" aria-label="anchor" href="#debugging-a-function"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we have your first function, you can make sense of three step over/in/out buttons that the debugger offers you. Copy-paste the following code in a separate file (call it <code>test01.py</code>, for example).</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="guess-the-number-ai.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f1(x, y):</span>
<span id="cb56-2"><a href="guess-the-number-ai.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">/</span> y</span>
<span id="cb56-3"><a href="guess-the-number-ai.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-4"><a href="guess-the-number-ai.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f2(x, y):</span>
<span id="cb56-5"><a href="guess-the-number-ai.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  x <span class="op">=</span> x <span class="op">+</span> <span class="dv">5</span></span>
<span id="cb56-6"><a href="guess-the-number-ai.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  y <span class="op">=</span> y <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb56-7"><a href="guess-the-number-ai.html#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> f1(x, y)</span>
<span id="cb56-8"><a href="guess-the-number-ai.html#cb56-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-9"><a href="guess-the-number-ai.html#cb56-9" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> f2(<span class="dv">4</span>, <span class="dv">2</span>)</span>
<span id="cb56-10"><a href="guess-the-number-ai.html#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(z)</span></code></pre></div>
<p>First, put a break point on the line in the main script that calls function <code>f2()</code>. Run the debugger via <strong>F5</strong> and the program will pause at that line. If you now press <strong>F10</strong> (step over), the program will go to the next line <code>print(z)</code>. However, if you are to press <strong>F11</strong> (step into) instead, the program will <em>step into</em> the function and go to <code>x = x + 5</code> line. When inside the function, you have the same two choices we just looked at but also, you can press <strong>Shift+F11</strong> to step out of the function. Here, the program will run all the code until you reach the next line <em>outside</em> of the function (you should end up at <code>print(z)</code> again). Experiment with putting breakpoints at various lines and stepping over/in/out to get a hang of these useful debugging tools.</p>
<p>Now, put the breakpoint inside of <code>f1()</code> function and run the code via <strong>F5</strong>. Take a look at the left pane, you will see a <em>Call Stack</em> tab. While yellow highlighted line in the editor shows you where you currently are (should be inside the <code>f1()</code> function), the <em>Call Stack</em> shows you how did you get where. In this case it should show:</p>
<div class="inline-table"><table class="table table-sm"><tbody>
<tr class="odd">
<td align="left">f1</td>
<td align="left">test01.py</td>
<td>2:1</td>
</tr>
<tr class="even">
<td align="left">f2</td>
<td align="left">test01.py</td>
<td>7:1</td>
</tr>
<tr class="odd">
<td align="left">&lt;module&gt;</td>
<td align="left">test01.py</td>
<td>9:1</td>
</tr>
</tbody></table></div>
<p>The calls are stacked from bottom to top, so this means that a function was called in the main module in line 9, you ended up in function <code>f2</code> in line 7, and then in function <code>f1</code> and in line 2. Experiment with stepping in and out of functions while keeping an eye on this. You might not need this information frequently but could be useful in out later projects with multiple nested function calls.</p>
</div>
<div id="numpy-docstring" class="section level2" number="7.7">
<h2>
<span class="header-section-number">7.7</span> Documenting your function<a class="anchor" aria-label="anchor" href="#numpy-docstring"><i class="fas fa-link"></i></a>
</h2>
<p>Writing a function is only half the job. You need to document it! <a href="programming-tips.html#programming-tips">Remember</a>, this is a good habit that makes your code easy to use and reuse. There are different ways to document the code but we will use <a href="https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard">NumPy docstring convention</a>. Here is an example of such documented function</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="guess-the-number-ai.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_initial(full_string):</span>
<span id="cb57-2"><a href="guess-the-number-ai.html#cb57-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Generates an initial using first symbol.</span></span>
<span id="cb57-3"><a href="guess-the-number-ai.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb57-4"><a href="guess-the-number-ai.html#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb57-5"><a href="guess-the-number-ai.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb57-6"><a href="guess-the-number-ai.html#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co">    full_string : str</span></span>
<span id="cb57-7"><a href="guess-the-number-ai.html#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb57-8"><a href="guess-the-number-ai.html#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns</span></span>
<span id="cb57-9"><a href="guess-the-number-ai.html#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co">    ----------</span></span>
<span id="cb57-10"><a href="guess-the-number-ai.html#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co">    str : single symbol</span></span>
<span id="cb57-11"><a href="guess-the-number-ai.html#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb57-12"><a href="guess-the-number-ai.html#cb57-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> full_string[<span class="dv">0</span>]</span></code></pre></div>
<p>Take the look at the <a href="https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard">manual</a> and document the <code>input_response</code> function. You will not need the <code>Parameters</code> section as it currently accepts no inputs.</p>
<div class="rmdnote program">
<p>Update your code in <code>code02.py</code>.</p>
</div>
</div>
<div id="using-prompt" class="section level2" number="7.8">
<h2>
<span class="header-section-number">7.8</span> Using prompt<a class="anchor" aria-label="anchor" href="#using-prompt"><i class="fas fa-link"></i></a>
</h2>
<p>In the future, we will be asking about a specific number that is a current guess by the computer, thus we cannot use a fixed prompt message. Modify the <code>input_response</code> function by adding a <code>guess</code> parameter. Then, modify the prompt that you used for the <a href="https://docs.python.org/3/library/functions.html#input">input()</a> to include that number. Update functions’ documentation. Test it by calling with different values for the <code>guess</code> parameter.</p>
<div class="rmdnote program">
<p>Put your code into <code>code03.py</code>.</p>
</div>
</div>
<div id="splitting-interval-in-the-middle" class="section level2" number="7.9">
<h2>
<span class="header-section-number">7.9</span> Splitting interval in the middle<a class="anchor" aria-label="anchor" href="#splitting-interval-in-the-middle"><i class="fas fa-link"></i></a>
</h2>
<p>Let us practice writing functions a bit more. Recall that the computer should use the middle of the interval as a guess. Create a function (let us call it <code>split_interval()</code> or something like that) that takes two parameters — <code>lower_limit</code> and <code>upper_limit</code> — and returns <em>an integer</em> that is closest to the middle of the interval. The only tricky part is how you convert a potentially float number (e.g, when you are trying to find it for the interval 1..10) to an integer. You can use function <a href="https://docs.python.org/3/library/functions.html#int">int()</a> for that. However, read the documentation carefully, as it <em>does not</em> perform a proper rounding (what does it do? read the docs!). Thus, you should <a href="https://docs.python.org/3/library/functions.html#round">round()</a> the number to the closest integer before converting it.</p>
<p>Write a function, document it, and test it by checking that numbers are correct.</p>
<div class="rmdnote program">
<p>Put you <code>split_interval()</code> function and the testing code into <code>code04.py</code>.</p>
</div>
</div>
<div id="single-round" class="section level2" number="7.10">
<h2>
<span class="header-section-number">7.10</span> Single round<a class="anchor" aria-label="anchor" href="#single-round"><i class="fas fa-link"></i></a>
</h2>
<p>You have both functions that you need, so let us write the code to initialize the game and play a single round. The initialization boils down to creating two variables that correspond to the lower and upper limits of the game range (we used 1 to 10 so far, but you can always change that). Next, the computer should generate a guess (you have your <code>split_interval()</code> function for that) and ask the player about the guess (that is the <code>input_response()</code> function). Once you have the response (stored in a separate variable, think of the name yourself), you can update your upper or lower limit using an <a href="guess-the-number-single-round.html#if-statement">if..elif..else</a> statement. Print out a joyous message, if computer’s guess was correct.</p>
<div class="rmdnote program">
<p>Put both functions and the script code into <code>code05.py</code>.</p>
</div>
</div>
<div id="multiple-rounds" class="section level2" number="7.11">
<h2>
<span class="header-section-number">7.11</span> Multiple rounds<a class="anchor" aria-label="anchor" href="#multiple-rounds"><i class="fas fa-link"></i></a>
</h2>
<p>Extend the game, so that the computer keeps guessing until it finally wins. You already know how to use the <a href="guess-the-number-multi-round.html#while-loop">while</a> loop, just think how you can use participant’s response as a loop condition variable. Also, think about the initial value of that variable and how to use it so you call <code>input_response()</code> only at one location.</p>
<div class="rmdnote program">
<p>Put the updated code into <code>code06.py</code>.</p>
</div>
</div>
<div id="playing-again" class="section level2" number="7.12">
<h2>
<span class="header-section-number">7.12</span> Playing again<a class="anchor" aria-label="anchor" href="#playing-again"><i class="fas fa-link"></i></a>
</h2>
<p>Modify the code, so that you can play this game several times. You already know how to do this and the only thing you need to consider is where exactly should you perform initialization before each round. As you already implemented that for the last game, you might be tempted to look how you did it or, even, copy-paste the code. However, I would recommend writing it from scratch. Remember, your aim is not to write a program but to learn how to do this and, therefore, the journey is more important than a destination.</p>
<div class="rmdnote program">
<p>Put the updated code into <code>code07.py</code>.</p>
</div>
</div>
<div id="best-score-1" class="section level2" number="7.13">
<h2>
<span class="header-section-number">7.13</span> Best score<a class="anchor" aria-label="anchor" href="#best-score-1"><i class="fas fa-link"></i></a>
</h2>
<p>Add the code to count the number of attempts that the computer required in each round and
report the best score (fewest number of attempts) after the game is over. You will need one variable to count the number of attempts and one to keep the best score. Again, try writing it without looking at your previous game.</p>
<div class="rmdnote program">
<p>Put the updated code into <code>code08.py</code>.</p>
</div>
</div>
<div id="using-you-own-libraries" class="section level2" number="7.14">
<h2>
<span class="header-section-number">7.14</span> Using you own libraries<a class="anchor" aria-label="anchor" href="#using-you-own-libraries"><i class="fas fa-link"></i></a>
</h2>
<p>You already know how to <a href="guess-the-number-single-round.html#using-libraries">use existing libraries</a> but you can also create and use your own. Take the two functions that you developed and put them into a new file called <code>utils.py</code> (do not forget to put a multiline comment at the top of the file to remind you what is inside!) . Copy the remaining code (the global script) into <code>code09.py</code>. It will not work in its current state as it won’t find the two functions (try it to see the error message), so you need to import from your own <code>utils</code> module. Importing works exactly the same way as for other libraries. Note that even though your file is <code>utils.py</code>, the module name is <code>utils</code> (without the extension).</p>
<div class="rmdnote program">
<p>Put function into <code>utils.py</code>, the remaining code into <code>code09.py</code>.</p>
</div>
</div>
<div id="keep-imports-tidy" class="section level2" number="7.15">
<h2>
<span class="header-section-number">7.15</span> Ordnung muss sein!<a class="anchor" aria-label="anchor" href="#keep-imports-tidy"><i class="fas fa-link"></i></a>
</h2>
<p>So far, you only imported one library at most. However, as Python is highly modular, it is very common to have many imports in a single file. There are several rules that make it easier to track the imports. When you import libraries, all import statements should be at the top of your file and you should avoid putting them in random order. The recommended order is 1) system libraries, like <code>os</code> or <code>random</code>; 2) third-party libraries, like <code>psychopy</code>; 3) your project modules . And, within each section you should put the libraries <em>alphabetically</em>, so</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="guess-the-number-ai.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb58-2"><a href="guess-the-number-ai.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span></code></pre></div>
<p>This may not look particularly useful for our simple code but as your projects will grow, you will need to include more and more libraries. Keeping them in that order makes it easy to understand which libraries you use and which are non-standard. Alphabetic order means that you can quickly check whether a library is included, as you can quickly find the location where its import statement should appear.</p>
</div>
<div id="putting-video-into-videogames" class="section level2" number="7.16">
<h2>
<span class="header-section-number">7.16</span> Putting video into videogames<a class="anchor" aria-label="anchor" href="#putting-video-into-videogames"><i class="fas fa-link"></i></a>
</h2>
<p>Submit your files and be ready for more excitement as we are moving onto “proper” videogames with PsychoPy.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="guess-the-number-multi-round.html"><span class="header-section-number">6</span> Guess the Number: a multi round edition</a></div>
<div class="next"><a href="psychopy-basics.html"><span class="header-section-number">8</span> Gettings started with PsychoPy</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#guess-the-number-ai"><span class="header-section-number">7</span> Guess the Number: AI takes a turn</a></li>
<li><a class="nav-link" href="#chapter-concepts."><span class="header-section-number">7.1</span> Chapter concepts.</a></li>
<li><a class="nav-link" href="#guess-the-number-players-response"><span class="header-section-number">7.2</span> Player’s response</a></li>
<li>
<a class="nav-link" href="#function"><span class="header-section-number">7.3</span> Functions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#function-performs-a-single-computation"><span class="header-section-number">7.3.1</span> Function performs a single computation</a></li>
<li><a class="nav-link" href="#function-isolates-code-from-the-rest-of-the-program"><span class="header-section-number">7.3.2</span> Function isolates code from the rest of the program</a></li>
<li><a class="nav-link" href="#function-makes-code-easier-to-test"><span class="header-section-number">7.3.3</span> Function makes code easier to test</a></li>
<li><a class="nav-link" href="#function-makes-code-reusable"><span class="header-section-number">7.3.4</span> Function makes code reusable</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#functions-in-python"><span class="header-section-number">7.4</span> Functions in Python</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#defining-a-function-in-python"><span class="header-section-number">7.4.1</span> Defining a function in Python</a></li>
<li><a class="nav-link" href="#function-arguments"><span class="header-section-number">7.4.2</span> Function arguments</a></li>
<li><a class="nav-link" href="#functions-returned-value-output"><span class="header-section-number">7.4.3</span> Functions’ returned value (output)</a></li>
<li><a class="nav-link" href="#scopes-for-immutable-values"><span class="header-section-number">7.4.4</span> Scopes (for immutable values)</a></li>
</ul>
</li>
<li><a class="nav-link" href="#players-response-as-a-function"><span class="header-section-number">7.5</span> Player’s response as a function</a></li>
<li><a class="nav-link" href="#debugging-a-function"><span class="header-section-number">7.6</span> Debugging a function</a></li>
<li><a class="nav-link" href="#numpy-docstring"><span class="header-section-number">7.7</span> Documenting your function</a></li>
<li><a class="nav-link" href="#using-prompt"><span class="header-section-number">7.8</span> Using prompt</a></li>
<li><a class="nav-link" href="#splitting-interval-in-the-middle"><span class="header-section-number">7.9</span> Splitting interval in the middle</a></li>
<li><a class="nav-link" href="#single-round"><span class="header-section-number">7.10</span> Single round</a></li>
<li><a class="nav-link" href="#multiple-rounds"><span class="header-section-number">7.11</span> Multiple rounds</a></li>
<li><a class="nav-link" href="#playing-again"><span class="header-section-number">7.12</span> Playing again</a></li>
<li><a class="nav-link" href="#best-score-1"><span class="header-section-number">7.13</span> Best score</a></li>
<li><a class="nav-link" href="#using-you-own-libraries"><span class="header-section-number">7.14</span> Using you own libraries</a></li>
<li><a class="nav-link" href="#keep-imports-tidy"><span class="header-section-number">7.15</span> Ordnung muss sein!</a></li>
<li><a class="nav-link" href="#putting-video-into-videogames"><span class="header-section-number">7.16</span> Putting video into videogames</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/blob/master/05-guess-the-number-ai.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/edit/master/05-guess-the-number-ai.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Writing games with Python and PsychoPy</strong>" was written by Alexander (Sasha) Pastukhov. It was last built on 2022-10-23.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
