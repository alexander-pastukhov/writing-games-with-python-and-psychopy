<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 13 Guitar Hero: staircase and iterator functions | Writing games with Python and PsychoPy</title>
<meta name="author" content="Alexander (Sasha) Pastukhov">
<meta name="description" content="13.1 Getting the difficulty just right In game design, one of the hardest things to get right is difficulty. Make your game too easy and it will be boring. Make it too hard and only hardcore fans...">
<meta name="generator" content="bookdown 0.31 with bs4_book()">
<meta property="og:title" content="Chapter 13 Guitar Hero: staircase and iterator functions | Writing games with Python and PsychoPy">
<meta property="og:type" content="book">
<meta property="og:url" content="https://alexander-pastukhov.github.io/writing-games-with-python-and-psychopy/seminar-02-06.html">
<meta property="og:description" content="13.1 Getting the difficulty just right In game design, one of the hardest things to get right is difficulty. Make your game too easy and it will be boring. Make it too hard and only hardcore fans...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 13 Guitar Hero: staircase and iterator functions | Writing games with Python and PsychoPy">
<meta name="twitter:description" content="13.1 Getting the difficulty just right In game design, one of the hardest things to get right is difficulty. Make your game too easy and it will be boring. Make it too hard and only hardcore fans...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Writing games with Python and PsychoPy</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="software.html"><span class="header-section-number">2</span> Software</a></li>
<li><a class="" href="programming-tips.html"><span class="header-section-number">3</span> Programming tips and tricks</a></li>
<li><a class="" href="python-basics.html"><span class="header-section-number">4</span> Python basics</a></li>
<li><a class="" href="guess-the-number-single-round.html"><span class="header-section-number">5</span> Guess the Number: a single round edition</a></li>
<li><a class="" href="guess-the-number-multi-round.html"><span class="header-section-number">6</span> Guess the Number: a multi round edition</a></li>
<li><a class="" href="guess-the-number-ai.html"><span class="header-section-number">7</span> Guess the Number: AI takes a turn</a></li>
<li><a class="" href="psychopy-basics.html"><span class="header-section-number">8</span> Gettings started with PsychoPy</a></li>
<li><a class="" href="whack-a-mole.html"><span class="header-section-number">9</span> Whack-a-Mole</a></li>
<li><a class="" href="memory-game.html"><span class="header-section-number">10</span> Memory game</a></li>
<li><a class="" href="christmas-special.html"><span class="header-section-number">11</span> Christmas special</a></li>
<li><a class="" href="flappy-bird.html"><span class="header-section-number">12</span> Flappy Bird</a></li>
<li><a class="active" href="seminar-02-06.html"><span class="header-section-number">13</span> Guitar Hero: staircase and iterator functions</a></li>
<li><a class="" href="the-snake.html"><span class="header-section-number">14</span> The Snake</a></li>
<li><a class="" href="moon-lander.html"><span class="header-section-number">15</span> Moon lander</a></li>
<li><a class="" href="space-invaders.html"><span class="header-section-number">16</span> Space invaders: mixins and duck typing</a></li>
<li><a class="" href="game-of-life-numpy.html"><span class="header-section-number">17</span> Game of life (NumPy)</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="seminar-02-06" class="section level1" number="13">
<h1>
<span class="header-section-number">13</span> Guitar Hero: staircase and iterator functions<a class="anchor" aria-label="anchor" href="#seminar-02-06"><i class="fas fa-link"></i></a>
</h1>
<div id="getting-the-difficulty-just-right" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> Getting the difficulty just right<a class="anchor" aria-label="anchor" href="#getting-the-difficulty-just-right"><i class="fas fa-link"></i></a>
</h2>
<p>In game design, one of the hardest things to get right is difficulty. Make your game too easy and it will be boring. Make it too hard and only hardcore fans will play and only for <a href="https://www.imdb.com/title/tt4975856/">an achievement</a>. Thus, you would like to make your game hard enough to push a player to the limit but not much harder than that, so not to frustrate them. One way to solve this conundrum is to create different preset difficulty levels. An alternative way is to make a game that adapts its difficulty to the player.</p>
<p>The same is true for psychophysical experiments. You want to test ability of your participants to perform a certain task at their limit for one simple reason: At this <em>threshold</em> point influence of any additional factor, whether positive or negative, is most pronounced. For example, use an unusual stimulus configuration or increase attentional load and performance will probably drop. Allow to preallocate attention via cuing or use a prime that is congruent with a target and performance is likely to improve. Of course, these manipulations will have the same overall effect also when the task is particularly easy or maddeningly hard but it will much more difficult to <em>measure</em> this effect. It is one thing if performance drops from 75% to 65% than if it goes from 98% to 95% or from 53% to 52%<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Here, I assume that 50% is chance level performance.&lt;/p&gt;"><sup>73</sup></a> or vice versa. The silliest thing you can do is to <em>hope</em> that performance will allow you too see the effect of the factors that you manipulated. In things like these, knowledge and careful design is definitely superior to hope.</p>
<p>Thus, you want performance of your participants to be approximately in the middle between the ceiling (100% performance, fastest response times, super easy) and the floor (chance level performance, slowest response times, super hard or even impossible). But how do you know where this magic point for a <em>particular</em> person is? Particularly, if the task is novel so you have little information to guide you<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;It is the usual paradox that in order to optimally measure a threshold condition for a particular task, you should measure at or around the threshold. But if you already know where to measure, you don’t need to measure.&lt;/p&gt;"><sup>74</sup></a>. The solution is to adjust the difficulty on-the-fly based on participant’s responses. For example, if you have a two-alternatives-forced-choice task, you can use a two-up-one-down staircase (difficulty increases after two correct responses and decreases after one mistake) that targets 70.7% performance threshold. There are different methods and even different ways to use the same core method (e.g., does the step stays constant or changes, what is the run termination criteria, etc.), so it is always a good idea to refresh your memory and read about <a href="https://doi.org/10.3758/BF03194543">adaptive procedures</a> when designing your next experiment.</p>
<p>In our game, we will use a very simple 3-up-1-down staircase: get the three responses correct on a row and things get faster, make a mistake and the game slows down. We’ll see how fast you can go! First, you will implement it by hand and then we will use its <a href="https://psychopy.org/api/data.html#stairhandler">PsychoPy implementation</a>.</p>
</div>
<div id="guitar-hero" class="section level2" number="13.2">
<h2>
<span class="header-section-number">13.2</span> Guitar Hero<a class="anchor" aria-label="anchor" href="#guitar-hero"><i class="fas fa-link"></i></a>
</h2>
<p>Today, we will program Guitar Hero game. In the original game, you must play notes on a guitar-shaped controller pressing buttons at the right time, just like when you actually play music on a guitar. On the one hand, it is a straightforward and repetitive motor task. On the other hand, take a fast and complicated music piece and it’ll take many minutes or even hours of practice to get it right. It is a lot of fun, as music cues and primes your responses. The same idea of music-synchronized-actions was used in <em>Raymon Legends</em> music levels where jumps and hits are timed to drums or bass. It is a bizarrely cool dance-like sequence and a very satisfying experience, also when watching pros to do it (I happened to have couple in my household).</p>
<p>We will program this game (sans Guitar and Hero) and you can see it in the video below. The player must press a correct key (<em>left</em>, <em>down</em>, or <em>right</em>) whenever the target crosses the line. Pressing it to early or too late counts as a mistake. Of course, the faster the targets go, the harder it is to respond on time and with a correct key. As I wrote above, we will use the 3-up-1-down staircase procedure to control for that.</p>
<div style="text-align:center;">
<video controls><source src="videos/guitar-hero.m4v" type="video/mp4"></source></video>
</div>
<p>As per usual, we will take gradual approach:</p>
<ul>
<li>Boilerplate code</li>
<li>Create a class for individual moving targets</li>
<li>Create a timed-response task class that will create them (using cool generators), dispose of them, check the response, and adjust staircase.</li>
<li>Add bells-and-whistles like score and time limited runs.</li>
</ul>
</div>
<div id="boilerplate" class="section level2" number="13.3">
<h2>
<span class="header-section-number">13.3</span> Boilerplate<a class="anchor" aria-label="anchor" href="#boilerplate"><i class="fas fa-link"></i></a>
</h2>
<p>Create our usual boilerplate code in <em>code01.py</em>:</p>
<ul>
<li>Create file with basic settings (e.g., window size, I’ve picked 640×480 but choose whatever looks good on your screen) to which you can add later on.</li>
<li>Import what is needed from PsychoPy.</li>
<li>Create a window.</li>
<li>Create our usual main game loop with <code>gamover</code> variable, flipping the window, and checking for <em>escape</em> button press.</li>
</ul>
<div class="rmdnote program">
<p>Put your boilerplate code into <em>code01.py</em>.</p>
</div>
</div>
<div id="target-and-timedresponsetask-classes" class="section level2" number="13.4">
<h2>
<span class="header-section-number">13.4</span> Target and TimedResponseTask classes<a class="anchor" aria-label="anchor" href="#target-and-timedresponsetask-classes"><i class="fas fa-link"></i></a>
</h2>
<p>Our main work horse will be <code>TimedResponseTask</code> class. It will spawn a new random <code>Target</code> at random intervals (which will depend on speed), pass speed information to moving targets, and remove targets, once they disappear below the screen. The <code>Target</code> class will use <a href="https://psychopy.org/api/visual/rect.html#psychopy.visual.rect.Rect">visual.Rect</a>
<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Inheriting from &lt;code&gt;visual.Rect&lt;/code&gt; would’ve make things simpler but, at least in PsychoPy 2021.1.4, it does not work due to so technical glitch.&lt;/p&gt;"><sup>75</sup></a> with some extra bells and whistles to make it appear at the right location, move at the right speed, change its line color (indicating a correct response), compute whether it is already off the screen, etc. We will start with a single target first.</p>
</div>
<div id="target-class-static" class="section level2" number="13.5">
<h2>
<span class="header-section-number">13.5</span> Target class: static<a class="anchor" aria-label="anchor" href="#target-class-static"><i class="fas fa-link"></i></a>
</h2>
<p>First, create a <code>Target</code> class: a colored rectangle in one of the three positions that starts at the top of the window and moves down at a specific speed. Its constructor should take PsychoPy window as a parameter (you will need it to create the rectangle as an attribute), position index (<code>ipos</code>, from 0 to 2), speed (<code>speed</code>, in <code>"norm"</code> units <em>per second</em>), and common settings (<code>settings</code>, a dictionary with target-specific settings from our settings file) . The only thing we need to do right now in the constructor is to create a color rectangle (see below) and store both <code>ipos</code> and <code>speed</code> as attributes for later use. In addition, define a <code>score</code> attribute and set it to <code>None</code>. This will hold the score the participant got for this target and <code>None</code> means that it has not been responded upon yet.</p>
<p>The second parameter — position index — determines the horizontal position of the target and its color (to make targets more fun and distinct). For my code, I have decided to make rectangle 0.4 norm units wide and 0.1 norm units high. The leftmost <em>red</em> rectangle (for <code>ipos</code> 0), is centered at -0.5, the middle <em>green</em> one is dead center, and the rightmost <em>blue</em> rectangle is centered at 0.5. I’ve defined all these in my <code>settings.json</code> file under <code>Target</code> group. Think about how you can compute both color and position for a target from <code>ipos</code> and <code>settings</code> without using if-else statements. Also, think about the y-position of the rectangle, so it appears right at the top of the window.</p>
<p>The second method you need is <code>draw()</code> which simply draws the rectangle<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Again, inheriting from &lt;code&gt;visual.Rect()&lt;/code&gt; would have taken care of this for you.&lt;/p&gt;"><sup>76</sup></a>. Test it by creating a target at one of the position (or three targets at all three positions) and drawing them in the main loop. You should get nice looking but static rectangle(s).</p>
<div class="rmdnote program">
<p>Put updated code in code02.py_ and create the class <code>Target</code> in a separate file.</p>
</div>
</div>
<div id="target-class-moving" class="section level2" number="13.6">
<h2>
<span class="header-section-number">13.6</span> Target class: moving<a class="anchor" aria-label="anchor" href="#target-class-moving"><i class="fas fa-link"></i></a>
</h2>
<p>Our targets fall down at speed defined by their <code>speed</code> attribute. Later on, we will change that attribute dynamically to speed up or slow down their fall.</p>
<p>For the actual falling down, implement a new method, call it <code>fall()</code>, that will update target’s position on every frame. The speed is in <code>norm units per second</code>, thus, to compute the change in vertical position you also need to know the how much time <em>in seconds</em> has elapsed since last position update. The simplest way to do this is by using a <a href="https://psychopy.org/api/clock.html#psychopy.clock.Clock">Clock</a> class. You create it as an attribute in the constructor and then, in the <code>fall()</code> method you use its current time to compute and apply a change in vertical position of the rectangle. Don’t forget to reset the clock after that!</p>
<p>Include <code>fall()</code> method call in the main loop and see how the target falls. Experiment with falling speed!</p>
<div class="rmdnote program">
<p>Put updated code in <em>code03.py</em> and update the class <code>Target</code>.</p>
</div>
</div>
<div id="iteratorgenerator-functions" class="section level2" number="13.7">
<h2>
<span class="header-section-number">13.7</span> Iterator/Generator functions<a class="anchor" aria-label="anchor" href="#iteratorgenerator-functions"><i class="fas fa-link"></i></a>
</h2>
<p>In the next section, we will create a <code>TimedResponseTask</code> class that will generate targets at a random location and after a random interval. We can, of course, do it directly in the class but where’s fun in that?! Instead, we will use this as an opportunity to learn about iterator/generator functions. An iterator is a <em>function</em> that uses <code>yield</code> instead of <code>return</code> statement to, well, <em>yield</em> a value. It <em>yields</em> it, because the function itself <em>returns</em> an iterator object that you can iterate over in a for loop or via <code>next()</code> function. Importantly, <code>yield</code> “freezes” execution of the function and the next time you call the function <em>it continues from that point</em> rather than from the start of the function. Once you reach the end of the function, it automatically raises <code>StopIteration()</code> exception, so you don’t need to worry about how to communicate that you ran out of items. It may sound confusing but it is really simple. Here an example to illustrate this:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb114-1"><a href="seminar-02-06.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> iterator_fun():</span>
<span id="cb114-2"><a href="seminar-02-06.html#cb114-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> <span class="dv">3</span></span>
<span id="cb114-3"><a href="seminar-02-06.html#cb114-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> <span class="dv">1</span></span>
<span id="cb114-4"><a href="seminar-02-06.html#cb114-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">yield</span> <span class="st">"wow!"</span></span>
<span id="cb114-5"><a href="seminar-02-06.html#cb114-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb114-6"><a href="seminar-02-06.html#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="co"># function returns an iterator, not a value!</span></span>
<span id="cb114-7"><a href="seminar-02-06.html#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(iterator_fun())</span>
<span id="cb114-8"><a href="seminar-02-06.html#cb114-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-9"><a href="seminar-02-06.html#cb114-9" aria-hidden="true" tabindex="-1"></a><span class="co"># iterating via for loop</span></span>
<span id="cb114-10"><a href="seminar-02-06.html#cb114-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;generator object iterator_fun at 0x00000293FF6DD310&gt;</span></span>
<span id="cb114-11"><a href="seminar-02-06.html#cb114-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> elem <span class="kw">in</span> iterator_fun():</span>
<span id="cb114-12"><a href="seminar-02-06.html#cb114-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(elem)</span>
<span id="cb114-13"><a href="seminar-02-06.html#cb114-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb114-14"><a href="seminar-02-06.html#cb114-14" aria-hidden="true" tabindex="-1"></a><span class="co"># iterating via next(), note you use an iterator object </span></span>
<span id="cb114-15"><a href="seminar-02-06.html#cb114-15" aria-hidden="true" tabindex="-1"></a><span class="co"># that function returned, not the function itself!</span></span>
<span id="cb114-16"><a href="seminar-02-06.html#cb114-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3</span></span>
<span id="cb114-17"><a href="seminar-02-06.html#cb114-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1</span></span>
<span id="cb114-18"><a href="seminar-02-06.html#cb114-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; wow!</span></span>
<span id="cb114-19"><a href="seminar-02-06.html#cb114-19" aria-hidden="true" tabindex="-1"></a>an_iterator <span class="op">=</span> iterator_fun()  </span>
<span id="cb114-20"><a href="seminar-02-06.html#cb114-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-21"><a href="seminar-02-06.html#cb114-21" aria-hidden="true" tabindex="-1"></a><span class="co"># now you can use an_iterator to get a next item from it</span></span>
<span id="cb114-22"><a href="seminar-02-06.html#cb114-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(an_iterator))</span>
<span id="cb114-23"><a href="seminar-02-06.html#cb114-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3</span></span>
<span id="cb114-24"><a href="seminar-02-06.html#cb114-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(an_iterator))</span>
<span id="cb114-25"><a href="seminar-02-06.html#cb114-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1</span></span>
<span id="cb114-26"><a href="seminar-02-06.html#cb114-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(an_iterator))</span>
<span id="cb114-27"><a href="seminar-02-06.html#cb114-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; wow!</span></span></code></pre></div>
<div class="sourceCode" id="cb115"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb115-1"><a href="seminar-02-06.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># next call will raise an exception StopIteration(), so I do not run it here.</span></span>
<span id="cb115-2"><a href="seminar-02-06.html#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">next</span>(iterator_var))</span></code></pre></div>
<p>This format makes writing iterators very easy, just <code>yield</code> whatever you want in an order you want and Python will take care of the rest. You can also <code>yield</code> in a loop, inside an if-else statement, etc. Look at the code below and figure out what will be printed out before running it.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb116-1"><a href="seminar-02-06.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> iterator_fun():</span>
<span id="cb116-2"><a href="seminar-02-06.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> e <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>):</span>
<span id="cb116-3"><a href="seminar-02-06.html#cb116-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> e <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb116-4"><a href="seminar-02-06.html#cb116-4" aria-hidden="true" tabindex="-1"></a>      <span class="cf">yield</span> e</span>
<span id="cb116-5"><a href="seminar-02-06.html#cb116-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-6"><a href="seminar-02-06.html#cb116-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> iterator_fun():</span>
<span id="cb116-7"><a href="seminar-02-06.html#cb116-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(item)</span></code></pre></div>
<p>For our <code>TimedResponseTask</code> class, we will need two <em>generators</em>. They are <em>generators</em> rather than <em>iterators</em> because both will be endless. One that generates a random delay until the next target and one that generates a random target position (0, 1, or 2). Implement both in a separate file (I called it <em>generators.py</em>).</p>
<p>The <code>time_to_next_target_generator()</code> function should take a tuple of two float values, which define shortest and longest allowed delays, as a parameter and <em>yield</em> a <a href="https://docs.python.org/3/library/random.html#random.uniform">random number</a> within this range in an <em>endless</em> loop. We need the endless loop (<code>while True:</code> will do) because we do not know how many values we will need, so we just generate as many as needed.</p>
<p>The <code>next_target_generator()</code> will be a bit more interesting. It can just return a <a href="https://docs.python.org/3/library/random.html#random.choice">random.choice</a> from 0, 1, and 2 but where is fun in that? Instead, we will make it a bit more complicated to ensure that all three targets appear equal number of times within <em>3N</em> trials, where <em>N</em> will be a parameter of the generator function. This would ensure random, reasonably unpredictable but balanced targets in the short run. Remember, in the long run random choice will always give us a balanced uniform distribution but there is not such guarantee for the shorter runs of a few trials. First, you should create a list where each target appears N times (think how you can do it using <a href="https://docs.python.org/3/library/functions.html#func-range">range()</a>, <a href="https://docs.python.org/3/library/functions.html#func-list">list()</a> and <a href="https://docs.python.org/3/library/stdtypes.html#common-sequence-operations">*</a>). Then, create an endless loop (again, we don’t know how many values we will need) in which you 1) shuffle elements of the list, 2) yield one element at a time via for loop. Once you run out of elements, you shuffle them again and yield one by one again. Then repeat. And again, and again. Endless loop!</p>
<p>I would suggest creating and testing both function in a Jupyter notebook first and then putting them in a separate file (e.g., <em>generators.py</em>). Be careful if you decide to use a for loop instead of <code>next()</code> for testing. Remember, both a generators and will never run out of items to yield for a for loop!</p>
<div class="rmdnote program">
<p>Put both generators into <em>generators.py</em>.</p>
</div>
</div>
<div id="timedresponsetask-class" class="section level2" number="13.8">
<h2>
<span class="header-section-number">13.8</span> TimedResponseTask class<a class="anchor" aria-label="anchor" href="#timedresponsetask-class"><i class="fas fa-link"></i></a>
</h2>
<p>Now we are ready to create the <code>TimedResponseTask</code> class. For our first take, it will create targets at a random location (<code>next_target_generator()</code>) after a random interval (<code>time_to_next_target_generator()</code>) plus take care of moving and drawing all of them. More bells and whistles (disposing of targets that went past the screen, changing the speed, checking response validity, etc.) will come later.</p>
<p><strong>For the constructor</strong>, we definitely need PsychoPy window as a parameter, because we need it every time we create a new target. In addition, we need to pass a dictionary with settings for the task (initial speed, a tuple with range for time intervals between targets for <code>time_to_next_target_generator()</code>, and number of target repetitions for the <code>next_target_generator()</code>) and a dictionary with settings for the <code>Target</code> class (we need it every time we create a new target). We will use these parameters beyond the constructor, so save them as attributes. Plus, create an attribute <code>targets</code> and initialize it to an empty list (we will store <code>Target</code> objects in it), and create attributes for both generator objects using the appropriate parameters. Also create a <code>speed_factor</code> attribute and set it to 1. We will use it later to control both the speed of motion and how frequently the targets are generated. The higher is the factor, the faster targets move and the shorter is the interval to the target and vice versa. Finally, we need a <a href="https://psychopy.org/api/clock.html#psychopy.clock.Clock">Clock</a> that will count the time to the moment when we need to generate a new target (<code>new_target_timer</code>) and an attribute that will hold that time (<code>time_till_next_target</code>). Initialize the latter to the <code>next()</code> item from time-to-next-target generator (remember, you need to use the attribute, which is a generator object that function returned, not the function itself).</p>
<p>Now we need to add three methods <code>draw</code>, <code>update</code>, and <code>add_next_target</code>. The first one is easy, it simply draws all <code>targets</code> in a for loop. The second is also easy, it makes all targets <code>fall</code> plus, after the loop, it should call <code>add_next_target</code> method. The <code>add_next_target</code> method should check whether the elapsed time for <code>new_target_timer</code> <strong>times the <code>speed_factor</code></strong> (as the speed increases, the time to the next target goes faster) has exceeded the <code>time_till_next_target.</code>If that is indeed the case, create a new random target (get the <code>next()</code> position from the position generator and remember to pass <code>speed</code> <em>times</em> <code>speed_factor</code>!), add it to the list of targets, reset the timer and get new <code>time_till_next_target</code> using <code>next()</code> item from the time generator.</p>
<p>In the main file, create <code>TimedResponsTask</code> object (use a name you like) and call its <code>draw</code> and <code>update</code> methods in the main loop. You should see targets appearing at random and falling down consistently.</p>
<div class="rmdnote program">
<p>Put updated code in <em>code04.py</em> and create the class <code>TimedResponseTask</code>.</p>
</div>
</div>
<div id="disposing-of-targets" class="section level2" number="13.9">
<h2>
<span class="header-section-number">13.9</span> Disposing of targets<a class="anchor" aria-label="anchor" href="#disposing-of-targets"><i class="fas fa-link"></i></a>
</h2>
<p>Currently, our targets keep falling down even when they are below the screen. This will not affect the performance <em>immediately</em> but it will be taxing both memory and CPU, so we should dispose of them. In the <code>Target</code> class, create a new read-only (computed) <code>@property</code> called <code>is_below_the_screen</code> that returns <code>True</code> if the upper edge of the target is below the lower edge of the screen (<code>False</code> otherwise, of course and you definitely do not need if-else!).</p>
<p>Next, in the <code>update</code> method of <code>TimedResponseTask</code>, add a second loop (or modify the existing loop) where you delete any object that <code>is_below_the_screen</code>.</p>
<p>For debugging, run the main code, wait until at least one target falls below the screen, put a break point and check <code>targets</code> attribute. Its length should match the number of visible targets, not of the total generated targets.</p>
<div class="rmdnote program">
<p>Update classes <code>Target</code> and <code>TimedResponseTask</code>.</p>
</div>
</div>
<div id="finishing-line" class="section level2" number="13.10">
<h2>
<span class="header-section-number">13.10</span> Finishing line<a class="anchor" aria-label="anchor" href="#finishing-line"><i class="fas fa-link"></i></a>
</h2>
<p>Add a new visual attribute to the <code>TimedResponseTask</code> that is a horizontal <a href="https://psychopy.org/api/visual/line.html#psychopy.visual.Line">line</a>. The task of the player will be to press a corresponding key whenever a target crosses (overlaps with) the line. For now, create it as an attribute in the constructor (pick the vertical location you like) and draw it inside the <code>draw()</code> method.</p>
<div class="rmdnote program">
<p>Update class <code>TimedResponseTask</code>.</p>
</div>
</div>
<div id="response" class="section level2" number="13.11">
<h2>
<span class="header-section-number">13.11</span> Response<a class="anchor" aria-label="anchor" href="#response"><i class="fas fa-link"></i></a>
</h2>
<p>Now the real fun begins! We will allow a player to press keys and check whether a corresponding target is on the line. For this, we need new methods for both <code>Target</code> and <code>TimedResponseTask</code> classes. For the <code>Target</code>, implement a new method class <code>overlaps()</code> that will take a vertical position (of the finishing line) as the only float number parameter. In the method, first you check that the <code>score</code> attribute is <code>None</code>. If it <em>not</em> <code>None</code> that means that the player already responded on to the target and they are not allowed to respond to it twice. If it is <code>None</code>, compute a score using the following formula:
<span class="math display">\[score = int \left(10 - 10 \cdot \frac{|y_{target} - y_{line}|}{h_{target} / 2} \right)\]</span>
where <span class="math inline">\(y_{target}\)</span> is the vertical center of the target, <span class="math inline">\(y_{line}\)</span> is the vertical position of the line (you get it as a function parameter), <span class="math inline">\(h_{target}\)</span> is height of the target, <span class="math inline">\(||\)</span> means absolute value (use <a href="https://docs.python.org/3/library/math.html#math.fabs">fabs</a> function from <em>math</em> library for that), and <code>10</code> is an arbitrary scaling factor (you can use any integer). Study the formula and you will see that score is 10 if the target’s center is right on the line but decreases linearly with any displacement. Once the target is off the line, the score becomes negative. We convert it to <code>int</code>, because we want simple scores (floats look messy for this). Compute the score and store in a <em>temporary local variable</em>. If the value is <em>positive</em>, that means success, so you should store this value permanently in the <code>score</code> attribute, change line color of the rectangle to white (to show the player that they got it right), and return <code>True</code> (yes, target does overlap with the line!). For all other outcomes, you return <code>False</code>. This means that either the response was already made or the target does not overlap with the line.</p>
<p>In the <code>TimerResponseTask</code> class, we need a new method <code>check()</code> that will take position of the target based on the key press (so if a player pressed <em>left</em> key, the position will 0, <em>down</em> is 1, and <em>right</em> is 2). Loop over targets and if a target’s position (<code>ipos</code> attribute) matches the position of the key press (parameter of the function) <em>and</em> target overlaps with the line (the <code>overlaps()</code> method returns <code>True</code>), return the <code>score</code> attribute of that target. Note that the condition order is important here! You need to check for the overlap <em>only</em> if target position matches the key. If you ran out of targets to check that means that the player pressed a wrong key or at the wrong time, so you should return <code>0</code> (means “mistake”).</p>
<p>In the main loop, add <code>"left"</code>, <code>"down"</code>, and <code>"right"</code> to the key list of <a href="https://psychopy.org/api/event.html#psychopy.event.getKeys">getKeys()</a> call. Then, if any of these three keys are pressed, translate that into a position, respectively, 0, 1, and 2 (think how you can do it without if-else via a dictionary), and call the new <code>check</code> method of the <code>TimedResponseClass</code>. Test the code, targets’ edges should turn white, if you time your key press correctly!</p>
<div class="rmdnote program">
<p>Put updated code in <em>code05.py</em>, update <code>Target</code> and <code>TimedResponseTask</code> classes.</p>
</div>
</div>
<div id="score" class="section level2" number="13.12">
<h2>
<span class="header-section-number">13.12</span> Score<a class="anchor" aria-label="anchor" href="#score"><i class="fas fa-link"></i></a>
</h2>
<p>Playing is more fun when you can see how well you are doing. Let us add a simple score indicator that is updated with response score. You already know how you can do it via <a href="https://psychopy.org/api/visual/textstim.html#psychopy.visual.TextStim">TextStim</a> stimulus but you also already know how you can inherit from a base class and extend its functionality. This is what we will do here, as the class will record and draw the score (that part is covered by the inheritance).</p>
<p>Create a new class (I have called it <code>ScoreText</code>) that inherits from <a href="https://psychopy.org/api/visual/textstim.html#psychopy.visual.TextStim">TextStim</a>. In the constructor, you need to create an integer attribute that will hold current <code>score</code> and initialize it 0. Plus, call ancestor’s constructor via <code>super().__init__(...)</code> to initialize and place the text stimulus (I’ve picked top left corner). Think about parameters that the constructor and ancestor’s constructor need.</p>
<p>Next, we need to update the score (both its numeric form <em>and</em> the text that we draw) every time participant presses a key. We could implement the code <em>outside</em> of the class but that is a fairly bad idea, as it puts class-related code elsewhere. We could also implement a “normal” method, e.g., <code>add()</code> that will take care of that. Instead, we will implement a <em>special</em> method <a href="https://docs.python.org/3/reference/datamodel.html#object.__iadd__"><strong>iadd</strong></a> that allows to “add to” the object. It takes a single parameter (in addition to the compulsory <code>self</code>, of course), performs “adding to the self” operation (whatever that means with respect to your object, can be mathematical addition for an attribute, concatenation of the string, adding to the list, etc.), and <strong>returns back the reference to itself</strong>, i.e., returns <code>self</code> not a value of any attribute! Here’s how it works:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb117-1"><a href="seminar-02-06.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AddIt():</span>
<span id="cb117-2"><a href="seminar-02-06.html#cb117-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb117-3"><a href="seminar-02-06.html#cb117-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.number <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb117-4"><a href="seminar-02-06.html#cb117-4" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb117-5"><a href="seminar-02-06.html#cb117-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__iadd__</span>(<span class="va">self</span>, addendum):</span>
<span id="cb117-6"><a href="seminar-02-06.html#cb117-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.number <span class="op">+=</span> addendum</span>
<span id="cb117-7"><a href="seminar-02-06.html#cb117-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span> <span class="co"># important!!!</span></span>
<span id="cb117-8"><a href="seminar-02-06.html#cb117-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-9"><a href="seminar-02-06.html#cb117-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-10"><a href="seminar-02-06.html#cb117-10" aria-hidden="true" tabindex="-1"></a>adder <span class="op">=</span> AddIt()</span>
<span id="cb117-11"><a href="seminar-02-06.html#cb117-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(adder.number)</span>
<span id="cb117-12"><a href="seminar-02-06.html#cb117-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0</span></span>
<span id="cb117-13"><a href="seminar-02-06.html#cb117-13" aria-hidden="true" tabindex="-1"></a>adder <span class="op">+=</span> <span class="dv">10</span></span>
<span id="cb117-14"><a href="seminar-02-06.html#cb117-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(adder.number)</span>
<span id="cb117-15"><a href="seminar-02-06.html#cb117-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10</span></span></code></pre></div>
<p>Implement that special method for your class, so we can do <code>score_stim +=  timed_task.check(...)</code>. Remember, you have to update both numeric <em>and</em> visual representations of the score in that method! Add the score to the main code.</p>
<div class="rmdnote program">
<p>Put updated code in <em>code06.py</em>, create <code>ScoreText</code> class.</p>
</div>
</div>
<div id="staircase" class="section level2" number="13.13">
<h2>
<span class="header-section-number">13.13</span> Staircase<a class="anchor" aria-label="anchor" href="#staircase"><i class="fas fa-link"></i></a>
</h2>
<p>We will implement the staircase as part of the <code>TimerResponseTask</code> class, so it can speed up and slow down itself. For this, we will need an attribute that counts number of <em>consecutive</em> correct responses (I, typically, call it <code>correct_in_a_row</code> or something like that). Create and initialize it to zero in the constructor.</p>
<p>Next, create a new method <code>staircase()</code> that will take a single parameter (beyond <code>self</code>) on whether the response was <code>correct</code> or not. If it was, increment <code>correct_in_a_row</code> by one and check whether it reached 3. If it did, increase the <code>speed_factor</code> by <em>multiplying</em> it by some chosen factor (I’ve picked 1.3) and resetting <code>correct_in_a_row</code> to 0. This is equivalent to using a logarithmic step as our <code>speed_factor</code> is adjusted as a fraction of its magnitude. Alternatively, if the response was not correct, <em>divide</em> <code>speed_factor</code> by the same number (e.g., 1.3, so slowing things down) and again, reset <code>correct_in_a_row</code> to 0. After that, loop over all targets and update their speed based on <code>speed</code> and <code>speed_factor</code> attributes.</p>
<p>You need to call this method inside the <code>check</code> method, think then and how.</p>
<div class="rmdnote program">
<p>Update <code>TimedTaskResponse</code> class.</p>
</div>
</div>
<div id="limiting-time" class="section level2" number="13.14">
<h2>
<span class="header-section-number">13.14</span> Limiting time<a class="anchor" aria-label="anchor" href="#limiting-time"><i class="fas fa-link"></i></a>
</h2>
<p>Let us add a competitive edge by limiting the run time to 20 seconds (you can pick your own duration, of course, and you definitely want to be a setting). Create an additional outer loop, so that the game can be played many times over. Once the round is over, show the latest state (redrawing all game objects) plus the “Round over” sign and wait for the player to press either <em>escape</em> (then you exit the game) or <em>space</em> (to start the next round). Remember to recreate all game objects anew for the next round (or create a <code>reset</code> method for all of them).</p>
<div class="rmdnote program">
<p>Put updated code in <em>code07.py</em>, create <code>ScoreText</code> class.</p>
</div>
</div>
<div id="using-psychopys-stairhandler" class="section level2" number="13.15">
<h2>
<span class="header-section-number">13.15</span> Using PsychoPy’s StairHandler<a class="anchor" aria-label="anchor" href="#using-psychopys-stairhandler"><i class="fas fa-link"></i></a>
</h2>
<p>Now that you know how to program a very basic staircase, let us use its much more flexible implementation by PsychoPy via <a href="https://psychopy.org/api/data.html#stairhandler">StairHandler</a> class. We will use so as to replicate the staircase that we already implemented. However, it is capable of much more and PsychoPy has implementation for other adaptive methods, such as parametric <a href="https://psychopy.org/api/data.html#psychopy.data.PsiHandler">Psi</a> or <a href="https://psychopy.org/api/data.html#questhandler">Quest</a> approaches. I strongly recommend consulting the literature to decide which method is best suited for your experiment and then relying on PsychoPy’s implementation in your code.</p>
<p>We will need to modify our <code>TimedResponseTask</code>, so let us create its twin <code>TimedResponseTask2</code> (or <code>TimedResponseTaskPsychoPy</code>, if you find that more intuitive). Simply copy-paste the entire code, modify the name, import and use it in your <em>code08.py</em> code. Make sure everything works just as before (because you did not do anything beyond making a carbon copy).</p>
<p>Now let us make use of the <a href="https://psychopy.org/api/data.html#stairhandler">StairHandler</a> in <code>TimedResponseTask2</code>. Drop <code>correct_on_a_row</code> attribute and create a <a href="https://psychopy.org/api/data.html#stairhandler">StairHandler</a> as <code>stairhandler</code> attribute instead. You need to specify <code>startVal</code> which is the initial value for the <code>speed_factor</code>, thus use whatever value you had previously. <a href="https://psychopy.org/api/data.html#stairhandler">StairHandler</a> uses <code>nUp=1</code> and <code>nDown=3</code> by default. This matches our custom staircase, so theoretically you can use defaults by omitting these parameters. However, for the sake of code’s readability, do specify these explicitly. Our steps were logarithmic, so use <code>stepType="log"</code> and a single fixed <code>stepSizes=-0.1</code>. The magnitude of <code>-0.1</code> correspond roughly to the step that we used in the custom staircase and we need the negative sign because <a href="https://psychopy.org/api/data.html#stairhandler">StairHandler</a> <em>increases</em> the staircase level following an incorrect response. In our case, we want an exact opposite, <em>decreasing</em> <code>speed_factor</code> tp slow targets down. Hence, the negative sign that turn increase into a decrease. Finally, <a href="https://psychopy.org/api/data.html#stairhandler">StairHandler</a> will terminate after it reaches either desired number of trials (<code>nTrial</code>) or reversals (<code>nReversals</code>, changes from correct to incorrect responses or vice versa). These are the settings that would typically determine length of a single block/run in the real experiment. However, we limited our rounds by <em>time</em>, so we only need to make sure that the <a href="https://psychopy.org/api/data.html#stairhandler">StairHandler</a> does not run out of trials before the run is over. Thus, specify some very large number (e.g., 1000) for both these parameters.</p>
<p>Once you created <code>stairhandler</code> attribute, it is ready for use via <code>next(staircase)</code>. Call it the first time in the constructor and assign the value it returns to <code>speed_factor</code> attribute (should be whatever <code>startVal</code> you assigned to it but do put a breakpoint and double-check!)</p>
<p>Next, we need to modify our <code>staicase()</code> method making it much simpler. First, remove the <code>if correct: ... else: ...</code> code but leave targets’ speed adjustment code intact (we still need it!). Then, let <code>stairhandler</code> adjust itself via <a href="https://psychopy.org/api/data.html#psychopy.data.StairHandler.addResponse">addResponse()</a> method using an information on whether the response was correct (you already have a parameter with exactly that information). Finally, get the next <code>speed_factor</code> exactly the same way as in the constructor. Done!</p>
<div class="rmdnote program">
<p>Put updated code in <em>code08.py</em> using <code>TimedResponseTask2</code>.</p>
</div>
<p>Your program should run very much like before but now you have many more opportunities to make it more flexible at little cost for yourself (look at <a href="https://psychopy.org/api/data.html#stairhandler">StairHandler</a> settings) and to log it via one of <code>saveAs</code> methods.Let us do the latter, save staircase logs via <a href="https://psychopy.org/api/data.html#psychopy.data.StairHandler.saveAsText">saveAsText()</a> after a run is over. Figure out a way to generate a unique filename for each run, so that the logs will not be overwritten.</p>
<div class="rmdnote program">
<p>Save staircase logs in <em>code09.py</em>.</p>
</div>
</div>
<div id="this-is-just-a-start" class="section level2" number="13.16">
<h2>
<span class="header-section-number">13.16</span> This is just a start!<a class="anchor" aria-label="anchor" href="#this-is-just-a-start"><i class="fas fa-link"></i></a>
</h2>
<p>As per usual, think about how you can extend the game. A clock showing the remaining time is definitely missing. Auditory feedback would be nice. More positions? Random colors to confuse a player?</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="flappy-bird.html"><span class="header-section-number">12</span> Flappy Bird</a></div>
<div class="next"><a href="the-snake.html"><span class="header-section-number">14</span> The Snake</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#seminar-02-06"><span class="header-section-number">13</span> Guitar Hero: staircase and iterator functions</a></li>
<li><a class="nav-link" href="#getting-the-difficulty-just-right"><span class="header-section-number">13.1</span> Getting the difficulty just right</a></li>
<li><a class="nav-link" href="#guitar-hero"><span class="header-section-number">13.2</span> Guitar Hero</a></li>
<li><a class="nav-link" href="#boilerplate"><span class="header-section-number">13.3</span> Boilerplate</a></li>
<li><a class="nav-link" href="#target-and-timedresponsetask-classes"><span class="header-section-number">13.4</span> Target and TimedResponseTask classes</a></li>
<li><a class="nav-link" href="#target-class-static"><span class="header-section-number">13.5</span> Target class: static</a></li>
<li><a class="nav-link" href="#target-class-moving"><span class="header-section-number">13.6</span> Target class: moving</a></li>
<li><a class="nav-link" href="#iteratorgenerator-functions"><span class="header-section-number">13.7</span> Iterator/Generator functions</a></li>
<li><a class="nav-link" href="#timedresponsetask-class"><span class="header-section-number">13.8</span> TimedResponseTask class</a></li>
<li><a class="nav-link" href="#disposing-of-targets"><span class="header-section-number">13.9</span> Disposing of targets</a></li>
<li><a class="nav-link" href="#finishing-line"><span class="header-section-number">13.10</span> Finishing line</a></li>
<li><a class="nav-link" href="#response"><span class="header-section-number">13.11</span> Response</a></li>
<li><a class="nav-link" href="#score"><span class="header-section-number">13.12</span> Score</a></li>
<li><a class="nav-link" href="#staircase"><span class="header-section-number">13.13</span> Staircase</a></li>
<li><a class="nav-link" href="#limiting-time"><span class="header-section-number">13.14</span> Limiting time</a></li>
<li><a class="nav-link" href="#using-psychopys-stairhandler"><span class="header-section-number">13.15</span> Using PsychoPy’s StairHandler</a></li>
<li><a class="nav-link" href="#this-is-just-a-start"><span class="header-section-number">13.16</span> This is just a start!</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/blob/master/11-guitar-hero.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/edit/master/11-guitar-hero.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Writing games with Python and PsychoPy</strong>" was written by Alexander (Sasha) Pastukhov. It was last built on 2023-01-10.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
