<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 3 Programming tips and tricks | Writing games with Python and PsychoPy</title>
<meta name="author" content="Alexander (Sasha) Pastukhov">
<meta name="description" content="Below are some tips about writing and reading the code. Some may sound cryptic when you read them for the first time (they will become clear once we cover the necessary material). Some will feel...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="Chapter 3 Programming tips and tricks | Writing games with Python and PsychoPy">
<meta property="og:type" content="book">
<meta property="og:url" content="https://alexander-pastukhov.github.io/writing-games-with-python-and-psychopy/programming-tips.html">
<meta property="og:description" content="Below are some tips about writing and reading the code. Some may sound cryptic when you read them for the first time (they will become clear once we cover the necessary material). Some will feel...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 3 Programming tips and tricks | Writing games with Python and PsychoPy">
<meta name="twitter:description" content="Below are some tips about writing and reading the code. Some may sound cryptic when you read them for the first time (they will become clear once we cover the necessary material). Some will feel...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Writing games with Python and PsychoPy</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="software.html"><span class="header-section-number">2</span> Software</a></li>
<li><a class="active" href="programming-tips.html"><span class="header-section-number">3</span> Programming tips and tricks</a></li>
<li><a class="" href="python-basics.html"><span class="header-section-number">4</span> Python basics</a></li>
<li><a class="" href="guess-the-number-single-round.html"><span class="header-section-number">5</span> Guess the Number: a single round edition</a></li>
<li><a class="" href="guess-the-number-multi-round.html"><span class="header-section-number">6</span> Guess the Number: a multi round edition</a></li>
<li><a class="" href="guess-the-number-ai.html"><span class="header-section-number">7</span> Guess the Number: AI takes a turn</a></li>
<li><a class="" href="psychopy-basics.html"><span class="header-section-number">8</span> Gettings started with PsychoPy</a></li>
<li><a class="" href="whack-a-mole.html"><span class="header-section-number">9</span> Whack-a-Mole</a></li>
<li><a class="" href="memory-game.html"><span class="header-section-number">10</span> Memory game</a></li>
<li><a class="" href="christmas-special.html"><span class="header-section-number">11</span> Christmas special</a></li>
<li><a class="" href="flappy-bird.html"><span class="header-section-number">12</span> Flappy Bird</a></li>
<li><a class="" href="seminar-02-06.html"><span class="header-section-number">13</span> Guitar Hero: staircase and iterator functions</a></li>
<li><a class="" href="the-snake.html"><span class="header-section-number">14</span> The Snake</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="programming-tips" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Programming tips and tricks<a class="anchor" aria-label="anchor" href="#programming-tips"><i class="fas fa-link"></i></a>
</h1>
<p>Below are some tips about writing and reading the code. Some may sound cryptic when you read them for the first time (they will become clear once we cover the necessary material). Some will feel like an overkill for simple projects that we will be implementing. I suggest that you read this section casually the very first time but return to it frequently once we start to program in earnest. Unfortunately, these tricks won’t work it you do not use them! So you should <em>always</em> use them and they should become your <em>good habits</em>, like using a seat belt. The seat belt does nothing useful on most (hopefully, all) days but you wear it because it might suddenly and very urgently become extremely useful and you can never be sure when this will happen. Same with coding. Quite often you will be tempted to write “quick-n-dirty” code because this is just a “simple test”, temporary solution, a prototype, a pilot experiment, etc. But, as they say in Russia “There is nothing more permanent than a temporary solution”. More often than not, you will find that your toy code grew into a full blown experiment and it is a mess. Or you want to come back to that pilot experiment you did a few months ago but realize that it is easier to start from scratch than to understand how that monster works<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Happened to me more often than I dare to admit.&lt;/p&gt;"><sup>3</sup></a>. Thus, resist the temptation! Form the good habits and you future-you will be very grateful!</p>
<div id="writing-tips" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Writing the code<a class="anchor" aria-label="anchor" href="#writing-tips"><i class="fas fa-link"></i></a>
</h2>
<div id="use-a-linter" class="section level3" number="3.1.1">
<h3>
<span class="header-section-number">3.1.1</span> Use a linter<a class="anchor" aria-label="anchor" href="#use-a-linter"><i class="fas fa-link"></i></a>
</h3>
<p>Linter is a program that analyses your code <em>style</em> and highlights any issues it finds: spaces where should be none, no spaces where should be some, wrong names, overly long lines, etc. These do not affect how the code runs but following linter’s advice results in a consistent standard if boring-looking<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;“Boring is Good!”, see “The Hitman’s Bodyguard” movie.&lt;/p&gt;"><sup>4</sup></a> Python code. Try to address all the problems that the linter raised. However, use your better judgment because sometimes lines that are longer than linter would prefer are more readable than two shorter ones. Similarly, a “bad” variable name by linter standards can be a meaningful name for a psychologist. Remember, your code is for people, not for the linter.</p>
</div>
<div id="document-your-code" class="section level3" number="3.1.2">
<h3>
<span class="header-section-number">3.1.2</span> Document your code<a class="anchor" aria-label="anchor" href="#document-your-code"><i class="fas fa-link"></i></a>
</h3>
<p>Every time you create a new file: document it and update the documentation whenever you add/change/delete new functions or classes. Every time your create a new function: document it. New class: document it. New constant: unless it is super clear from the name alone, document it. You will learn a <a href="https://numpydoc.readthedocs.io/en/latest/format.html">NumPy</a> way of doing this in the book.</p>
<p>I cannot stress how important documenting your code is. VS Code (an editor that we will use) is smart enough to parse NumPy docstring, so it will show this help to you whenever you use your own functions (helps you to help you!). More importantly, writing documentation forces you to think and formulate (in human language!) what the function or class is doing, what type the arguments / attributes / methods are, what is the range of valid values, what are the defaults, what should a function return, etc. More often than not, you will realize that you have overlooked some important detail that may not be apparent from the code itself.</p>
</div>
<div id="add-some-air" class="section level3" number="3.1.3">
<h3>
<span class="header-section-number">3.1.3</span> Add some air<a class="anchor" aria-label="anchor" href="#add-some-air"><i class="fas fa-link"></i></a>
</h3>
<p>Separate chunks of code with some empty lines. Think paragraphs in the normal text. You wouldn’t want your book to be a single paragraph nightmare? Put a comment before each chunk that explains <em>what</em> it does but not <em>how</em> it does it. E.g., in our typical PsychoPy-based game there will be a point when we draw all stimuli and redraw the window. That is a nice self-contained chunk that can be described as <code># drawing all stimuli</code>. The code provides details on what exactly is drawn, what is the drawing order, etc. But that single comment will help you to understand what this chunk is about and whether it is relevant for you at the moment. Same goes for <code># processing key presses</code> or <code># checking gameover conditions</code>, etc. But be careful and make sure that the comment describes the code correctly. E.g., if the comment says <code># drawing all stimuli</code> where should be no stimuli-drawing code anywhere else and no code that does something else!</p>
</div>
<div id="write-your-code-one-teeny-tiny-step-a-time" class="section level3" number="3.1.4">
<h3>
<span class="header-section-number">3.1.4</span> Write your code one teeny-tiny step a time<a class="anchor" aria-label="anchor" href="#write-your-code-one-teeny-tiny-step-a-time"><i class="fas fa-link"></i></a>
</h3>
<p>Your motto should be “slow but steady”. This is the way I will guide you through the games. Always start with a something extremely simple like a static rectangle or image. Make sure it works. Add a minor functionality: Change in color, position, another rectangle, storing it as an attribute, etc. Make sure it works. Never go to the next step unless you fully understand what your current code is doing and you are 100% certain<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Seriously, 100%! If you have even a shadow of a doubt, check again. That shadow will grow and make you progressively uncertain about your code.&lt;/p&gt;"><sup>5</sup></a> that it behaves as it should. This tortoise-speed approach may feel silly and overly slow but it is still faster than writing a large chunk of code and then trying to make it work. It is much easier to solve simple problems one at a time than a lot of them simultaneously.</p>
</div>
<div id="there-is-nothing-wrong-with-stackoverflow" class="section level3" number="3.1.5">
<h3>
<span class="header-section-number">3.1.5</span> There is nothing wrong with StackOverflow<a class="anchor" aria-label="anchor" href="#there-is-nothing-wrong-with-stackoverflow"><i class="fas fa-link"></i></a>
</h3>
<p>Yes, you can always try to find a solution to your problem on StackOverflow<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;However, if you are doing the seminar, ask me first!&lt;/p&gt;"><sup>6</sup></a>. I do it all the time! However, you should use the provided solution <em>only if you understand it</em>! Do not copy-paste the code that <em>seems</em> to solve a problem like yours. If you do that and you are lucky, it might work. Or, again if you are lucky, it won’t work in an obvious manner. But if you are not so lucky, it will (sometimes) work incorrectly in a subtle way. And, since you did not really know what the code was doing when you pasted it, you will be even more confused. So use StackOverflow as a source of knowledge, not as a source of copy-pastable code!</p>
<p>## Reading the code {#reading-tips}
Reading code is easy because computers are dumb and you are smart. This means that instructions you give the computer must necessarily be very simple and, therefore, are very easy to understand for a human. Unfortunately, reading code is also hard because computers are dumb and you are smart. Your are so smart that you don’t even need to read the entire code to understand what it is doing, you just read the key bits and fill in the gaps. Unfortunately, this means that you will tend to read over mistakes. This is not unique to programming, if you ever proofraed a text, you now how hard it is to find tipos. Your brain corrects them on the fly using the context and you read the word as it should be, not as it is actually written<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Tip: Read your text one sentence at a time starting from the back or read one random sentence at a time. This breaks the flow of the text and helps you concentrate on words rather than on the meaning and the story.&lt;/p&gt;"><sup>7</sup></a>.</p>
<p>My experience with programming in general and on this seminar in particular is that most problems you get stuck with are simple to be point of being dumb and obvious in retrospect<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Hindsight is always 20/20!&lt;/p&gt;"><sup>8</sup></a>. Do not despair! It is not you, but just a consequence of how wonderfully your brain is wired for pattern-recognition. Below are several suggestions that could help you to make reading code more robust.</p>
</div>
<div id="think-like-a-computer" class="section level3" number="3.1.6">
<h3>
<span class="header-section-number">3.1.6</span> Think like a computer<a class="anchor" aria-label="anchor" href="#think-like-a-computer"><i class="fas fa-link"></i></a>
</h3>
<p>Read the code line-by-line and “execute” it the way the compute would. Use pen-and-paper to keep the track of variables. Trace which chunks of code can be reached and when. Slow yourself down and make sure you understand each line and are able to keep track of the variables. Once you do that it will be easy to spot a mistake.</p>
</div>
<div id="pretend-that-youve-never-seen-this-code-in-your-life" class="section level3" number="3.1.7">
<h3>
<span class="header-section-number">3.1.7</span> Pretend that you’ve never seen this code in your life<a class="anchor" aria-label="anchor" href="#pretend-that-youve-never-seen-this-code-in-your-life"><i class="fas fa-link"></i></a>
</h3>
<p>Assume that you have no idea what the code is doing. As I wrote, quite often you <em>literally</em> do not see a mistake because your brain fills-in details and bends the reality to match your expectations. You <em>know</em> what this chunk of code should be doing, so instead of reading it you skim through it and, unless it looks obviously terribly wrong, assume that it does what it should. Turning your expectations off is hard but is immensely helpful.</p>
</div>
<div id="do-not-search-only-under-the-street-lamp" class="section level3" number="3.1.8">
<h3>
<span class="header-section-number">3.1.8</span> Do not search only under the street lamp<a class="anchor" aria-label="anchor" href="#do-not-search-only-under-the-street-lamp"><i class="fas fa-link"></i></a>
</h3>
<p>Whenever you are using some new code or need to implement something that feels complicated and your code does not work as it should, you will tend to assume that a problem is with the new fancy code. Simply because it is new, fancy, and complicated. But, in my experience, the error will typically hide in plain sight in the simpler “trivial” code nearby which you never properly look at, because it is simple and trivial. Check everything, not just the places where you would expect to have made a mistake.</p>
</div>
<div id="use-the-debugger" class="section level3" number="3.1.9">
<h3>
<span class="header-section-number">3.1.9</span> Use the debugger<a class="anchor" aria-label="anchor" href="#use-the-debugger"><i class="fas fa-link"></i></a>
</h3>
<p>In the book, you will learn how to pause an execution of your game, so you can investigate its state. Use this knowledge! Put breakpoints and execute the code step-by-step. Check values of variables using “Watch” tab. Use debug console to check whether functions return results that they should. For complex conditions or mathematical formulas, split them into small bits, copy and execute these bits in the debug console and check whether numbers add up. Make sure that a code chunk checks out and then proceed to analyze the next one. Debugging is particularly helpful to identify the code that is not reached or reached at the wrong moment.</p>
</div>
</div>
<div id="zen-of-python" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Zen of Python<a class="anchor" aria-label="anchor" href="#zen-of-python"><i class="fas fa-link"></i></a>
</h2>
<p>I found <a href="https://www.python.org/dev/peps/pep-0020/">Zen of Python</a> to be good inspiration on how to approach programming.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="software.html"><span class="header-section-number">2</span> Software</a></div>
<div class="next"><a href="python-basics.html"><span class="header-section-number">4</span> Python basics</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#programming-tips"><span class="header-section-number">3</span> Programming tips and tricks</a></li>
<li>
<a class="nav-link" href="#writing-tips"><span class="header-section-number">3.1</span> Writing the code</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#use-a-linter"><span class="header-section-number">3.1.1</span> Use a linter</a></li>
<li><a class="nav-link" href="#document-your-code"><span class="header-section-number">3.1.2</span> Document your code</a></li>
<li><a class="nav-link" href="#add-some-air"><span class="header-section-number">3.1.3</span> Add some air</a></li>
<li><a class="nav-link" href="#write-your-code-one-teeny-tiny-step-a-time"><span class="header-section-number">3.1.4</span> Write your code one teeny-tiny step a time</a></li>
<li><a class="nav-link" href="#there-is-nothing-wrong-with-stackoverflow"><span class="header-section-number">3.1.5</span> There is nothing wrong with StackOverflow</a></li>
<li><a class="nav-link" href="#think-like-a-computer"><span class="header-section-number">3.1.6</span> Think like a computer</a></li>
<li><a class="nav-link" href="#pretend-that-youve-never-seen-this-code-in-your-life"><span class="header-section-number">3.1.7</span> Pretend that you’ve never seen this code in your life</a></li>
<li><a class="nav-link" href="#do-not-search-only-under-the-street-lamp"><span class="header-section-number">3.1.8</span> Do not search only under the street lamp</a></li>
<li><a class="nav-link" href="#use-the-debugger"><span class="header-section-number">3.1.9</span> Use the debugger</a></li>
</ul>
</li>
<li><a class="nav-link" href="#zen-of-python"><span class="header-section-number">3.2</span> Zen of Python</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/blob/master/01-programming-tips.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/edit/master/01-programming-tips.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Writing games with Python and PsychoPy</strong>" was written by Alexander (Sasha) Pastukhov. It was last built on 2022-04-26.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
