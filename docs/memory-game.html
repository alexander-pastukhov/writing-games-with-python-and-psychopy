<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 10 Memory game | Writing games with Python and PsychoPy</title>
<meta name="author" content="Alexander (Sasha) Pastukhov">
<meta name="description" content="Today, you will write a good old Memory game: Eight cards are lying “face down”, you can turn any two of them and, if they are identical, they are taken off the table. If they are different, the...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 10 Memory game | Writing games with Python and PsychoPy">
<meta property="og:type" content="book">
<meta property="og:url" content="https://alexander-pastukhov.github.io/writing-games-with-python-and-psychopy/memory-game.html">
<meta property="og:description" content="Today, you will write a good old Memory game: Eight cards are lying “face down”, you can turn any two of them and, if they are identical, they are taken off the table. If they are different, the...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 10 Memory game | Writing games with Python and PsychoPy">
<meta name="twitter:description" content="Today, you will write a good old Memory game: Eight cards are lying “face down”, you can turn any two of them and, if they are identical, they are taken off the table. If they are different, the...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Writing games with Python and PsychoPy</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="software.html"><span class="header-section-number">2</span> Software</a></li>
<li><a class="" href="programming-tips.html"><span class="header-section-number">3</span> Programming tips and tricks</a></li>
<li><a class="" href="python-basics.html"><span class="header-section-number">4</span> Python basics</a></li>
<li><a class="" href="guess-the-number-single-round.html"><span class="header-section-number">5</span> Guess the Number: a single round edition</a></li>
<li><a class="" href="guess-the-number-multi-round.html"><span class="header-section-number">6</span> Guess the Number: a multi round edition</a></li>
<li><a class="" href="guess-the-number-ai.html"><span class="header-section-number">7</span> Guess the Number: AI takes a turn</a></li>
<li><a class="" href="psychopy-basics.html"><span class="header-section-number">8</span> Gettings started with PsychoPy</a></li>
<li><a class="" href="whack-a-mole.html"><span class="header-section-number">9</span> Whack-a-Mole</a></li>
<li><a class="active" href="memory-game.html"><span class="header-section-number">10</span> Memory game</a></li>
<li><a class="" href="christmas-special.html"><span class="header-section-number">11</span> Christmas special</a></li>
<li><a class="" href="flappy-bird.html"><span class="header-section-number">12</span> Flappy Bird</a></li>
<li><a class="" href="seminar-02-06.html"><span class="header-section-number">13</span> Guitar Hero: staircase and iterator functions</a></li>
<li><a class="" href="the-snake.html"><span class="header-section-number">14</span> The Snake</a></li>
<li><a class="" href="moon-lander.html"><span class="header-section-number">15</span> Moon lander</a></li>
<li><a class="" href="space-invaders.html"><span class="header-section-number">16</span> Space invaders: mixins and duck typing</a></li>
<li><a class="" href="game-of-life-numpy.html"><span class="header-section-number">17</span> Game of life (NumPy)</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="memory-game" class="section level1" number="10">
<h1>
<span class="header-section-number">10</span> Memory game<a class="anchor" aria-label="anchor" href="#memory-game"><i class="fas fa-link"></i></a>
</h1>
<p>Today, you will write a good old <em>Memory</em> game: Eight cards are lying “face down”, you can turn any two of them and, if they are identical, they are taken off the table. If they are different, the cards turn “face down” again.</p>
<div style="text-align:center;">
<video controls><source src="videos/memory.m4v" type="video/mp4"></source></video>
</div>
<p>Before we start, create a new folder for the game and create a subfolder <em>Images</em> in it. Then, download <a href="material/chicken.zip">images of chicken</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;The images are courtesy of &lt;a href="https://openclipart.org/artist/Firkin"&gt;Kevin David Pointon&lt;/a&gt; and were downloaded
from &lt;a href="https://openclipart.org/"&gt;OpenClipart&lt;/a&gt;. They are &lt;a href="https://creativecommons.org/publicdomain/zero/1.0/"&gt;public domain&lt;/a&gt; and can be used and distributed freely.&lt;/p&gt;'><sup>48</sup></a> that we will use for the game and unzip them into <em>Images</em> subfolder. Also, grab the <a href="notebooks/Memory%20game.ipynb">exercise notebook</a>!</p>
<div id="chapter-concepts-5" class="section level2" number="10.1">
<h2>
<span class="header-section-number">10.1</span> Chapter concepts<a class="anchor" aria-label="anchor" href="#chapter-concepts-5"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<a href="memory-game.html#mutable-objects">Mutable</a> vs. <a href="memory-game.html#variables-as-boxes-immutable-objects">immutable</a> objects</li>
<li>Showing <a href="memory-game.html#imagestim">images</a>.</li>
<li>Working with files via <a href="memory-game.html#os-library">os</a> library.</li>
<li>Using other <a href="memory-game.html#dictionaries">dictionary</a> containers.</li>
<li>
<a href="memory-game.html#list-operations">List operations</a>.</li>
<li>Looping over both index and item via list <a href="memory-game.html#enumerate">enumeration</a>.</li>
</ul>
</div>
<div id="variables-as-boxes-immutable-objects" class="section level2" number="10.2">
<h2>
<span class="header-section-number">10.2</span> Variables as Boxes (immutable objects)<a class="anchor" aria-label="anchor" href="#variables-as-boxes-immutable-objects"><i class="fas fa-link"></i></a>
</h2>
<p>In this game, you will use <a href="memory-game.html#dictionaries">dictionaries</a>. These are <em>mutable</em>, like <a href="whack-a-mole.html#lists">lists</a> in constrant to “normal” <em>immutable</em> values (integers, floats, strings). You need to learn about this distinction as these two kinds of objects (values) behave very differently under some circumstances, which is both good (power!) and bad (weird unexpected behavior!) news.</p>
<p>You may remember the <em>variable-as-a-box</em> metaphor that I used it to introduce <a href="python-basics.html#variables">variables</a>. In short, a variable can be thought of as a “box” with a variable name written on it and a value being stored “inside”. When you use this value or assign it to a different variable, you can assume that Python <em>makes a copy</em> of it<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Not really, but this makes it easier to understand.&lt;/p&gt;"><sup>49</sup></a> and puts that <em>copy</em> into a different variable “box”. When you <em>replace</em> value of a variable, you take out the old value, destroy it (by throwing it into a nearest black hole, I assume), create a new one, and put it into the variable “box”. When you <em>change</em> a variable based on its current state, the same thing happens. You take out the value, create a new value (by adding to the original one or doing some other operation), destroy the old one, and put the new one back into the variable “box”. The important point is that although a <em>variable</em> can have different immutable values (we <a href="whack-a-mole.html#random-mole">changed</a> <code>imole</code> variable on every round), the immutable <em>value</em> itself never changes. It gets <em>replaced</em> with another immutable value but <em>never changes</em><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;A metaphor attempt: You can wear different shirts, so your &lt;em&gt;look&lt;/em&gt; (variable) changes but each individual shirt (potential values) remains the same (we ignore the wear and tear here) irrespective of whether your are wearing it (value is assigned to a variable) or not.&lt;/p&gt;"><sup>50</sup></a>.</p>
<p>The box metaphor explains why the <a href="guess-the-number-ai.html#scopes-for-immutable-values">scopes</a> work the way they do. Each scope has its own set of boxes and whenever you pass information between scopes, e.g., from a global script to a function, a copy of a value (from a variable) is created and put into a new box (e.g., a parameter) inside the function. When a function returns a value, it is copied and put in one of the boxes in the global script (variable you assigned the returned value to), etc.</p>
<p>However, this is true only for <em>immutable</em> objects (values) such as numbers, strings, logical values, etc. but also <a href="https://docs.python.org/3/library/stdtypes.html?highlight=tuple#tuple">tuples</a> (see below for what these are). As you could have guessed from the name, this means that there are other <em>mutable</em> objects and they behave very differently.</p>
</div>
<div id="mutable-objects" class="section level2" number="10.3">
<h2>
<span class="header-section-number">10.3</span> Variables as post-it stickers (mutable objects)<a class="anchor" aria-label="anchor" href="#mutable-objects"><i class="fas fa-link"></i></a>
</h2>
<p>Mutable objects are lists, dictionaries<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Coming up shortly!&lt;/p&gt;"><sup>51</sup></a>, and classes, i.e., things that can change. The key difference is that <em>immutable</em> objects can be thought as fixed in their size. A number takes up that many bytes to store, same goes for a given string (although a different string would require more or fewer bytes). Still, they do not change, they are created and destroyed when unneeded but never truly updated.</p>
<p><em>Mutable</em> objects can be changed<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Building on the looks metaphor: You can change your look by using a different (immutable) shirt or by &lt;em&gt;changing&lt;/em&gt; your haircut. You hair is mutable, you do not wear a different one on different days to look different, you need to modify it to look different.&lt;/p&gt;"><sup>52</sup></a>. For example, you can add elements to your list, or remove them, or shuffle them. Same goes for <a href="https://docs.python.org/3/tutorial/datastructures.html?highlight=dictionary#dictionaries">dictionaries</a>. Making such object <em>immutable</em> would be computationally inefficient: Every time you add a value a (long) list is destroyed and recreated with just that one additional value. Which is why Python simply <em>updates</em> the original object. For further computation efficiency, these objects are not copied when you assign them to a different variable or use as a parameter value but <em>passed by reference</em>. This means that the variable is no longer a “box” but a “sticker” you put on an object (a list, a dictionary). And you can put as many stickers on an object as you want <em>and it still will be the same object</em>!</p>
<p>What on Earth do I mean? Keeping in mind that a variable is just a sticker (one of many) for a mutable object, try figuring out what will be the output below:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb77-1"><a href="memory-game.html#cb77-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb77-2"><a href="memory-game.html#cb77-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> x</span>
<span id="cb77-3"><a href="memory-game.html#cb77-3" aria-hidden="true" tabindex="-1"></a>y.append(<span class="dv">4</span>)</span>
<span id="cb77-4"><a href="memory-game.html#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span></code></pre></div>
<div class="rmdnote practice">
<p>Do exercise #1.</p>
</div>
<p>Huh? That is precisely what I meant with “stickers on the same object”. First, we create a list and put an <code>x</code> sticker on it. Then, we assign <em>the same list</em> to <code>y</code>, in other words, we put a <code>y</code> sticker on the same list. Since both <code>x</code> and <code>y</code> are stickers on the <em>same</em> object, they are, effectively, synonyms. In that specific situation, once you set <code>x = y</code>, it does not matter which variable name you use to change <em>the</em> object, they are just two stickers hanging side-by-side on the <em>same</em> list. Again, just a reminder, this is <em>not</em> what would happen for <em>immutable</em> values, like numbers, where things would behave the way you expect them to behave.</p>
<p>This variable-as-a-sticker, a.k.a. “passing value by reference”, has very important implications for function calls, as it breaks your scope without ever giving you a warning. Look at the code below and try figuring out what the output will be.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb78-1"><a href="memory-game.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> change_it(y):</span>
<span id="cb78-2"><a href="memory-game.html#cb78-2" aria-hidden="true" tabindex="-1"></a>    y.append(<span class="dv">4</span>)</span>
<span id="cb78-3"><a href="memory-game.html#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="memory-game.html#cb78-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb78-5"><a href="memory-game.html#cb78-5" aria-hidden="true" tabindex="-1"></a>change_it(x)</span>
<span id="cb78-6"><a href="memory-game.html#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)</span></code></pre></div>
<div class="rmdnote practice">
<p>Do exercise #2.</p>
</div>
<p>How did we manage to modify a <em>global</em> variable from inside the function? Didn’t we change the <em>local</em> parameter of the function? Yep, that is exactly the problem with passing by reference. Your function parameter is yet another sticker on the <em>same</em> object, so even though it <em>looks</em> like you do not need to worry about global variables (that’s why you wrote the function and learned about scopes!), you still do. If you are perplexed by this, you are in a good company. This is one of the most unexpected and confusing bits in Python that routinely catches people<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Well, at least me!&lt;/p&gt;"><sup>53</sup></a> by surprise. Let us do a few more exercises, before I show you how to solve the scope problem for mutable objects.</p>
<div class="rmdnote practice">
<p>Do exercise #3.</p>
</div>
</div>
<div id="tuple" class="section level2" number="10.4">
<h2>
<span class="header-section-number">10.4</span> Tuple: a frozen list<a class="anchor" aria-label="anchor" href="#tuple"><i class="fas fa-link"></i></a>
</h2>
<p>The wise people who created Python were acutely aware of the problem that the <em>variable-as-a-sticker</em> creates. Which is why, they added an <strong>immutable</strong> version of a list, called a <a href="https://docs.python.org/3/library/stdtypes.html?highlight=tuple#tuple">tuple</a>. It is a “frozen” list of values, which you can loop over, access its items by index, or figure out how many items it has, but you <em>cannot modify it</em>. No appending, removing, replacing values, etc. For you this means that a variable with a frozen list is a box rather than a sticker and that it behaves just like any other “normal” <strong>immutable</strong> object. You can create a <code>tuple</code> by using round brackets.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb79-1"><a href="memory-game.html#cb79-1" aria-hidden="true" tabindex="-1"></a>i_am_a_tuple <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<p>You can loop over it, e.g.,</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb80-1"><a href="memory-game.html#cb80-1" aria-hidden="true" tabindex="-1"></a>i_am_a_tuple <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb80-2"><a href="memory-game.html#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> number <span class="kw">in</span> i_am_a_tuple:</span>
<span id="cb80-3"><a href="memory-game.html#cb80-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(number)</span>
<span id="cb80-4"><a href="memory-game.html#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1</span></span>
<span id="cb80-5"><a href="memory-game.html#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2</span></span>
<span id="cb80-6"><a href="memory-game.html#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3</span></span></code></pre></div>
<p>but, as I said, appending will throw a mistake (try this code in a Jupyter Notebook)</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="memory-game.html#cb81-1" aria-hidden="true" tabindex="-1"></a>i_am_a_tuple <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb81-2"><a href="memory-game.html#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="memory-game.html#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="co"># throws AttributeError: 'tuple' object has no attribute 'append'</span></span>
<span id="cb81-4"><a href="memory-game.html#cb81-4" aria-hidden="true" tabindex="-1"></a>i_am_a_tuple.append(<span class="dv">4</span>)</span>
<span id="cb81-5"><a href="memory-game.html#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in py_call_impl(callable, dots$args, dots$keywords): AttributeError: 'tuple' object has no attribute 'append'</span></span></code></pre></div>
<p>Same goes for trying to change it</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb82-1"><a href="memory-game.html#cb82-1" aria-hidden="true" tabindex="-1"></a>i_am_a_tuple <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb82-2"><a href="memory-game.html#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="memory-game.html#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co"># throws TypeError: 'tuple' object does not support item assignment</span></span>
<span id="cb82-4"><a href="memory-game.html#cb82-4" aria-hidden="true" tabindex="-1"></a>i_am_a_tuple[<span class="dv">1</span>] <span class="op">=</span> <span class="dv">1</span> </span>
<span id="cb82-5"><a href="memory-game.html#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in py_call_impl(callable, dots$args, dots$keywords): TypeError: 'tuple' object does not support item assignment</span></span></code></pre></div>
<p>This means that when you need to pass a list of values to a function and you want them to have no link to the original variable, you should instead pass <em>a tuple of values</em> to the function. The function still has a list of values but the link to the original list object is now broken. You can turn a list into a tuple using <code>tuple()</code>. Keeping in mind that <code>tuple()</code> creates a frozen copy of the list, what will happen below?</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="memory-game.html#cb83-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb83-2"><a href="memory-game.html#cb83-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="bu">tuple</span>(x)</span>
<span id="cb83-3"><a href="memory-game.html#cb83-3" aria-hidden="true" tabindex="-1"></a>x.append(<span class="dv">4</span>)</span>
<span id="cb83-4"><a href="memory-game.html#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(y)</span></code></pre></div>
<div class="rmdnote practice">
<p>Do exercise #4.</p>
</div>
<p>As you probably figured out, when <code>y = tuple(x)</code>, Python creates <strong>a copy</strong> of the list values, freezes them (they are immutable now), and puts them into the “y” box. Hence, whatever you do to the original list, has no effect on the immutable “y”.</p>
<p>Conversely, you “unfreeze” a tuple by turning it into a list via <code><a href="https://rdrr.io/r/base/list.html">list()</a></code>. Please note that it creates <strong>a new list</strong>, which has no relation to any other existing list, even if values are the same or were originally taken from any of them!</p>
<div class="rmdnote practice">
<p>Do exercise #5.</p>
</div>
<p>Remember I just said that <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> creates a new list? This means that you can use it to create a copy of a list directly, without an intermediate tuple step. This way you can two <em>different</em> lists with <em>identical</em> values. You can also achieve the same results by slicing an entire list, e.g. <code>list(x)</code>, is the same as <code>x[:]</code>.</p>
<div class="rmdnote practice">
<p>Do exercise #6.</p>
</div>
<p>Here, <code>y = list(x)</code> created a new list (which was a carbon copy of the one with the “x” sticker on it) and the “y” sticker was put on that new list, while the “x” remained hanging on the original.</p>
<p>Confusing? You bet! If you feel overwhelmed by this whole immutable/mutable, tuple/list, copy/reference confusion, you are just being a normal human being. I understand the (computational) reasons for doing things this way, I am aware of this difference and how useful this can be but it still catches me by surprise from time to time!</p>
</div>
<div id="minimal-code" class="section level2" number="10.5">
<h2>
<span class="header-section-number">10.5</span> Minimal code<a class="anchor" aria-label="anchor" href="#minimal-code"><i class="fas fa-link"></i></a>
</h2>
<p>Enough of theory, let us get busy writing the game. As usual, let us start with a minimal code (try doing it from scratch instead of copy-pasting from the last game):</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb84-1"><a href="memory-game.html#cb84-1" aria-hidden="true" tabindex="-1"></a>importing psychopy modules that we need</span>
<span id="cb84-2"><a href="memory-game.html#cb84-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb84-3"><a href="memory-game.html#cb84-3" aria-hidden="true" tabindex="-1"></a>creating a window of a useful size <span class="kw">and</span> useful units</span>
<span id="cb84-4"><a href="memory-game.html#cb84-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-5"><a href="memory-game.html#cb84-5" aria-hidden="true" tabindex="-1"></a>waiting <span class="cf">for</span> a key press</span>
<span id="cb84-6"><a href="memory-game.html#cb84-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-7"><a href="memory-game.html#cb84-7" aria-hidden="true" tabindex="-1"></a>closing the window</span></code></pre></div>
<p>The first thing you need to decide on is the window size <em>in pixels</em> and which units would sizing and placing cards easier. Each chicken image is 240×400 pixels and, for the game, we need place for <em>exactly</em> 4×2 images, i.e. our window must be 4 cards wide and 2 cards high. Do not forget to document the file!</p>
<div class="rmdnote program">
<p>Put your code into <code>code01.py</code>.</p>
</div>
</div>
<div id="imagestim" class="section level2" number="10.6">
<h2>
<span class="header-section-number">10.6</span> Drawing an image<a class="anchor" aria-label="anchor" href="#imagestim"><i class="fas fa-link"></i></a>
</h2>
<p>We used (abstracta and boring) circles to represent moles but today we will use actual images of chicken (see instructions above on downloading them). Using an <a href="https://psychopy.org/api/visual/imagestim.html">image stimulus</a> in PsychoPy is very straightforward because it behaves very mcu like other visual stimuli you already know. First, you need to create an new object by calling <code>visual.ImageStim(...)</code>. You can find the complete list of parameters in the <a href="(https://psychopy.org/api/visual/imagestim.html)">documentation</a> but for our initial intents and purposes, we only need to pass three of them:</p>
<ul>
<li>our window variable: <code>win</code>.</li>
<li>image file name: <code>image="Images/r01.png"</code> (images are in a subfolder and therefore we need to use a relative path).</li>
<li>size: <code>size=(???, ???)</code>. That is one for you to compute. If you picked <a href="psychopy-basics.html#psychopy-units-norm">norm</a> units, as I did, then window is 2 units wide and 2 units high but for <a href="psychopy-basics.html#psychopy-units-height">height</a> it is 1 units height and <em>aspect-ratio</em> units wide. We want to have a 4×2 images, what is the size (both width and height) of each image in the units of your choice?</li>
</ul>
<p>Draw chicken image (it should appear at the center of the screen).</p>
<div class="rmdnote program">
<p>Put your code into <code>code02.py</code>.</p>
</div>
</div>
<div id="placing-an-image-index-to-position" class="section level2" number="10.7">
<h2>
<span class="header-section-number">10.7</span> Placing an image (index to position)<a class="anchor" aria-label="anchor" href="#placing-an-image-index-to-position"><i class="fas fa-link"></i></a>
</h2>
<p>By default, our image is placed at the center of the screen, which is a surprisingly useful default for a typical psychophysical experiment that shows stimuli at fixation (which is also, typically, at the center of the screen). However, we will need to draw eight images, each at its designated location. You need to create a function that takes an image index (it goes 0 to 7) and returns a list with pair of values with its location on the screen. Below is a sketch of how index correspond to the location. Note that image location (<a href="https://psychopy.org/api/visual/imagestim.html#psychopy.visual.ImageStim.pos%20attribute">pos</a> corresponds to the <em>center</em> of the image.</p>
<div class="figure">
<img src="images/memory-location-index.png" style="width:100.0%" alt=""><p class="caption">Card location index</p>
</div>
<p>Name the function <code>position_from_index</code>. It should take one argument (<code>index</code>) and return a list with <code>(&lt;x&gt;, &lt;y&gt;)</code> coordinates in the PsychoPy units (from now on I assume that these are <a href="psychopy-basics.html#psychopy-units-norm">norm</a>). You can then use this value for the <a href="https://psychopy.org/api/visual/imagestim.html#psychopy.visual.ImageStim.pos">pos</a> argument of the <a href="https://psychopy.org/api/visual/imagestim.html#imagestim">ImageStim()</a>.</p>
<p>The computation might look complicated, so let me get you started. How can you compute <em>x</em> coordinate for the <em>top</em> row? Concentrating on the top row alone makes things simpler because here the <em>column index</em> is the same as the overall index: The left-most column is 0, the next one is 1, etc. You need a simple algebra of <span class="math inline">\(x = a_x + b_x \cdot column\)</span>. You can easily deduce out both <span class="math inline">\(a_x\)</span> and <span class="math inline">\(b_x\)</span> if you figure out locations of the first and second cards by hand. Same goes for the <em>y</em> coordinate. Assuming that you know the <em>row</em>, which is either 0 (top row) or 1 (bottom row), you can compute <span class="math inline">\(y = a_y + b_y \cdot row\)</span>.</p>
<p>But, I hear you say, you do not have row and column indexes, only the overall index! To compute those you only need to keep in mind that each row has <em>four</em> cards. Then, you can make use of two special division operators: <a href="https://python-reference.readthedocs.io/en/latest/docs/operators/floor_division.html">floor division operator <code>//</code></a> and <a href="https://python-reference.readthedocs.io/en/latest/docs/operators/modulus.html">modulos, divison remainder <code>%</code></a> operators. The former returns only the integer part of the division, so that <code>4 // 3</code> is <code>1</code> (because 4/3 is 1.33333) and <code>1 // 4</code> is <code>0</code> (because 1/4 is 0.25). The latter returns the remaining integers, so that <code>4 % 3</code> is <code>1</code> and <code>1 % 4</code> is <code>0</code>.</p>
<p>My suggestion would be first to play with individual formulas in Jupyter Notebook, which makes it easier to try out (dividing) things and seeing the result, putting various values into formulas, etc. Once you are confident that the code is working, turn it into a function, document it, and put into a separate file (<em>utilities.py</em>, do not forget to put a comment at the top of the file as well!). You can then import it in the main script and use it to place the card. Try out different indexes and make sure that the card appears where it should. Remember, put a breakpoint and step through the program while watching variables, if things do not work as you expected.</p>
<div class="rmdnote program">
<p>Put <code>position_from_index</code> into <code>utilities.py</code>.<br>
Put update code into <code>code03.py</code></p>
</div>
</div>
<div id="backside-of-the-card" class="section level2" number="10.8">
<h2>
<span class="header-section-number">10.8</span> Backside of the card<a class="anchor" aria-label="anchor" href="#backside-of-the-card"><i class="fas fa-link"></i></a>
</h2>
<p>A chicken image is a card <em>face</em> but the game starts with the cards face down, so the player should see their backs. We will use a plain <a href="https://psychopy.org/api/visual/rect.html">rectangle</a> for as a backside. Pick a nice looking combination of <code>fillColor</code> (inside) and <code>lineColor</code> (contour) colors. Modify your code, to draw image (face of the card) and rectangle (back of the card) side-by-side (<em>e.g.</em>, if face is at position with index 0, rectangle should be at position 1 or 4). This way you can check that sizes match and that they are positioned correctly.</p>
<div class="rmdnote program">
<p>Put your code into <code>code04.py</code>.</p>
</div>
</div>
<div id="dictionaries" class="section level2" number="10.9">
<h2>
<span class="header-section-number">10.9</span> Dictionaries<a class="anchor" aria-label="anchor" href="#dictionaries"><i class="fas fa-link"></i></a>
</h2>
<p>Each card that we use has plenty of properties: A front (image), a backside (rectangle), and will have other properties such as which side should be shown or whether card is already taken off the screen. This calls for a container, so we could put all these relevant bits into a single variable. We <em>could</em> put into a list and use numerical indexes to access individual elements (e.g., <code>card[0]</code> would be front image but <code>card[2]</code> would indicate the active side) but indexes do not have meaning per se, so figuring out how <code>card[0]</code> is different from <code>card[2]</code> would be tricky. Python has a solution for cases like this: <a href="https://docs.python.org/3/library/stdtypes.html#dict">dictionaries</a>.</p>
<p>A dictionary is a container that stores information using <em>key : value</em> pairs. This is similar to how you look up a meaning or a translation (value) of a word (key) in a real dictionary, hence the name. To create a dictionary, you use <em>curly</em> brackets <code>{&lt;key1&gt; : &lt;value1&gt;}, {&lt;key2&gt; : &lt;value2&gt;, ...}</code> or create it via <code>dict(&lt;key1&gt;=&lt;value1&gt;, &lt;key2&gt;=&lt;value2&gt;, ...)</code>.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb85-1"><a href="memory-game.html#cb85-1" aria-hidden="true" tabindex="-1"></a>book <span class="op">=</span> {<span class="st">"Author"</span> : <span class="st">"Walter Moers"</span>,</span>
<span id="cb85-2"><a href="memory-game.html#cb85-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Title"</span>: <span class="st">"Die 13½ Leben des Käpt'n Blaubär"</span>}</span></code></pre></div>
<p>Once you created a dictionary, you can access or modify each field using its key, <em>e.g.</em> <code>print(book["Author"])</code> or <code>book["Author"] = "Moers, W."</code>. You can also add new fields by assigning values to them, e.g., <code>book["Publication year"] = 1999</code>. In short, you can use a combination of <code>&lt;dictionary-variable&gt;[&lt;key&gt;]</code> just like you would use a normal variable. This is similar to using the <code>list[index]</code> combination, the only difference is that <code>index</code> must be an integer, whereas <code>key</code> can be any hashable<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Immutable values are &lt;a href="https://docs.python.org/3/glossary.html#term-hashable"&gt;hashable&lt;/a&gt;, whereas mutable ones, like dictionaries and lists, are not. This is because mutable objects can &lt;em&gt;change&lt;/em&gt; while the program is running and therefore are unusable as a key. I.e., it is hard to match by a key, if the key can be different by the time you need to access the dictionary.&lt;/p&gt;'><sup>54</sup></a> value.</p>
</div>
<div id="using-a-dictionary-to-represent-a-card" class="section level2" number="10.10">
<h2>
<span class="header-section-number">10.10</span> Using a dictionary to represent a card<a class="anchor" aria-label="anchor" href="#using-a-dictionary-to-represent-a-card"><i class="fas fa-link"></i></a>
</h2>
<p>Our card has the following properties, so these will be key-value entries in a dictionary</p>
<ol style="list-style-type: decimal">
<li>
<code>"front"</code>: front side (image of a chicken).</li>
<li>
<code>"back"</code>: back side (rectangle).</li>
<li>
<code>"filename"</code>: identity on the card that we will use later to check whether the player opened two identical cards (their filenames match) or two different ones.</li>
<li>
<code>"side"</code>: can be either <code>"front"</code> or <code>"back"</code>, information about which side is up (drawn on the screen). Set it to <code>"back"</code> because, initially, all cards are face down. However, you can always set it temporarily to <code>"front"</code> to see how the cards are distributed.</li>
<li>
<code>"show"</code>: a logical value, set it to <code>True</code>. We will use it later to mark out cards that are off the table and are, therefore, not shown. Initially, all cards are shown, so all cards should be created with <code>"show"</code> being equal to <code>True</code>.</li>
</ol>
<p>Create a dictionary variable (name it <code>card</code>) and fill it with relevant values (use either <code>"front"</code> and “<code>back"</code> for <code>"side"</code> key) and stimuli (you can put PsychoPy stimuli into a dictionary just like we put them into a list earlier). Modify you code so that it draws the correct image based on the value of the <code>"side"</code> entry. Note that you <strong>do not need an if-statement for this</strong>! Think about a key you need to access these two sides and the value that you have in for the <code>"side"</code> key.</p>
<div class="rmdnote program">
<p>Put your code into <code>code05.py</code>.</p>
</div>
</div>
<div id="card-factory" class="section level2" number="10.11">
<h2>
<span class="header-section-number">10.11</span> Card factory<a class="anchor" aria-label="anchor" href="#card-factory"><i class="fas fa-link"></i></a>
</h2>
<p>You have the code to create one card but we need eight of them. This definitely calls for a function. Write a function (put it into <code>utilities.py</code> to declutter the main file) that takes three parameters</p>
<ol style="list-style-type: decimal">
<li>a window variable (you need it to create PsychoPy stimuli),</li>
<li>a filename,</li>
<li>card position index,</li>
</ol>
<p>and returns a dictionary, just like the one you created. You very much have the code, you only need to wrap it into a function and document it. Call function <code>create_card</code> and use it in the main script to create <code>card</code> dictionary. Think about libraries you will now need import in <em>utilities.py</em>.</p>
<div class="rmdnote program">
<p>Put <code>create_card</code> into <code>utilities.py</code>. <br>
Put code into <code>code06.py</code>.</p>
</div>
</div>
<div id="getting-a-list-of-files" class="section level2" number="10.12">
<h2>
<span class="header-section-number">10.12</span> Getting a list of files<a class="anchor" aria-label="anchor" href="#getting-a-list-of-files"><i class="fas fa-link"></i></a>
</h2>
<p>For a single card, we simply hard-coded the name of an image file, as well as its location. However, for a real game (or an experiment) we would like to be more flexible and automatically determine which files we have in the <em>Images</em> folder. This is covered by <a href="https://docs.python.org/3/library/os.html">os</a> library that contains various utilities for working with your operating system and, in particular, with files and directories. Specifically, <a href="https://docs.python.org/3/library/os.html#os.listdir">os.listdir(path=“.”)</a> returns a list with filenames of <em>all</em> the files in a folder specified by path. By default, it is a current path (<code>path="."</code>). However, you can use either a relative path - <code>os.listdir("Images")</code>, assuming that <em>Images</em> is a subfolder in your current directory - or an absolute path <code>os.listdir("E:/Teaching/Python/MemoryGame/Images")</code> (in my case)<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Use absolute path only if it is the only option, as it will almost certainly will break your code on another machine.&lt;/p&gt;"><sup>55</sup></a>.</p>
<p>Try this out in a Jupyter Notebook (do not forget to import the <a href="https://docs.python.org/3/library/os.html#module-os">os</a> library). You should get a list of 8 files that are coded as <em>[r|l][index].png</em>, where <em>r</em> or <em>l</em> denote a direction the chicken is looking. However, for our game we need only four images (4 × 2 = 8 cards). Therefore, we need to select a subset of them, e.g., four random cards, chicken looking to the left or to the right only. Here, let us work with chicken looking to the left, meaning that we need to pick only files that start with “l”. To make this filtering easier, we will use a cool Python trick called <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions">list comprehensions</a>.</p>
</div>
<div id="list-comprehension" class="section level2" number="10.13">
<h2>
<span class="header-section-number">10.13</span> List comprehension<a class="anchor" aria-label="anchor" href="#list-comprehension"><i class="fas fa-link"></i></a>
</h2>
<p>List comprehension provides an elegant and easy-to-read way to create, modify and/or filter elements of the list creating a new list. The general structure is</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb86-1"><a href="memory-game.html#cb86-1" aria-hidden="true" tabindex="-1"></a>new_list <span class="op">=</span> [<span class="op">&lt;</span>transform<span class="op">-</span>the<span class="op">-</span>item<span class="op">&gt;</span> <span class="cf">for</span> item <span class="kw">in</span> old_list <span class="cf">if</span> <span class="op">&lt;</span>condition<span class="op">-</span>given<span class="op">-</span>the<span class="op">-</span>item<span class="op">&gt;</span>]</span></code></pre></div>
<p>Let us look at examples to understand how it works. Imagine that you have a list <code>numbers = [1, 2, 3]</code> and you need increment each number by 1<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;A very arbitrary example!&lt;/p&gt;"><sup>56</sup></a>. You can do it by creating a new list and adding 1 to each item in the <transform-the-item> part:</transform-the-item></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb87-1"><a href="memory-game.html#cb87-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb87-2"><a href="memory-game.html#cb87-2" aria-hidden="true" tabindex="-1"></a>numbers_plus_1 <span class="op">=</span> [item <span class="op">+</span> <span class="dv">1</span> <span class="cf">for</span> item <span class="kw">in</span> numbers]</span></code></pre></div>
<p>Note that this is equivalent to</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb88-1"><a href="memory-game.html#cb88-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb88-2"><a href="memory-game.html#cb88-2" aria-hidden="true" tabindex="-1"></a>numbers_plus_1 <span class="op">=</span> []</span>
<span id="cb88-3"><a href="memory-game.html#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> item <span class="kw">in</span> numbers:</span>
<span id="cb88-4"><a href="memory-game.html#cb88-4" aria-hidden="true" tabindex="-1"></a>    numbers_plus_1.append(item <span class="op">+</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Or, imagine that you need to convert each item to a string. You can do it simply as</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb89-1"><a href="memory-game.html#cb89-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb89-2"><a href="memory-game.html#cb89-2" aria-hidden="true" tabindex="-1"></a>numbers_as_strings <span class="op">=</span> [<span class="bu">str</span>(item) <span class="cf">for</span> item <span class="kw">in</span> numbers]</span></code></pre></div>
<p>What would be an equivalent form using a normal for loop? Write both versions of code in Jupiter cells and check that the results are the same.</p>
<div class="rmdnote practice">
<p>Do exercise #7 in Jupyter notebook.</p>
</div>
<p>Now, implement the code below using list comprehension. Check that results match.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb90-1"><a href="memory-game.html#cb90-1" aria-hidden="true" tabindex="-1"></a>strings <span class="op">=</span> [<span class="st">'1'</span>, <span class="st">'2'</span>, <span class="st">'3'</span>]</span>
<span id="cb90-2"><a href="memory-game.html#cb90-2" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> []</span>
<span id="cb90-3"><a href="memory-game.html#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> astring <span class="kw">in</span> strings:</span>
<span id="cb90-4"><a href="memory-game.html#cb90-4" aria-hidden="true" tabindex="-1"></a>    numbers.append(<span class="bu">int</span>(astring) <span class="op">+</span> <span class="dv">10</span>)</span></code></pre></div>
<div class="rmdnote practice">
<p>Do exercise #8 in Jupyter notebook.</p>
</div>
<p>As noted above, you can also use a conditional statement to filter which items are passed to the new list. In our numbers example, we can retain numbers that are greater than 1</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb91-1"><a href="memory-game.html#cb91-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb91-2"><a href="memory-game.html#cb91-2" aria-hidden="true" tabindex="-1"></a>numbers_greater_than_1 <span class="op">=</span> [item <span class="cf">for</span> item <span class="kw">in</span> numbers <span class="cf">if</span> item <span class="op">&gt;</span> <span class="dv">1</span>]</span></code></pre></div>
<p>Sometimes, the same statement is written in three lines, instead of one, to make reading easier:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb92-1"><a href="memory-game.html#cb92-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb92-2"><a href="memory-game.html#cb92-2" aria-hidden="true" tabindex="-1"></a>numbers_greater_than_1 <span class="op">=</span> [item </span>
<span id="cb92-3"><a href="memory-game.html#cb92-3" aria-hidden="true" tabindex="-1"></a>                          <span class="cf">for</span> item <span class="kw">in</span> numbers</span>
<span id="cb92-4"><a href="memory-game.html#cb92-4" aria-hidden="true" tabindex="-1"></a>                          <span class="cf">if</span> item <span class="op">&gt;</span> <span class="dv">1</span>]</span></code></pre></div>
<p>You can of course combine the transformation and filtering in a single statement. Create code that filters out all items below 2 and adds 4 to them.</p>
<div class="rmdnote practice">
<p>Do exercise #9 in Jupyter notebook.</p>
</div>
</div>
<div id="getting-list-of-relevant-files" class="section level2" number="10.14">
<h2>
<span class="header-section-number">10.14</span> Getting list of relevant files<a class="anchor" aria-label="anchor" href="#getting-list-of-relevant-files"><i class="fas fa-link"></i></a>
</h2>
<p>Use list comprehension to create a list of files of chicken looking left, <em>i.e.</em> with filenames that start with “l”. Use <a href="https://docs.python.org/3/library/stdtypes.html#str.startswith"><your-string>.startswith()</your-string></a> to check whether it starts with “l”, store the list in <code>filenames</code> variable. Test you code in a Jupyter Notebook. You should get a list of four files.</p>
<div id="list-operations" class="section level3" number="10.14.1">
<h3>
<span class="header-section-number">10.14.1</span> List operations<a class="anchor" aria-label="anchor" href="#list-operations"><i class="fas fa-link"></i></a>
</h3>
<p>Our list consists of four unique filenames but in the game each card should appear twice. There are several ways of duplicating lists. Here, We will use this as a opportunity to learn about list operations. Python lists implement two operations:</p>
<ul>
<li>Adding two lists together: <code>&lt;list1&gt; + &lt;list2&gt;</code>.</li>
</ul>
<div class="sourceCode" id="cb93"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb93-1"><a href="memory-game.html#cb93-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb93-2"><a href="memory-game.html#cb93-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</span>
<span id="cb93-3"><a href="memory-game.html#cb93-3" aria-hidden="true" tabindex="-1"></a>a <span class="op">+</span> b</span>
<span id="cb93-4"><a href="memory-game.html#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1, 2, 3, 4, 5, 6]</span></span></code></pre></div>
<p>Note that this produces a <em>new</em> list and, therefore, that this is not equivalent to <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">extend</a> method <code>a.extend(b)</code>! The <code>+</code> creates a <em>new</em> list, <code>.extend()</code> extends the original list <code>a</code>.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;You will learn about practical implications of this later. For now, keep in mind that seemingly identical output might be fundamentally different underneath.&lt;/p&gt;"><sup>57</sup></a></p>
<ul>
<li>List replication:: <code>&lt;list&gt; * &lt;integer-value&gt;</code> creates a <em>new</em> list by replicating the original one <code>&lt;integer-value&gt;</code> times. For example:</li>
</ul>
<div class="sourceCode" id="cb94"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb94-1"><a href="memory-game.html#cb94-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb94-2"><a href="memory-game.html#cb94-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb94-3"><a href="memory-game.html#cb94-3" aria-hidden="true" tabindex="-1"></a>a <span class="op">*</span> b</span>
<span id="cb94-4"><a href="memory-game.html#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]</span></span></code></pre></div>
<p>Use either operation or <code>.extend()</code> method to create the list where each filename is repeated twice. Hint, you can apply list multiplication directly to the filenames list you created via list comprehension (so, replicate it in that same line). Try this code out in a Jupyter Notebook.</p>
</div>
</div>
<div id="enumerate" class="section level2" number="10.15">
<h2>
<span class="header-section-number">10.15</span> Looping over both index and item via list enumeration<a class="anchor" aria-label="anchor" href="#enumerate"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we have a list of filenames, we can create a list of cards out of it. Our dictionary function requires both index and filename. The latter is the <em>item</em> of the list, the former is the <em>index</em> of that item. You could for a for loop by build the index using <a href="whack-a-mole.html#range">range()</a> function but Python has a better solution for this: a <a href="https://docs.python.org/3/library/functions.html#enumerate">enumerate()</a> function! If, instead of iterating over a list, you iterate over <a href="https://docs.python.org/3/library/functions.html#enumerate">enumerate(<list>)</list></a>, you get a tuple<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;A list you cannot change, more on this later.&lt;/p&gt;"><sup>58</sup></a> with both <code>(index, value)</code>. Here is an example:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb95-1"><a href="memory-game.html#cb95-1" aria-hidden="true" tabindex="-1"></a>letters <span class="op">=</span> [<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>]</span>
<span id="cb95-2"><a href="memory-game.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> index, letter <span class="kw">in</span> <span class="bu">enumerate</span>(letters):</span>
<span id="cb95-3"><a href="memory-game.html#cb95-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'</span><span class="sc">%d</span><span class="st">: </span><span class="sc">%s</span><span class="st">'</span><span class="op">%</span>(index, letter))</span>
<span id="cb95-4"><a href="memory-game.html#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0: a</span></span>
<span id="cb95-5"><a href="memory-game.html#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1: b</span></span>
<span id="cb95-6"><a href="memory-game.html#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2: c</span></span></code></pre></div>
<p>And here is how you can use <a href="https://docs.python.org/3/library/functions.html#enumerate">enumerate()</a> for list comprehension.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb96-1"><a href="memory-game.html#cb96-1" aria-hidden="true" tabindex="-1"></a>letters <span class="op">=</span> [<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>]</span>
<span id="cb96-2"><a href="memory-game.html#cb96-2" aria-hidden="true" tabindex="-1"></a>[<span class="st">"</span><span class="sc">%d</span><span class="st">: </span><span class="sc">%s</span><span class="st">"</span><span class="op">%</span>(index, letter) <span class="cf">for</span> index, letter <span class="kw">in</span> <span class="bu">enumerate</span>(letters)]</span>
<span id="cb96-3"><a href="memory-game.html#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ['0: a', '1: b', '2: c']</span></span></code></pre></div>
</div>
<div id="os-library" class="section level2" number="10.16">
<h2>
<span class="header-section-number">10.16</span> Computing path<a class="anchor" aria-label="anchor" href="#os-library"><i class="fas fa-link"></i></a>
</h2>
<p>Originally, we specified image file name as <code>"Images/r01.png"</code>. This did the job but now we have many filenames that we need to join with the folder name to form a path string. On top of that, major operating systems disagree with Windows on where <code>/</code> (forward slash) or <code>\</code> (backslash) should be used for paths. To make your code platform-independent and, therefore, more robust, you need to construct a filename string using <a href="https://docs.python.org/3/library/os.path.html#os.path.join">join</a> function in <a href="https://docs.python.org/3/library/os.path.html">path</a> submodule. Thus, you can import <em>os</em> library and call it as <code>os.path.join(...)</code> (my personal preference). Or, you can use the same approach as for PsychoPy modules and import <code>path</code> from <em>os</em>, shortening the code. Or, of course, you can even import <em>join</em> directly but I find that lack of library information during use makes things harder to understand (even though the code is even shorter).</p>
<p><a href="https://docs.python.org/3/library/os.path.html#os.path.join">join</a> takes path components as parameters and joins them to match the OS format. E.g., <code>os.path.join("Python seminar", "Memory game", "memory01.py")</code> on Windows will return <code>'Python seminar\\Memory game\\memory01.py'</code>. As we need to load multiple files, the <em>filename</em> part will vary. However, the <em>folder</em> where the images are located will be the same and, as per usual, it would a good idea to turn it into a formally declared <a href="python-basics.html#constants">CONSTANT</a>.</p>
<p>Modify the <code>create_card</code> function so that it assumes that the <code>filename</code> parameter is just the filename with the folder name and, therefore, build the path by <a href="https://docs.python.org/3/library/os.path.html#os.path.join">join</a> it with the folder name (defined as a constant in the this module!). You now need to drop the <code>"Images/"</code> in the value that you pass to it. Test that the code works as before!</p>
<div class="rmdnote program">
<p>Update <code>create_card</code> in <code>utilities.py</code><br>
Put updated code into <code>code07.py</code>.</p>
</div>
</div>
<div id="a-deck-of-cards" class="section level2" number="10.17">
<h2>
<span class="header-section-number">10.17</span> A deck of cards<a class="anchor" aria-label="anchor" href="#a-deck-of-cards"><i class="fas fa-link"></i></a>
</h2>
<p>Let us put together all the code we need for figuring out cards’ filenames, duplicating them, and creating the cards using filename and index.</p>
<p>Copy the code for building a duplicated list of filenames that you tested in Jupyter notebook to your main script (that’ll be <code>code09.py</code>). Then, use enumerate and list comprehension over enumerated duplicate filenames to create <code>cards</code> (plural, replacing your singular <code>card</code> variable) via <code>create_card</code> function you wrote earlier. Update your drawing code to loop over and draw all cards. If your default is <code>"side"</code> is <code>"back"</code>, things will look pretty boring. Change that to ’“front”` for all cards to see their faces.</p>
<div class="rmdnote program">
<p>Put your code into <code>code08.py</code>.</p>
</div>
</div>
<div id="shuffle" class="section level2" number="10.18">
<h2>
<span class="header-section-number">10.18</span> Shuffling cards<a class="anchor" aria-label="anchor" href="#shuffle"><i class="fas fa-link"></i></a>
</h2>
<p>When you draw cards faces, you will notice that duplicating filenames list produces a very orderly sequence that makes playing the game easy (and boring). We need to <a href="https://docs.python.org/3/library/random.html#random.shuffle">shuffle()</a> the filename list <em>before</em> we create <code>cards</code>. Note that <a href="https://docs.python.org/3/library/random.html#random.shuffle">shuffle()</a> shuffles list item <em>in place</em> using the fact that the list is <a href="memory-game.html#mutable-objects">mutable</a>. That means you simply call the function and pass the list as an argument. The list gets modified, nothing is returned and nothing need to be assigned back of <code>filenames</code> variable.</p>
<div class="rmdnote program">
<p>Put your code into <code>code09.py</code>.</p>
</div>
</div>
<div id="lets-have-a-break" class="section level2" number="10.19">
<h2>
<span class="header-section-number">10.19</span> Let’s have a break!<a class="anchor" aria-label="anchor" href="#lets-have-a-break"><i class="fas fa-link"></i></a>
</h2>
<p>We covered a lot of ground, so it might be a good point to take a break and submit your code for my review.</p>
<hr>
</div>
<div id="adding-main-game-loop" class="section level2" number="10.20">
<h2>
<span class="header-section-number">10.20</span> Adding main game loop<a class="anchor" aria-label="anchor" href="#adding-main-game-loop"><i class="fas fa-link"></i></a>
</h2>
<p>At this point, we have a shuffle deck of cards that we show until a player presses a key. Modify the code to have the main presentation loop, similar to one we had when we experimented with <a href="psychopy-basics.html#psychopy-basics">PsychoPy</a> stimuli. Previously, we used a logical <code>gameover</code> variable to control the <a href="#id_#while-loop">while</a> loop. Here, we will have two reasons to exit the loop: the player pressed an <strong>escape</strong> key or they won the game. Therefore, let us use a <em>string</em> <code>game_state</code> variable that is initialized to <code>"running"</code>. Repeat the loop while the <code>game_state</code> is equal to <code>"running"</code> but change it <code>"abort"</code> if a player pressed <strong>escape</strong>. You also need to replace <a href="https://psychopy.org/api/event.html#psychopy.event.waitKeys">waitKeys</a>) with (<a href="https://psychopy.org/api/event.html#psychopy.event.getKeys">getKeys</a>.</p>
<div class="rmdnote program">
<p>Put your code into <code>code10.py</code>.</p>
</div>
</div>
<div id="psychopy-mouse" class="section level2" number="10.21">
<h2>
<span class="header-section-number">10.21</span> Detecting a mouse click<a class="anchor" aria-label="anchor" href="#psychopy-mouse"><i class="fas fa-link"></i></a>
</h2>
<p>In the game, the player will click on individual cards to turn them over. Before you can use a <a href="https://psychopy.org/api/event.html#psychopy.event.Mouse">mouse</a> in PsychoPy, you must create it via <code>mouse = event.Mouse(visible=True, win=win)</code> call, where <code>win</code> is the PsychoPy window you already created. This code should appear immediately below the line where you create the window itself.</p>
<p>Now, you can check whether the left button was pressed using <a href="https://psychopy.org/api/event.html#psychopy.event.Mouse.getPressed">mouse.getPressed()</a> method. It returns a three-item tuple with <code>True</code>/<code>False</code> values indicating whether each of the three buttons are <em>currently being pressed</em>. Use it the main loop, so that if the player presses <em>left</em> button (its index in the returned list is 0), you change <code>"side"</code> of the first card (so, the card with index 0 in the list) to <code>"front"</code>. This assumes that you initialized card with their <code>"back"</code> shown, of course. If you run the code and click <em>anywhere</em>, this should flip the first card.</p>
<p>Put the mouse-click-processing code <em>before</em> drawing cards. At the moment, it makes no difference but will be useful later on, as it will allow us to draw the latest state of the card (i.e., right after it was flipped by a player).</p>
<div class="rmdnote program">
<p>Put your code into <code>code11.py</code>.</p>
</div>
</div>
<div id="position-to-index" class="section level2" number="10.22">
<h2>
<span class="header-section-number">10.22</span> Position to index<a class="anchor" aria-label="anchor" href="#position-to-index"><i class="fas fa-link"></i></a>
</h2>
<p>Currently, the first card is flipped if you click <em>anywhere</em>. But the card you flip should be the card the player clicked on. For this we need to implement a function <code>index_from_position</code> that is an inverse of <code>position_from_index</code>. It should take an argument <code>pos</code>, which is a tuple of <code>(&lt;x&gt;, &lt;y&gt;)</code> values (a mouse position within the window), and return an <em>integer card index</em>. You have float values (with decimal points) in the <code>pos</code> argument (because it ranges from -1 to 1 for <a href="psychopy-basics.html#psychopy-units-norm">norm</a> units) and by default the values you compute from them will also be float. However, an index <em>must</em> be integer, so you will need to wrap it in <a href="https://docs.python.org/3/library/functions.html#int">int()</a> function call, before returning it.</p>
<p>Going backwards — from position to index — is (IMHO) easier. First, you need to think how you can convert an <em>x</em> coordinate (goes from -1 to 1) to a column index (goes from 0 to 3) given that you have 4 columns (draw a sketch on paper as it will make figuring out math simpler). Similarly, you translate <em>y</em> (from -1 to 1) into raw index given that there are only two rows. Once you know row and column index, you can compute the index itself, keeping in mind that there are four card in a row. As with <code>position_from_index</code>, I think it is easier to first play with formulas in a Jupyter Notebook, before turning the code into a function, documenting it, and putting it into <code>utilities.py</code>.</p>
<div class="rmdnote program">
<p>Put <code>index_from_position</code> into <code>utilities.py</code>.</p>
</div>
</div>
<div id="flip-a-selected-card-on-click" class="section level2" number="10.23">
<h2>
<span class="header-section-number">10.23</span> Flip a selected card on click<a class="anchor" aria-label="anchor" href="#flip-a-selected-card-on-click"><i class="fas fa-link"></i></a>
</h2>
<p>Now that you have function that returns an index from position (don’t forget to import it), you can flip the card that the player did clicked on. For this, you need to extend the card-flipping code inside the <em>if left-mouse button was pressed</em> code. Get the position of the mouse within the window by calling <a href="https://psychopy.org/api/event.html#psychopy.event.Mouse.getPos">mouse.getPos()</a>. This will return a pair of <code>(x, y)</code> values, which you can pass to your <code>index_from_position()</code> function. This, in turn will return the index of the card the player click on. Change the <code>"side"</code> of a card with that index to <code>"front"</code>. Test the code by turning different cards over, make sure that it is the card that you clicked on that gets turned. And a usual reminder, do not hesitate to put a breakpoint inside the if-statement to check the actual mouse position values and how they are translated into index, if things do not work.</p>
<div class="rmdnote program">
<p>Put your code into <code>code12.py</code>.</p>
</div>
</div>
<div id="keeping-track-of-open-cards" class="section level2" number="10.24">
<h2>
<span class="header-section-number">10.24</span> Keeping track of open cards<a class="anchor" aria-label="anchor" href="#keeping-track-of-open-cards"><i class="fas fa-link"></i></a>
</h2>
<p>In the actual game, a player is allowed to flop only <em>two</em> cards at a time. If they match, they are removed. If not, they are flipped to their backs again. This means we need to keep track of which and how many cards are face up. We can always figure this out by doing a list comprehension scanning for cards that have their <code>"side"</code> as <code>"face"</code>. But, mutable nature of dictionaries presents us with a simpler solution. We create a new list (let us call it <code>face_up</code>) and add cards to it. Mutable dictionary will not be copied but rather a reference to it will be present in both lists (same card dictionary will have two stickers on it, one from the <code>cards</code> list, one from <code>face_up</code> list). This way we know <em>which</em> cards are face up (those that are in the list) and we know how many (length of the <code>face_up</code> list).</p>
<p>However, you need to be careful not do add a card more than once (this will mess up our “how many cards are face up” number). There are two ways to do this. Assuming that <code>icard</code> is the index of the card, which you computed via <code>position_to_index()</code> from mouse position, you can simply check whether this card <code>"side"</code> is <code>"front"</code>. Alternatively, you can check whether this card is already <a href="https://docs.python.org/3/reference/expressions.html?highlight=list%20dictionary#in">in</a> the <code>face_up</code> list. Either way will tell you whether the card is face up. If it is not, you should set its <code>"side"</code> to <code>"front"</code> and add it to <code>face_up</code> list.</p>
<p>Implement this code, open a few cards. Then, use a breakpoint to pause the program and check that <code>face_up</code> list contains exactly these (this many) cards. If it has <em>more</em> then your face-up checks do not work. Put a breakpoint on them and step through the code to see what happens.</p>
<div class="rmdnote program">
<p>Put your code into <code>code13.py</code>.</p>
</div>
</div>
<div id="opening-only-two-cards" class="section level2" number="10.25">
<h2>
<span class="header-section-number">10.25</span> Opening only two cards<a class="anchor" aria-label="anchor" href="#opening-only-two-cards"><i class="fas fa-link"></i></a>
</h2>
<p>Now we need to check whether a player open already two cards. In your code, mouse checks should be <em>before</em> the drawing code. This means that cards are drawn face up immediately after a click. Once they are drawn, check the length of <code>face_up</code>, if it equal to 2:</p>
<ul>
<li>pause the program for ~0.5 s<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Pick the timing you like!&lt;/p&gt;"><sup>59</sup></a> via <a href="https://psychopy.org/api/clock.html#psychopy.clock.wait">wait</a>, so that the player can see both cards.</li>
<li>flip both cards back (i.e., set their <code>"side"</code> to <code>"back"</code>).</li>
<li>remove them from <code>face_up</code> list (see <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">.clear()</a> method).</li>
</ul>
<div class="rmdnote program">
<p>Put your code into <code>code14.py</code>.</p>
</div>
</div>
<div id="taking-a-matching-pair-off-the-table" class="section level2" number="10.26">
<h2>
<span class="header-section-number">10.26</span> Taking a matching pair off the table<a class="anchor" aria-label="anchor" href="#taking-a-matching-pair-off-the-table"><i class="fas fa-link"></i></a>
</h2>
<p>Our code turns cards back even you found a matching pair but we need to take them off the table. Once you have two cards in the <code>face_up</code> list, you need to check whether they have the same chicken on them, i.e., their filenames are the same. If they are, you set <code>"show"</code> field to <code>False</code>. If not, you set their <code>"side"</code> to <code>"back"</code> (what your code is already doing). Either way, you still need to pause the program to allow the player to see them and to clear <code>face_up</code> list (they are either off the table or face down, definitely not face up).</p>
<p>We also need to modify our code to handle <code>"show"</code> field correctly. First, modify your drawing code to draw only the cards that should be shown. Second, when handling mouse click, you need to check both that the card is not face up and that it is shown (otherwise you can “open” invisible cards).</p>
<div class="rmdnote program">
<p>Put your code into <code>code15.py</code>.</p>
</div>
</div>
<div id="game-over-once-all-the-cards-are-off-the-table" class="section level2" number="10.27">
<h2>
<span class="header-section-number">10.27</span> Game over once all the cards are off the table<a class="anchor" aria-label="anchor" href="#game-over-once-all-the-cards-are-off-the-table"><i class="fas fa-link"></i></a>
</h2>
<p>When your code works correctly, you can take all the card off the table, so that only the gray screen remains. However, that should be the point when the game finishes and congratulates you in your success. Write a function <code>remaining_cards</code> that will take the list with cards (i.e., our <code>cards</code> list) and will return how many cards are still shown (their <code>"show"</code> field is <code>True</code>). You definitely need a <a href="whack-a-mole.html#for-loop">for</a> for this but implementation can be very different. You could use an extra counter variable that you initialize to 0 and then increment by one (see <a href="https://docs.python.org/3/reference/simple_stmts.html#augmented-assignment-statements">+=</a> for a shortcut). Alternatively, you can use <a href="l#list-comprehension">list comprehensions</a> to filter out all cards that not shown and return the length of that list (a single line solution). Implement this function in <em>utilities.py</em> and use exit the loop by setting <code>game_state</code> to <code>"victory"</code>. After the loop, you can check the <code>game_state</code> variable and if the player was victorious, show a congratulatory message (<a href="https://psychopy.org/api/visual/textstim.html#psychopy.visual.TextStim">TextStim</a>, note that you don’t even need to create a variable for it, you can create an object and call <code>.draw()</code> on it, i.e., <code>visual.TextStim(...).draw()</code>) and wait for a key press before you close the window.</p>
<div class="rmdnote program">
<p>Put your code into <code>code16.py</code>.</p>
</div>
</div>
<div id="do-it-fast" class="section level2" number="10.28">
<h2>
<span class="header-section-number">10.28</span> Do it fast!<a class="anchor" aria-label="anchor" href="#do-it-fast"><i class="fas fa-link"></i></a>
</h2>
<p>There are different ways on how you can quantify speed in this game. You could look at the number of pairs the player had to open until clearing them up (the fewer, the better). Or, you could measure how fast the player did it in seconds. (Or use a combination of these two measures) Let us use the second option — total time taken — as an opportunity to learn about using PsychoPy <a href="https://psychopy.org/api/clock.html">clocks</a>.</p>
<p>The two classes you will be primarily interested in are <a href="https://psychopy.org/api/clock.html#psychopy.clock.Clock">Clock</a> and <a href="https://psychopy.org/api/clock.html#psychopy.clock.CountdownTimer">CountdownTimer</a>. The only difference between the two is that <a href="https://psychopy.org/api/clock.html#psychopy.clock.Clock">Clock</a> starts at (and <a href="https://psychopy.org/api/clock.html#psychopy.clock.Clock.reset">resets</a> to) 0 and start counting <em>elapsed</em> time, so its <a href="https://psychopy.org/api/clock.html#psychopy.clock.MonotonicClock.getTime">getTime()</a> method will return only <em>positive</em> values. In contrast, the <a href="https://psychopy.org/api/clock.html#psychopy.clock.CountdownTimer">CountdownTimer</a> start with (and resets to) a value you initialized it with and starts counting <em>remaining</em> time down. Importantly, it will not stop once it reaches 0, so you will eventually end up with <em>negative</em> remaining time. Thus, for <a href="https://psychopy.org/api/clock.html#psychopy.clock.Clock">Clock</a> you check whether the <em>elapsed</em> time is longer than some predefined value, whereas for <a href="https://psychopy.org/api/clock.html#psychopy.clock.CountdownTimer">CountdownTimer</a> you start at a predefined value and check that the <em>remaining</em> time is above zero. Note it is not guaranteed that the remaining time will be exactly zero. If anything, it is extremely unlikely that this will ever happen, so never test for an exact equality with zero<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;More generally, never compare float values to exact numbers. They are &lt;a href="http://www.lahey.com/float.htm"&gt;tricky&lt;/a&gt;, as the underlying representation &lt;a href="https://docs.python.org/3/tutorial/floatingpoint.html"&gt;does not guarantee&lt;/a&gt; that the computation will produce &lt;em&gt;exactly&lt;/em&gt; the number that it should: &lt;code&gt;.1 + .1 + .1 == .3&lt;/code&gt; is surprisingly &lt;code&gt;False&lt;/code&gt;, try it yourself&lt;/p&gt;'><sup>60</sup></a>!</p>
<p>Here, we are interested in the <em>elapsed</em> time, so <a href="https://psychopy.org/api/clock.html#psychopy.clock.Clock">Clock</a> is the obvious choice. Create a clock before the game loop and use the elapsed time in the congratulatory message.</p>
<div class="rmdnote program">
<p>Put your code into <code>code17.py</code>.</p>
</div>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="whack-a-mole.html"><span class="header-section-number">9</span> Whack-a-Mole</a></div>
<div class="next"><a href="christmas-special.html"><span class="header-section-number">11</span> Christmas special</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#memory-game"><span class="header-section-number">10</span> Memory game</a></li>
<li><a class="nav-link" href="#chapter-concepts-5"><span class="header-section-number">10.1</span> Chapter concepts</a></li>
<li><a class="nav-link" href="#variables-as-boxes-immutable-objects"><span class="header-section-number">10.2</span> Variables as Boxes (immutable objects)</a></li>
<li><a class="nav-link" href="#mutable-objects"><span class="header-section-number">10.3</span> Variables as post-it stickers (mutable objects)</a></li>
<li><a class="nav-link" href="#tuple"><span class="header-section-number">10.4</span> Tuple: a frozen list</a></li>
<li><a class="nav-link" href="#minimal-code"><span class="header-section-number">10.5</span> Minimal code</a></li>
<li><a class="nav-link" href="#imagestim"><span class="header-section-number">10.6</span> Drawing an image</a></li>
<li><a class="nav-link" href="#placing-an-image-index-to-position"><span class="header-section-number">10.7</span> Placing an image (index to position)</a></li>
<li><a class="nav-link" href="#backside-of-the-card"><span class="header-section-number">10.8</span> Backside of the card</a></li>
<li><a class="nav-link" href="#dictionaries"><span class="header-section-number">10.9</span> Dictionaries</a></li>
<li><a class="nav-link" href="#using-a-dictionary-to-represent-a-card"><span class="header-section-number">10.10</span> Using a dictionary to represent a card</a></li>
<li><a class="nav-link" href="#card-factory"><span class="header-section-number">10.11</span> Card factory</a></li>
<li><a class="nav-link" href="#getting-a-list-of-files"><span class="header-section-number">10.12</span> Getting a list of files</a></li>
<li><a class="nav-link" href="#list-comprehension"><span class="header-section-number">10.13</span> List comprehension</a></li>
<li>
<a class="nav-link" href="#getting-list-of-relevant-files"><span class="header-section-number">10.14</span> Getting list of relevant files</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#list-operations"><span class="header-section-number">10.14.1</span> List operations</a></li></ul>
</li>
<li><a class="nav-link" href="#enumerate"><span class="header-section-number">10.15</span> Looping over both index and item via list enumeration</a></li>
<li><a class="nav-link" href="#os-library"><span class="header-section-number">10.16</span> Computing path</a></li>
<li><a class="nav-link" href="#a-deck-of-cards"><span class="header-section-number">10.17</span> A deck of cards</a></li>
<li><a class="nav-link" href="#shuffle"><span class="header-section-number">10.18</span> Shuffling cards</a></li>
<li><a class="nav-link" href="#lets-have-a-break"><span class="header-section-number">10.19</span> Let’s have a break!</a></li>
<li><a class="nav-link" href="#adding-main-game-loop"><span class="header-section-number">10.20</span> Adding main game loop</a></li>
<li><a class="nav-link" href="#psychopy-mouse"><span class="header-section-number">10.21</span> Detecting a mouse click</a></li>
<li><a class="nav-link" href="#position-to-index"><span class="header-section-number">10.22</span> Position to index</a></li>
<li><a class="nav-link" href="#flip-a-selected-card-on-click"><span class="header-section-number">10.23</span> Flip a selected card on click</a></li>
<li><a class="nav-link" href="#keeping-track-of-open-cards"><span class="header-section-number">10.24</span> Keeping track of open cards</a></li>
<li><a class="nav-link" href="#opening-only-two-cards"><span class="header-section-number">10.25</span> Opening only two cards</a></li>
<li><a class="nav-link" href="#taking-a-matching-pair-off-the-table"><span class="header-section-number">10.26</span> Taking a matching pair off the table</a></li>
<li><a class="nav-link" href="#game-over-once-all-the-cards-are-off-the-table"><span class="header-section-number">10.27</span> Game over once all the cards are off the table</a></li>
<li><a class="nav-link" href="#do-it-fast"><span class="header-section-number">10.28</span> Do it fast!</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/blob/master/08-memory.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/edit/master/08-memory.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Writing games with Python and PsychoPy</strong>" was written by Alexander (Sasha) Pastukhov. It was last built on 2022-11-06.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
