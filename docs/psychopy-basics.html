<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 8 Gettings started with PsychoPy | Writing games with Python and PsychoPy</title>
<meta name="author" content="Alexander (Sasha) Pastukhov">
<meta name="description" content="Before we program our first game using PsychoPy, we need to spend some time figuring out its basics. It is not the most suitable library for writing games, for that you might want to use Python...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Chapter 8 Gettings started with PsychoPy | Writing games with Python and PsychoPy">
<meta property="og:type" content="book">
<meta property="og:url" content="https://alexander-pastukhov.github.io/writing-games-with-python-and-psychopy/psychopy-basics.html">
<meta property="og:description" content="Before we program our first game using PsychoPy, we need to spend some time figuring out its basics. It is not the most suitable library for writing games, for that you might want to use Python...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 8 Gettings started with PsychoPy | Writing games with Python and PsychoPy">
<meta name="twitter:description" content="Before we program our first game using PsychoPy, we need to spend some time figuring out its basics. It is not the most suitable library for writing games, for that you might want to use Python...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Writing games with Python and PsychoPy</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="software.html"><span class="header-section-number">2</span> Software</a></li>
<li><a class="" href="programming-tips.html"><span class="header-section-number">3</span> Programming tips and tricks</a></li>
<li><a class="" href="python-basics.html"><span class="header-section-number">4</span> Python basics</a></li>
<li><a class="" href="guess-the-number-single-round.html"><span class="header-section-number">5</span> Guess the Number: a single round edition</a></li>
<li><a class="" href="guess-the-number-multi-round.html"><span class="header-section-number">6</span> Guess the Number: a multi round edition</a></li>
<li><a class="" href="guess-the-number-ai.html"><span class="header-section-number">7</span> Guess the Number: AI takes a turn</a></li>
<li><a class="active" href="psychopy-basics.html"><span class="header-section-number">8</span> Gettings started with PsychoPy</a></li>
<li><a class="" href="whack-a-mole.html"><span class="header-section-number">9</span> Whack-a-Mole</a></li>
<li><a class="" href="memory-game.html"><span class="header-section-number">10</span> Memory game</a></li>
<li><a class="" href="christmas-special.html"><span class="header-section-number">11</span> Christmas special</a></li>
<li><a class="" href="flappy-bird.html"><span class="header-section-number">12</span> Flappy Bird</a></li>
<li><a class="" href="seminar-02-06.html"><span class="header-section-number">13</span> Guitar Hero: staircase and iterator functions</a></li>
<li><a class="" href="the-snake.html"><span class="header-section-number">14</span> The Snake</a></li>
<li><a class="" href="moon-lander.html"><span class="header-section-number">15</span> Moon lander</a></li>
<li><a class="" href="space-invaders.html"><span class="header-section-number">16</span> Space invaders: mixins and duck typing</a></li>
<li><a class="" href="game-of-life-numpy.html"><span class="header-section-number">17</span> Game of life (NumPy)</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="psychopy-basics" class="section level1" number="8">
<h1>
<span class="header-section-number">8</span> Gettings started with PsychoPy<a class="anchor" aria-label="anchor" href="#psychopy-basics"><i class="fas fa-link"></i></a>
</h1>
<p>Before we program our first game using <a href="https://psychopy.org/">PsychoPy</a>, we need to spend some time figuring out its basics. It is not the most suitable library for writing games, for that you might want to use <a href="https://arcade.academy/">Python Arcade</a> or <a href="https://www.pygame.org/">PyGame</a>. However, it is currently the best Python library for developing psychophysical experiments (and this is what we are after).</p>
<div id="chapter-concepts-3" class="section level2" number="8.1">
<h2>
<span class="header-section-number">8.1</span> Chapter concepts<a class="anchor" aria-label="anchor" href="#chapter-concepts-3"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Understanding how to use <a href="psychopy-basics.html#classes-and-objects">classes and objects</a>.</li>
<li>Using <a href="psychopy-basics.html#arguments-by-position-or-name">named parameters</a> in functions.</li>
<li>Understanding PsychoPy <a href="psychopy-basics.html#psychopy-units">units system</a>.</li>
<li>Using basic Psycho <a href="psychopy-basics.html#adding-text-message">visual stimuli</a> and handling <a href="psychopy-basics.html#make-the-square-jump-on-your-command">user inputs</a>.</li>
</ul>
</div>
<div id="minimal-psychopy" class="section level2" number="8.2">
<h2>
<span class="header-section-number">8.2</span> Minimal PsychoPy code<a class="anchor" aria-label="anchor" href="#minimal-psychopy"><i class="fas fa-link"></i></a>
</h2>
<p>Copy-paste the following code into <code>code01.py</code> file (you did remember to create a new folder for the chapter?):</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="psychopy-basics.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb59-2"><a href="psychopy-basics.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co">A minimal PsychoPy code.</span></span>
<span id="cb59-3"><a href="psychopy-basics.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb59-4"><a href="psychopy-basics.html#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="psychopy-basics.html#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co"># this imports two modules from psychopy</span></span>
<span id="cb59-6"><a href="psychopy-basics.html#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co"># visual has all the visual stimuli, including the Window class</span></span>
<span id="cb59-7"><a href="psychopy-basics.html#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co"># that we need to create a program window</span></span>
<span id="cb59-8"><a href="psychopy-basics.html#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="co"># event has function for working with mouse and keyboard</span></span>
<span id="cb59-9"><a href="psychopy-basics.html#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> psychopy <span class="im">import</span> visual, event</span>
<span id="cb59-10"><a href="psychopy-basics.html#cb59-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-11"><a href="psychopy-basics.html#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a 800 x 600 window</span></span>
<span id="cb59-12"><a href="psychopy-basics.html#cb59-12" aria-hidden="true" tabindex="-1"></a>win <span class="op">=</span> visual.Window(size<span class="op">=</span>(<span class="dv">800</span>, <span class="dv">600</span>))</span>
<span id="cb59-13"><a href="psychopy-basics.html#cb59-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-14"><a href="psychopy-basics.html#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="co"># waiting for any key press</span></span>
<span id="cb59-15"><a href="psychopy-basics.html#cb59-15" aria-hidden="true" tabindex="-1"></a>event.waitKeys()</span>
<span id="cb59-16"><a href="psychopy-basics.html#cb59-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-17"><a href="psychopy-basics.html#cb59-17" aria-hidden="true" tabindex="-1"></a><span class="co"># closing the window</span></span>
<span id="cb59-18"><a href="psychopy-basics.html#cb59-18" aria-hidden="true" tabindex="-1"></a>win.close()</span></code></pre></div>
<p>Run it to check that PsychoPy work. If you get an error saying that <code>psychopy</code> library is not found, check the <a href="software.html#install-vs-code">active Python interpreter</a>. You should get a gray window with <em>PsychoPy</em> title. Press any key (click on the window, if you switched to another one, so that it registers a key press) and it should close. Not very exciting but does show that everything works as it should.</p>
<div class="rmdnote program">
<p>Put your code into <em>code01.py</em>.</p>
</div>
<p>The code is simple but packs quite a few novel bits. First line is easy, we simply import <a href="https://psychopy.org/api/visual/index.html">visual</a> and <a href="https://psychopy.org/api/event.html">event</a> modules from <em>psychopy</em> library (a library can be itself organized into sublibraries to make things even more modular). Then, we create an <em>object</em> <code>win</code> using a <em>class</em> <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window">Window</a> with custom size. Third line uses function <a href="https://psychopy.org/api/event.html#psychopy.event.waitKeys">waitKeys()</a> from <em>event</em> module to wait for a key press. The last one closes the window by calling its <code>close</code> <em>method</em>. You should have little trouble with lines #1 and #3 but you need to learn about object-oriented programming to understand #2 and #4.</p>
</div>
<div id="classes-and-objects" class="section level2" number="8.3">
<h2>
<span class="header-section-number">8.3</span> Classes and objects<a class="anchor" aria-label="anchor" href="#classes-and-objects"><i class="fas fa-link"></i></a>
</h2>
<p>The PsychoPy library is a collection of <em>classes</em> that you use to create <em>objects</em>, an approach called <em>object-oriented programming</em>. The core idea is in the name: Instead of keeping variables (data) separate from functions (actions), you combine them in an object that has attributes<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Also called properties&lt;/p&gt;"><sup>27</sup></a> (its own variables) and methods (its own functions). This approach utilizes our natural tendency to perceive the world as a collection of interacting objects.</p>
<p>First, you need to understand an important distinction between <em>classes</em> and <em>objects</em>. A <em>class</em> is a “blueprint” that describes properties and behavior of <em>all</em> objects of that class. This “blueprint” is used to create an <em>instance</em> of that class, which is called an <em>object</em>. For example, Homo sapiens is a <em>class</em> that describes species that have certain properties, such as height, and can do certain things, such as running. However, Homo sapiens as a class has only a <em>concept</em> of height but no specific height itself. E.g., you cannot ask “What is height of Homo sapiens?” only what is an average (mean, median, etc.) height of individuals of that class. Similarly, you cannot say “Run, Homo sapiens! Run!” as abstract concepts have trouble performing real actions like that. Instead, it is Alexander Pastukhov who is an <em>instance</em> of Homo sapiens class with a specific height and a specific (not particularly good) ability to run. Other instances of Homo sapiens (other people) have different height and a different (typically better) ability to run. Thus, a class describes all common properties and methods that all <em>instances</em> of the class (all objects) will have. But individual object will behave differently because of different values of their properties. This means that whenever you meet a Homo sapien, you could be sure that they have height per se but will need to look at an individual <em>instance</em> to figure what height they have.</p>
<p><code>Window</code> is a class that describes properties that a PsychoPy window must have and actions it can perform (you can see the complete list in <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window">the manual</a>). To create an object, we use its class definition and store the result in a variable. In the code above we call <code>Window</code> class<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Technically, we call a class constructor method called &lt;code&gt;__init__&lt;/code&gt; but this is not important for now.&lt;/p&gt;"><sup>28</sup></a> while passing custom parameters to it (<code>size=(800, 600)</code>) and store an object that it returns in variable <code>win</code>.</p>
<p>Attributes are, essentially, variables that belong to the class and, therefore, variables that each object will possess. For example, a <code>Window</code> class has <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window.size">size</a> attribute that determines its on-screen size in pixels. It also has (background) <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window.color">color</a>, an attribute that determines whether it should be shown in <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window.fullscr">full screen mode</a>, etc. Thus, a <code>win</code> object will have all these attributes and they will have specific values.</p>
<p>To understand both properties and class/object distinction better, put a breakpoint on the third line of code (<code>event.waitKeys()</code>) and fire up the debugger via <strong>F5</strong>. Once the window is created, the execution will pause and you will find a <code>win</code> object in <em>Variables/Locals</em>. Click on it and it will expand to show all attributes and its values, including <code>size</code> (check that it is <code>[800, 600]</code>). Note that you will not see <code>Window</code> itself in the same list. This is because it is a class, an abstract concept, whereas as <code>win</code> is its instance and object of that class.</p>
<p>Methods, such as <code>Window.close()</code> are, essentially, functions that belong to the class/object and perform certain actions on the object. For example, method <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window.close">close()</a> closes the window, <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window.flip">flip()</a> updates it after we finished drawing in it, etc. What is important is to remember is that each method will act only on the object <em>it belongs to</em> and not on other instances of the same class. This means that you can create two windows (<code>win1</code> and <code>win2</code>) and calling <code>win1.close()</code> will close the first but not the second window (try this out!). Same goes for attributes, changing them in one object will not affect any other objects of the same class, just like changing a value in one variable will not affect the other ones.</p>
<p>Although we barely scratched the surface of object-oriented programming, it will be enough for us to be able to use classes defined for us in PsychoPy library.</p>
</div>
<div id="arguments-by-position-or-name" class="section level2" number="8.4">
<h2>
<span class="header-section-number">8.4</span> Function parameters: default values, passing by position or by name<a class="anchor" aria-label="anchor" href="#arguments-by-position-or-name"><i class="fas fa-link"></i></a>
</h2>
<p>There are a few more curious bits in the <code>visual.Window(size=(800, 600))</code> call above that we need to discuss. These curiosities are related to functions (and, therefore, methods) not classes per se. First, constructor method of the Window class has <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window">a lot of arguments</a> (when we construct an object, we call a constructor <em>method</em> of the class, which is why we are talking about functions). And yet, we only passed one of them. This is because you can specify <a href="https://docs.python.org/3/tutorial/controlflow.html#default-argument-values">default values</a> for individual parameters. In this case, if a parameter is omitted, a default value is used instead</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb60-1"><a href="psychopy-basics.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> divide(x1, x2<span class="op">=</span><span class="dv">2</span>):</span>
<span id="cb60-2"><a href="psychopy-basics.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">"""</span></span>
<span id="cb60-3"><a href="psychopy-basics.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co">  Divides numbers, uses 2 as a second value if a second term is omitted.</span></span>
<span id="cb60-4"><a href="psychopy-basics.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb60-5"><a href="psychopy-basics.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co">  Parameters:</span></span>
<span id="cb60-6"><a href="psychopy-basics.html#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co">  ----------</span></span>
<span id="cb60-7"><a href="psychopy-basics.html#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="co">  x1 : number</span></span>
<span id="cb60-8"><a href="psychopy-basics.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="co">  x2 : number, defaults to 2</span></span>
<span id="cb60-9"><a href="psychopy-basics.html#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb60-10"><a href="psychopy-basics.html#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="co">  Returns:</span></span>
<span id="cb60-11"><a href="psychopy-basics.html#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="co">  ----------</span></span>
<span id="cb60-12"><a href="psychopy-basics.html#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="co">  number</span></span>
<span id="cb60-13"><a href="psychopy-basics.html#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="co">  """</span></span>
<span id="cb60-14"><a href="psychopy-basics.html#cb60-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x1 <span class="op">/</span> x2</span>
<span id="cb60-15"><a href="psychopy-basics.html#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide(<span class="dv">2</span>))</span>
<span id="cb60-16"><a href="psychopy-basics.html#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1.0</span></span>
<span id="cb60-17"><a href="psychopy-basics.html#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide(<span class="dv">2</span>, <span class="dv">4</span>))</span>
<span id="cb60-18"><a href="psychopy-basics.html#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.5</span></span></code></pre></div>
<p>If you look at <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window">documentation</a>, you will see that for the Window class constructor <em>all</em> parameters have a default value. This is a part of PsychoPy’s philosophy of combining rich customization (just look at the sheer number of parameters!) with simplicity of use through sensible defaults (specify nothing and the window will still work).</p>
<p>Second, we did not just pass the value but specified which parameter this value is for via <code>size=(800, 600)</code>. This notation is called <a href="https://docs.python.org/3/tutorial/controlflow.html#keyword-arguments">keyword arguments</a>. The advantage is in making it more explicit which parameter you are passing a value through. Plus, it allows you to put parameters any order, if that is more relevant given the context<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;However, stick to original order for consistency otherwise.&lt;/p&gt;"><sup>29</sup></a>. If you do not use names, the values are assigned to individual parameters based on their <em>position</em> (a.k.a. positional parameters). You can even mix the two, but positional parameters must come first, see <a href="https://docs.python.org/3/tutorial/controlflow.html#more-on-defining-functions">documentation</a> if you want to know more.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb61-1"><a href="psychopy-basics.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using positional parameters</span></span>
<span id="cb61-2"><a href="psychopy-basics.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide(<span class="dv">2</span>, <span class="dv">4</span>))</span>
<span id="cb61-3"><a href="psychopy-basics.html#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.5</span></span></code></pre></div>
<div class="sourceCode" id="cb62"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb62-1"><a href="psychopy-basics.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using keyword arguments</span></span>
<span id="cb62-2"><a href="psychopy-basics.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide(x2<span class="op">=</span><span class="dv">4</span>, x1<span class="op">=</span><span class="dv">2</span>))</span>
<span id="cb62-3"><a href="psychopy-basics.html#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.5</span></span></code></pre></div>
<div class="sourceCode" id="cb63"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="psychopy-basics.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mixing positional and keyword arguments</span></span>
<span id="cb63-2"><a href="psychopy-basics.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(divide(<span class="dv">2</span>, x2<span class="op">=</span><span class="dv">4</span>))</span>
<span id="cb63-3"><a href="psychopy-basics.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.5</span></span></code></pre></div>
</div>
<div id="adding-main-loop" class="section level2" number="8.5">
<h2>
<span class="header-section-number">8.5</span> Adding main loop<a class="anchor" aria-label="anchor" href="#adding-main-loop"><i class="fas fa-link"></i></a>
</h2>
<p>Currently, not much is happening in our program. One thing we need to add is a loop in which we can repeatedly draw in a window (and update it via its <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window.flip">flip()</a> method), check user input, and perform any other necessary actions.</p>
<p>First, let us add the loop and handling of user inputs (the fun drawing part will be next). The loop goes between opening and closing the window:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="psychopy-basics.html#cb64-1" aria-hidden="true" tabindex="-1"></a>importing libraries</span>
<span id="cb64-2"><a href="psychopy-basics.html#cb64-2" aria-hidden="true" tabindex="-1"></a>opening the window</span>
<span id="cb64-3"><a href="psychopy-basics.html#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="psychopy-basics.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="op">--&gt;</span> our main loop <span class="op">&lt;--</span></span>
<span id="cb64-5"><a href="psychopy-basics.html#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="psychopy-basics.html#cb64-6" aria-hidden="true" tabindex="-1"></a>closing the window</span></code></pre></div>
<p>The loop should be repeated until the user presses an <em>escape</em> key and, therefore, you will need a variable that signals this. My approach is to create a variable <code>gameover</code> initializing it to <code>False</code> and repeat the loop as long as the game not over. Then, in the loop, use function <a href="https://psychopy.org/api/event.html#psychopy.event.getKeys">event.getKeys()</a> to check whether <em>escape</em> button was pressed (for this, you need to pass <code>keyList=['escape']</code>). The function returns a <em>list</em> of keys, if any of them were pressed in the meantime or an empty list, if no keys from the <code>keyList</code> were pressed. Store that returned value in a temporary variable (I tend to call it <code>keys</code>). You will learn about lists only in the <em>next</em> chapter, so for now use a ready-made: <code>len(keys) &gt; 0</code> is a comparison that is <code>True</code> if list is not empty. If the list is indeed not empty, that means that the user pressed <em>escape</em> (as that is the only key that we specified in the function call) and the game should be over. Think how can you do it <em>without</em> an <code>if</code> statement, computing the logical value directly?</p>
<div class="rmdnote program">
<p>Put your code into <em>code02.py</em>.</p>
</div>
</div>
<div id="adding-text-message" class="section level2" number="8.6">
<h2>
<span class="header-section-number">8.6</span> Adding text message<a class="anchor" aria-label="anchor" href="#adding-text-message"><i class="fas fa-link"></i></a>
</h2>
<p>Although we are now running a nice game loop, we still have only a boring gray window to look at. Let us create a text stimulus, which would say “Press escape to exit” and display it during the loop. For this we will use <a href="https://psychopy.org/api/visual/textstim.html">visual.TextStim</a> class from PsychoPy library.</p>
<p>First, you need to create the <code>press_escape_text</code> object (instance of the <a href="https://psychopy.org/api/visual/textstim.html%20class">TextStim</a>) before the main loop. There are quite a few parameters that you can play with but minimally, you need to pass the window the text should be displayed in (our <code>win</code> variable) and the actual text you want to display (<code>text="Press escape to exit"</code>). For all other settings PsychoPy will use its <a href="psychopy-basics.html#arguments-by-position-or-name">defaults</a> (default font family, color and size, placed right at the windows’ center).</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb65-1"><a href="psychopy-basics.html#cb65-1" aria-hidden="true" tabindex="-1"></a>press_escape_text <span class="op">=</span> visual.TextStim(win, <span class="st">"Press escape to exit"</span>)</span></code></pre></div>
<p>To show the visuals in PsychoPy, you first <em>draw</em> each element by calling its <a href="https://psychopy.org/api/visual/textstim.html#psychopy.visual.TextStim.draw">draw()</a> method and then update the window by <em>flipping</em><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;This is called flipping because a window has two buffers: one that is currently displayed on the screen and the other one in which you can draw your stimuli. Once you are done with drawing, you “flip” the buffers so that they exchange their places. Now the one you drew in gets displayed and you have the other buffer to draw in.&lt;/p&gt;"><sup>30</sup></a> it. Note that you call <a href="https://psychopy.org/api/visual/window.html#psychopy.visual.Window.flip">flip()</a> only <em>once</em> after <em>all</em> stimuli are drawn. I typically organize this code into a separate chunk and prepend it with a comment line <code># drawing stimuli</code>.</p>
<p>The <code># drawing stimuli</code> chunk goes inside the main loop either before<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;My personal preference is to draw first but in most cases it makes no difference.&lt;/p&gt;"><sup>31</sup></a> or after the keyboard check. Organize the latter also as a separate code chunk with its own brief comment.</p>
<div class="rmdnote program">
<p>Put your code into <em>code03.py</em>.</p>
</div>
<p>Now, you should have a nice, although static, message positioned at the window’s center that tells you how you can exit the game. Check out the manual page for <a href="https://psychopy.org/api/visual/textstim.html">visual.TextStim</a> and try changing it by passing additional parameters to the class call. For example you can change its <code>color</code>, whether text is <code>bold</code> and/or <code>italic</code>, how it is aligned, etc. However, if you want to change <em>where</em> the text is displayed, read on below.</p>
</div>
<div id="adding-a-square-and-placing-it-not-at-the-center-of-the-window" class="section level2" number="8.7">
<h2>
<span class="header-section-number">8.7</span> Adding a square and placing it <em>not</em> at the center of the window<a class="anchor" aria-label="anchor" href="#adding-a-square-and-placing-it-not-at-the-center-of-the-window"><i class="fas fa-link"></i></a>
</h2>
<p>Now, let us figure out how create and move visuals to an arbitrary location on the screen. In principle, this is very straightforward as every visual stimulus (including <a href="https://psychopy.org/api/visual/textstim.html#psychopy.visual.TextStim">TextStim</a> we just used) has <a href="https://psychopy.org/api/visual/textstim.html#psychopy.visual.TextStim.pos">pos</a> property that specifies (you guessed it!) its position within a window. However, to make your life easier, PsychoPy first complicates it by having <a href="https://psychopy.org/general/units.html"><strong>five</strong> (5!) different position units systems</a>.</p>
<p>Before we start exploring the units, let us create a simple white square. The visual class we need is <a href="https://psychopy.org/api/visual/rect.html">visual.Rect</a>. Just like the <a href="https://psychopy.org/api/visual/textstim.html#psychopy.visual.TextStim">TextStim</a> above, it requires <code>win</code> variable (so it knows which window it belongs to), <code>width</code> (defaults to 0.5 of those mysterious units), <code>height</code> (also defaults to 0.5), <code>pos</code> (defaults to (0,0)), <code>lineColor</code> (defaults to <code>white</code>) and <code>fillColor</code> (defaults to <code>None</code>). Thus, to get a “standard” white outline square with size of <code>(0.5, 0.5)</code> units at <code>(0, 0)</code> location you only need pass the <code>win</code> variable: <code>white_square = visual.Rect(win)</code>. However, on <em>some</em> computers a curious bug prevents PsychoPy from drawing the outline correctly. If you end up staring at an empty screen, add <code>fillColor="white"</code> to the call and you should see a filled white square.</p>
<p>You draw the square just like you drew the text stimulus, via its <a href="https://psychopy.org/api/visual/rect.html#psychopy.visual.rect.Rect.draw">draw()</a> method. Create the code (either keep the text and draw both, or drop the text), run it to see a very white square.</p>
<div class="rmdnote program">
<p>Put your code into <em>code04.py</em>.</p>
</div>
<p>What? Your square is not really a square? Well, I’ve warned you: <a href="https://psychopy.org/general/units.html#units">Five unit systems</a>!</p>
</div>
<div id="psychopy-units" class="section level2" number="8.8">
<h2>
<span class="header-section-number">8.8</span> Five unit systems<a class="anchor" aria-label="anchor" href="#psychopy-units"><i class="fas fa-link"></i></a>
</h2>
<div id="psychopy-units-height" class="section level3" number="8.8.1">
<h3>
<span class="header-section-number">8.8.1</span> Height units<a class="anchor" aria-label="anchor" href="#psychopy-units-height"><i class="fas fa-link"></i></a>
</h3>
<p>With <a href="https://psychopy.org/general/units.html#height-units">height units</a> everything is specified in the units of window height. The center of the window is at <code>(0,0)</code> and the window goes vertically from <code>-0.5</code> to <code>0.5</code>. However, horizontal limits depend on the aspect ratio. For our 800×600 window (4:3 aspect ratio), it will go from -0.666 to 0.666 (the window is 1.3333 window heights wide). For a 600×800 window (3:4 aspect ratio) from -0.375 to 0.375 (the window is 0.75 window heights wide), for a square window 600×600 (aspect ratio 1:1) from -0.5 to 0.5 (again, in all these cases it goes from -0.5 to 0.5 vertically). This means that the actual on-screen distance for the units is the same for both axes. So that a square of <code>size=(0.5, 0.5)</code> is actually a square (it spans the same distance vertically and horizontally). Thus, height units make <em>sizing</em> objects easier but <em>placing them on horizontal axis correctly</em> harder (as you need to know the aspect ratio).</p>
<p>Modify your code by specifying the unit system when you create the window: <code>win = visual.Window(..., units="height")</code>. Play with your code by specifying position of the square when you create it. You just need to pass an extra parameter <code>pos=(&lt;x&gt;, &lt;y&gt;)</code>.</p>
<div class="rmdnote program">
<p>Put your code into <em>code05.py</em>.</p>
</div>
<p>By the way, which way is up when y is below or above zero? Unfortunately, unlike x-axis, the y-axis can go both ways. For PsychoPy y-axis points up (so negative values move the square down and positive up). However, if you would use an Eyelink eye tracker to record where participants looked <em>on the screen</em>, it assumes that y-axis starts at the top of the screen and points down<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;This could be very confusing, if you forget about this when overlaying gaze data on an image you used in the study and wondering what on Earth the participants were doing&lt;/p&gt;"><sup>32</sup></a>.</p>
<p>Now, modify the size of the square (and turn it into a non-square rectangle) by passing <code>width=&lt;some-width-value&gt;</code> and <code>height=&lt;some-height-value&gt;</code>.</p>
<div class="rmdnote program">
<p>Put your code into <em>code06.py</em>.</p>
</div>
</div>
<div id="psychopy-units-norm" class="section level3" number="8.8.2">
<h3>
<span class="header-section-number">8.8.2</span> Normalized units<a class="anchor" aria-label="anchor" href="#psychopy-units-norm"><i class="fas fa-link"></i></a>
</h3>
<p><a href="https://psychopy.org/general/units.html#normalised-units">Normalized units</a> are default units and assume that the window goes from -1 to 1 both along x- and x-axis. Again, (0,0) is the center of the screen but the bottom-left corner is (-1, -1) whereas the top-right is (1, 1). This makes <em>placing</em> your objects easier but <em>sizing</em> them harder (you need to know the aspect ratio to ensure that a square is a square).</p>
<p>Modify your code, so that it uses <code>"norm"</code> units when you create the window and size your white square stimulus, so it does look like a square.</p>
<div class="rmdnote program">
<p>Put your code into <em>code07.py</em>.</p>
</div>
</div>
<div id="pixels-on-screen" class="section level3" number="8.8.3">
<h3>
<span class="header-section-number">8.8.3</span> Pixels on screen<a class="anchor" aria-label="anchor" href="#pixels-on-screen"><i class="fas fa-link"></i></a>
</h3>
<p>For <a href="https://psychopy.org/general/units.html#pixels-on-screen">pixels on screen</a> units, the window center is still at <code>(0,0)</code> but it goes from <code>-&lt;width-in-pixels&gt;/2</code> to <code>&lt;width-in-pixels&gt;/2</code> horizontally (from -400 to 400 in our case) and <code>-&lt;height-in-pixels&gt;/2</code> to <code>&lt;height-in-pixels&gt;/2</code> vertically (from -300 to 300). These units could be more intuitive when you are working with a fixed sized window, as the span is the same along the both axes (like for the height units). However, they spell trouble if your window size has changed or you are using a full screen window on a monitor with an unknown resolution. In short, you should use them only if they dramatically simplify your code.</p>
<p>Modify your code to use <code>"pix"</code> units and briefly test sizing and placing your square within the window.</p>
<div class="rmdnote program">
<p>Put your code into <em>code08.py</em>.</p>
</div>
</div>
<div id="degrees-of-visual-angle" class="section level3" number="8.8.4">
<h3>
<span class="header-section-number">8.8.4</span> Degrees of visual angle<a class="anchor" aria-label="anchor" href="#degrees-of-visual-angle"><i class="fas fa-link"></i></a>
</h3>
<p>Unlike the three units above, using <a href="https://psychopy.org/general/units.html#degrees-of-visual-angle">degrees of visual angle</a> requires you knowing a physical size of the screen, its resolution, and viewing distance (how far your eyes are away from the screen). They are <em>the</em> measurement units used in visual psychophysics as they describe stimulus size as it appears on the retina (see <a href="https://en.wikipedia.org/wiki/Visual_angle">Wikipedia</a> for details). Thus, these are the units you want to use when running an actual experiment in the lab.</p>
</div>
<div id="centimeters-on-screen" class="section level3" number="8.8.5">
<h3>
<span class="header-section-number">8.8.5</span> Centimeters on screen<a class="anchor" aria-label="anchor" href="#centimeters-on-screen"><i class="fas fa-link"></i></a>
</h3>
<p>Here, you would need know the physical size of your screen and its resolution. These are fairly exotic units for very specific usage cases<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;So specific that I cannot think of one, to be honest.&lt;/p&gt;"><sup>33</sup></a>.</p>
</div>
</div>
<div id="make-your-square-jump" class="section level2" number="8.9">
<h2>
<span class="header-section-number">8.9</span> Make your square jump<a class="anchor" aria-label="anchor" href="#make-your-square-jump"><i class="fas fa-link"></i></a>
</h2>
<p>So far, we fixed the location of the square when we created it. However, you can move it at any time by assigning a new <code>(&lt;x&gt;, &lt;y&gt;)</code> coordinates to its <code>pos</code> property. <em>E.g.</em>, <code>white_square.pos = (-0.1, 0.2)</code>. Let us experiment by moving the square to a random location on every iteration of the loop (this could cause a lot of flashing, so if you have a photosensitive epilepsy that can be triggered by flashing lights, you probably should do it just once before the loop). Use the units of your choice and generate a new position using <a href="https://docs.python.org/3/library/random.html#random.uniform">random.uniform(a, b)</a> function, that generates a random value within <em>a..b</em> range<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;You need to import the random library for this, of course.&lt;/p&gt;"><sup>34</sup></a>. Generate two values (one for x, one for y). If you use <code>"norm"</code> units, your range is the same (from -1 to 1) for the two dimensions. However, if you used <code>"height"</code> units, you need to take into account the aspect ratio of your window (4:3 if you are using 800×600 pix window).</p>
<div class="rmdnote program">
<p>Put your code into <em>code09.py</em>.</p>
</div>
</div>
<div id="make-the-square-jump-on-your-command" class="section level2" number="8.10">
<h2>
<span class="header-section-number">8.10</span> Make the square jump on your command<a class="anchor" aria-label="anchor" href="#make-the-square-jump-on-your-command"><i class="fas fa-link"></i></a>
</h2>
<p>This was very flashy, so let us make the square jump only when you press <strong>space</strong> button. For this, we need to expand the code that processes keyboard input. So far, we restricted it to just <strong>escape</strong> button and checked whether any (hence, <strong>escape</strong>) button was pressed.</p>
<p>You will learn about lists and indexes in the next chapter, so here is another ready-made. First, add <code>"space"</code> to the <code>keyList</code> parameter. Next, use conditional <a href="#id_%7B#if-statement">if statement</a> to check whether <a href="https://psychopy.org/api/event.html#psychopy.event.getKeys">event.getKeys()</a> returned a key press. If it did (<code>len(keys) &gt; 0</code>), you can now check whether <code>keys[0]</code> is equal to <code>"space"</code> or <code>"escape"</code><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;You can use &lt;code&gt;if..else&lt;/code&gt;, because we only have two options but I would recommend to go for a more general solution &lt;code&gt;if..elif&lt;/code&gt; &lt;/p&gt;"><sup>35</sup></a>. If it was the latter, the game is over as before. If it was <code>"space"</code> then move the square to a new random position (and do not move it on every frame!)</p>
<p>Hint, if you are debugging, put you breakpoint inside the <code>if</code> statement, so that the program pauses only once you pressed a key (what happens if you put it on the <code>win.flip()</code> line?)</p>
<div class="rmdnote program">
<p>Put your code into <em>code10.py</em>.</p>
</div>
</div>
<div id="basics-covered" class="section level2" number="8.11">
<h2>
<span class="header-section-number">8.11</span> Basics covered<a class="anchor" aria-label="anchor" href="#basics-covered"><i class="fas fa-link"></i></a>
</h2>
<p>There is plenty more to learn about PsychoPy but we’ve got the basics covered. Submit your files and get ready to <a href="whack-a-mole.html#whack-a-mole">Whack a Mole</a>!</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="guess-the-number-ai.html"><span class="header-section-number">7</span> Guess the Number: AI takes a turn</a></div>
<div class="next"><a href="whack-a-mole.html"><span class="header-section-number">9</span> Whack-a-Mole</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#psychopy-basics"><span class="header-section-number">8</span> Gettings started with PsychoPy</a></li>
<li><a class="nav-link" href="#chapter-concepts-3"><span class="header-section-number">8.1</span> Chapter concepts</a></li>
<li><a class="nav-link" href="#minimal-psychopy"><span class="header-section-number">8.2</span> Minimal PsychoPy code</a></li>
<li><a class="nav-link" href="#classes-and-objects"><span class="header-section-number">8.3</span> Classes and objects</a></li>
<li><a class="nav-link" href="#arguments-by-position-or-name"><span class="header-section-number">8.4</span> Function parameters: default values, passing by position or by name</a></li>
<li><a class="nav-link" href="#adding-main-loop"><span class="header-section-number">8.5</span> Adding main loop</a></li>
<li><a class="nav-link" href="#adding-text-message"><span class="header-section-number">8.6</span> Adding text message</a></li>
<li><a class="nav-link" href="#adding-a-square-and-placing-it-not-at-the-center-of-the-window"><span class="header-section-number">8.7</span> Adding a square and placing it not at the center of the window</a></li>
<li>
<a class="nav-link" href="#psychopy-units"><span class="header-section-number">8.8</span> Five unit systems</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#psychopy-units-height"><span class="header-section-number">8.8.1</span> Height units</a></li>
<li><a class="nav-link" href="#psychopy-units-norm"><span class="header-section-number">8.8.2</span> Normalized units</a></li>
<li><a class="nav-link" href="#pixels-on-screen"><span class="header-section-number">8.8.3</span> Pixels on screen</a></li>
<li><a class="nav-link" href="#degrees-of-visual-angle"><span class="header-section-number">8.8.4</span> Degrees of visual angle</a></li>
<li><a class="nav-link" href="#centimeters-on-screen"><span class="header-section-number">8.8.5</span> Centimeters on screen</a></li>
</ul>
</li>
<li><a class="nav-link" href="#make-your-square-jump"><span class="header-section-number">8.9</span> Make your square jump</a></li>
<li><a class="nav-link" href="#make-the-square-jump-on-your-command"><span class="header-section-number">8.10</span> Make the square jump on your command</a></li>
<li><a class="nav-link" href="#basics-covered"><span class="header-section-number">8.11</span> Basics covered</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/blob/master/06-psychopy.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/alexander-pastukhov/writing-games-with-python-and-psychopy/edit/master/06-psychopy.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Writing games with Python and PsychoPy</strong>" was written by Alexander (Sasha) Pastukhov. It was last built on 2022-11-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
